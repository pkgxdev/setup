var f=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var kt=f((o_,Wn)=>{var jh="2.0.0",Uh=Number.MAX_SAFE_INTEGER||9007199254740991,zh=16,Gh=250,Wh=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Wn.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:zh,MAX_SAFE_BUILD_LENGTH:Gh,MAX_SAFE_INTEGER:Uh,RELEASE_TYPES:Wh,SEMVER_SPEC_VERSION:jh,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var qt=f((a_,Hn)=>{var Hh=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{};Hn.exports=Hh});var lt=f((ge,Vn)=>{var{MAX_SAFE_COMPONENT_LENGTH:zs,MAX_SAFE_BUILD_LENGTH:Vh,MAX_LENGTH:Xh}=kt(),Yh=qt();ge=Vn.exports={};var Zh=ge.re=[],Kh=ge.safeRe=[],d=ge.src=[],m=ge.t={},Qh=0,Gs="[a-zA-Z0-9-]",Jh=[["\\s",1],["\\d",Xh],[Gs,Vh]],ec=i=>{for(let[e,t]of Jh)i=i.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return i},E=(i,e,t)=>{let s=ec(e),r=Qh++;Yh(i,r,e),m[i]=r,d[r]=e,Zh[r]=new RegExp(e,t?"g":void 0),Kh[r]=new RegExp(s,t?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*");E("NUMERICIDENTIFIERLOOSE","\\d+");E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Gs}*`);E("MAINVERSION",`(${d[m.NUMERICIDENTIFIER]})\\.(${d[m.NUMERICIDENTIFIER]})\\.(${d[m.NUMERICIDENTIFIER]})`);E("MAINVERSIONLOOSE",`(${d[m.NUMERICIDENTIFIERLOOSE]})\\.(${d[m.NUMERICIDENTIFIERLOOSE]})\\.(${d[m.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASEIDENTIFIER",`(?:${d[m.NUMERICIDENTIFIER]}|${d[m.NONNUMERICIDENTIFIER]})`);E("PRERELEASEIDENTIFIERLOOSE",`(?:${d[m.NUMERICIDENTIFIERLOOSE]}|${d[m.NONNUMERICIDENTIFIER]})`);E("PRERELEASE",`(?:-(${d[m.PRERELEASEIDENTIFIER]}(?:\\.${d[m.PRERELEASEIDENTIFIER]})*))`);E("PRERELEASELOOSE",`(?:-?(${d[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[m.PRERELEASEIDENTIFIERLOOSE]})*))`);E("BUILDIDENTIFIER",`${Gs}+`);E("BUILD",`(?:\\+(${d[m.BUILDIDENTIFIER]}(?:\\.${d[m.BUILDIDENTIFIER]})*))`);E("FULLPLAIN",`v?${d[m.MAINVERSION]}${d[m.PRERELEASE]}?${d[m.BUILD]}?`);E("FULL",`^${d[m.FULLPLAIN]}$`);E("LOOSEPLAIN",`[v=\\s]*${d[m.MAINVERSIONLOOSE]}${d[m.PRERELEASELOOSE]}?${d[m.BUILD]}?`);E("LOOSE",`^${d[m.LOOSEPLAIN]}$`);E("GTLT","((?:<|>)?=?)");E("XRANGEIDENTIFIERLOOSE",`${d[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);E("XRANGEIDENTIFIER",`${d[m.NUMERICIDENTIFIER]}|x|X|\\*`);E("XRANGEPLAIN",`[v=\\s]*(${d[m.XRANGEIDENTIFIER]})(?:\\.(${d[m.XRANGEIDENTIFIER]})(?:\\.(${d[m.XRANGEIDENTIFIER]})(?:${d[m.PRERELEASE]})?${d[m.BUILD]}?)?)?`);E("XRANGEPLAINLOOSE",`[v=\\s]*(${d[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[m.XRANGEIDENTIFIERLOOSE]})(?:${d[m.PRERELEASELOOSE]})?${d[m.BUILD]}?)?)?`);E("XRANGE",`^${d[m.GTLT]}\\s*${d[m.XRANGEPLAIN]}$`);E("XRANGELOOSE",`^${d[m.GTLT]}\\s*${d[m.XRANGEPLAINLOOSE]}$`);E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${zs}})(?:\\.(\\d{1,${zs}}))?(?:\\.(\\d{1,${zs}}))?`);E("COERCE",`${d[m.COERCEPLAIN]}(?:$|[^\\d])`);E("COERCEFULL",d[m.COERCEPLAIN]+`(?:${d[m.PRERELEASE]})?(?:${d[m.BUILD]})?(?:$|[^\\d])`);E("COERCERTL",d[m.COERCE],!0);E("COERCERTLFULL",d[m.COERCEFULL],!0);E("LONETILDE","(?:~>?)");E("TILDETRIM",`(\\s*)${d[m.LONETILDE]}\\s+`,!0);ge.tildeTrimReplace="$1~";E("TILDE",`^${d[m.LONETILDE]}${d[m.XRANGEPLAIN]}$`);E("TILDELOOSE",`^${d[m.LONETILDE]}${d[m.XRANGEPLAINLOOSE]}$`);E("LONECARET","(?:\\^)");E("CARETTRIM",`(\\s*)${d[m.LONECARET]}\\s+`,!0);ge.caretTrimReplace="$1^";E("CARET",`^${d[m.LONECARET]}${d[m.XRANGEPLAIN]}$`);E("CARETLOOSE",`^${d[m.LONECARET]}${d[m.XRANGEPLAINLOOSE]}$`);E("COMPARATORLOOSE",`^${d[m.GTLT]}\\s*(${d[m.LOOSEPLAIN]})$|^$`);E("COMPARATOR",`^${d[m.GTLT]}\\s*(${d[m.FULLPLAIN]})$|^$`);E("COMPARATORTRIM",`(\\s*)${d[m.GTLT]}\\s*(${d[m.LOOSEPLAIN]}|${d[m.XRANGEPLAIN]})`,!0);ge.comparatorTrimReplace="$1$2$3";E("HYPHENRANGE",`^\\s*(${d[m.XRANGEPLAIN]})\\s+-\\s+(${d[m.XRANGEPLAIN]})\\s*$`);E("HYPHENRANGELOOSE",`^\\s*(${d[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[m.XRANGEPLAINLOOSE]})\\s*$`);E("STAR","(<|>)?=?\\s*\\*");E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var pi=f((l_,Xn)=>{var tc=Object.freeze({loose:!0}),ic=Object.freeze({}),sc=i=>i?typeof i!="object"?tc:i:ic;Xn.exports=sc});var Ws=f((h_,Kn)=>{var Yn=/^[0-9]+$/,Zn=(i,e)=>{let t=Yn.test(i),s=Yn.test(e);return t&&s&&(i=+i,e=+e),i===e?0:t&&!s?-1:s&&!t?1:i<e?-1:1},rc=(i,e)=>Zn(e,i);Kn.exports={compareIdentifiers:Zn,rcompareIdentifiers:rc}});var M=f((c_,to)=>{var _i=qt(),{MAX_LENGTH:Qn,MAX_SAFE_INTEGER:Ei}=kt(),{safeRe:Jn,t:eo}=lt(),nc=pi(),{compareIdentifiers:ht}=Ws(),Hs=class i{constructor(e,t){if(t=nc(t),e instanceof i){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Qn)throw new TypeError(`version is longer than ${Qn} characters`);_i("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let s=e.trim().match(t.loose?Jn[eo.LOOSE]:Jn[eo.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>Ei||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ei||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ei||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){let n=+r;if(n>=0&&n<Ei)return n}return r}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(_i("SemVer.compare",this.version,this.options,e),!(e instanceof i)){if(typeof e=="string"&&e===this.version)return 0;e=new i(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof i||(e=new i(e,this.options)),ht(this.major,e.major)||ht(this.minor,e.minor)||ht(this.patch,e.patch)}comparePre(e){if(e instanceof i||(e=new i(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let s=this.prerelease[t],r=e.prerelease[t];if(_i("prerelease compare",t,s,r),s===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(s===void 0)return-1;if(s===r)continue;return ht(s,r)}while(++t)}compareBuild(e){e instanceof i||(e=new i(e,this.options));let t=0;do{let s=this.build[t],r=e.build[t];if(_i("build compare",t,s,r),s===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(s===void 0)return-1;if(s===r)continue;return ht(s,r)}while(++t)}inc(e,t,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let r=Number(s)?1:0;if(!t&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);if(n===-1){if(t===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let n=[t,r];s===!1&&(n=[t]),ht(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};to.exports=Hs});var Ve=f((u_,so)=>{var io=M(),oc=(i,e,t=!1)=>{if(i instanceof io)return i;try{return new io(i,e)}catch(s){if(!t)return null;throw s}};so.exports=oc});var no=f((f_,ro)=>{var ac=Ve(),lc=(i,e)=>{let t=ac(i,e);return t?t.version:null};ro.exports=lc});var ao=f((d_,oo)=>{var hc=Ve(),cc=(i,e)=>{let t=hc(i.trim().replace(/^[=v]+/,""),e);return t?t.version:null};oo.exports=cc});var co=f((m_,ho)=>{var lo=M(),uc=(i,e,t,s,r)=>{typeof t=="string"&&(r=s,s=t,t=void 0);try{return new lo(i instanceof lo?i.version:i,t).inc(e,s,r).version}catch{return null}};ho.exports=uc});var mo=f((p_,fo)=>{var uo=Ve(),fc=(i,e)=>{let t=uo(i,null,!0),s=uo(e,null,!0),r=t.compare(s);if(r===0)return null;let n=r>0,o=n?t:s,a=n?s:t,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l)return!a.patch&&!a.minor?"major":o.patch?"patch":o.minor?"minor":"major";let c=l?"pre":"";return t.major!==s.major?c+"major":t.minor!==s.minor?c+"minor":t.patch!==s.patch?c+"patch":"prerelease"};fo.exports=fc});var _o=f((__,po)=>{var dc=M(),mc=(i,e)=>new dc(i,e).major;po.exports=mc});var yo=f((E_,Eo)=>{var pc=M(),_c=(i,e)=>new pc(i,e).minor;Eo.exports=_c});var So=f((y_,wo)=>{var Ec=M(),yc=(i,e)=>new Ec(i,e).patch;wo.exports=yc});var go=f((w_,Ro)=>{var wc=Ve(),Sc=(i,e)=>{let t=wc(i,e);return t&&t.prerelease.length?t.prerelease:null};Ro.exports=Sc});var K=f((S_,bo)=>{var Oo=M(),Rc=(i,e,t)=>new Oo(i,t).compare(new Oo(e,t));bo.exports=Rc});var No=f((R_,vo)=>{var gc=K(),Oc=(i,e,t)=>gc(e,i,t);vo.exports=Oc});var Io=f((g_,To)=>{var bc=K(),vc=(i,e)=>bc(i,e,!0);To.exports=vc});var yi=f((O_,Lo)=>{var Ao=M(),Nc=(i,e,t)=>{let s=new Ao(i,t),r=new Ao(e,t);return s.compare(r)||s.compareBuild(r)};Lo.exports=Nc});var Do=f((b_,Po)=>{var Tc=yi(),Ic=(i,e)=>i.sort((t,s)=>Tc(t,s,e));Po.exports=Ic});var Co=f((v_,Mo)=>{var Ac=yi(),Lc=(i,e)=>i.sort((t,s)=>Ac(s,t,e));Mo.exports=Lc});var xt=f((N_,Fo)=>{var Pc=K(),Dc=(i,e,t)=>Pc(i,e,t)>0;Fo.exports=Dc});var wi=f((T_,ko)=>{var Mc=K(),Cc=(i,e,t)=>Mc(i,e,t)<0;ko.exports=Cc});var Vs=f((I_,qo)=>{var Fc=K(),kc=(i,e,t)=>Fc(i,e,t)===0;qo.exports=kc});var Xs=f((A_,xo)=>{var qc=K(),xc=(i,e,t)=>qc(i,e,t)!==0;xo.exports=xc});var Si=f((L_,$o)=>{var $c=K(),Bc=(i,e,t)=>$c(i,e,t)>=0;$o.exports=Bc});var Ri=f((P_,Bo)=>{var jc=K(),Uc=(i,e,t)=>jc(i,e,t)<=0;Bo.exports=Uc});var Ys=f((D_,jo)=>{var zc=Vs(),Gc=Xs(),Wc=xt(),Hc=Si(),Vc=wi(),Xc=Ri(),Yc=(i,e,t,s)=>{switch(e){case"===":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i===t;case"!==":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i!==t;case"":case"=":case"==":return zc(i,t,s);case"!=":return Gc(i,t,s);case">":return Wc(i,t,s);case">=":return Hc(i,t,s);case"<":return Vc(i,t,s);case"<=":return Xc(i,t,s);default:throw new TypeError(`Invalid operator: ${e}`)}};jo.exports=Yc});var zo=f((M_,Uo)=>{var Zc=M(),Kc=Ve(),{safeRe:gi,t:Oi}=lt(),Qc=(i,e)=>{if(i instanceof Zc)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;e=e||{};let t=null;if(!e.rtl)t=i.match(e.includePrerelease?gi[Oi.COERCEFULL]:gi[Oi.COERCE]);else{let l=e.includePrerelease?gi[Oi.COERCERTLFULL]:gi[Oi.COERCERTL],h;for(;(h=l.exec(i))&&(!t||t.index+t[0].length!==i.length);)(!t||h.index+h[0].length!==t.index+t[0].length)&&(t=h),l.lastIndex=h.index+h[1].length+h[2].length;l.lastIndex=-1}if(t===null)return null;let s=t[2],r=t[3]||"0",n=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return Kc(`${s}.${r}.${n}${o}${a}`,e)};Uo.exports=Qc});var Wo=f((C_,Go)=>{var Zs=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let r=this.map.keys().next().value;this.delete(r)}this.map.set(e,t)}return this}};Go.exports=Zs});var Q=f((F_,Yo)=>{var Jc=/\s+/g,Ks=class i{constructor(e,t){if(t=tu(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof Qs)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(Jc," "),this.set=this.raw.split("||").map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(r=>!Vo(r[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let r of this.set)if(r.length===1&&lu(r[0])){this.set=[r];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let s=0;s<t.length;s++)s>0&&(this.formatted+=" "),this.formatted+=t[s].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let s=((this.options.includePrerelease&&ou)|(this.options.loose&&au))+":"+e,r=Ho.get(s);if(r)return r;let n=this.options.loose,o=n?W[x.HYPHENRANGELOOSE]:W[x.HYPHENRANGE];e=e.replace(o,yu(this.options.includePrerelease)),b("hyphen replace",e),e=e.replace(W[x.COMPARATORTRIM],su),b("comparator trim",e),e=e.replace(W[x.TILDETRIM],ru),b("tilde trim",e),e=e.replace(W[x.CARETTRIM],nu),b("caret trim",e);let a=e.split(" ").map(u=>hu(u,this.options)).join(" ").split(/\s+/).map(u=>Eu(u,this.options));n&&(a=a.filter(u=>(b("loose invalid filter",u,this.options),!!u.match(W[x.COMPARATORLOOSE])))),b("range list",a);let l=new Map,h=a.map(u=>new Qs(u,this.options));for(let u of h){if(Vo(u))return[u];l.set(u.value,u)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return Ho.set(s,c),c}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some(s=>Xo(s,t)&&e.set.some(r=>Xo(r,t)&&s.every(n=>r.every(o=>n.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new iu(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(wu(this.set[t],e,this.options))return!0;return!1}};Yo.exports=Ks;var eu=Wo(),Ho=new eu,tu=pi(),Qs=$t(),b=qt(),iu=M(),{safeRe:W,t:x,comparatorTrimReplace:su,tildeTrimReplace:ru,caretTrimReplace:nu}=lt(),{FLAG_INCLUDE_PRERELEASE:ou,FLAG_LOOSE:au}=kt(),Vo=i=>i.value==="<0.0.0-0",lu=i=>i.value==="",Xo=(i,e)=>{let t=!0,s=i.slice(),r=s.pop();for(;t&&s.length;)t=s.every(n=>r.intersects(n,e)),r=s.pop();return t},hu=(i,e)=>(b("comp",i,e),i=fu(i,e),b("caret",i),i=cu(i,e),b("tildes",i),i=mu(i,e),b("xrange",i),i=_u(i,e),b("stars",i),i),$=i=>!i||i.toLowerCase()==="x"||i==="*",cu=(i,e)=>i.trim().split(/\s+/).map(t=>uu(t,e)).join(" "),uu=(i,e)=>{let t=e.loose?W[x.TILDELOOSE]:W[x.TILDE];return i.replace(t,(s,r,n,o,a)=>{b("tilde",i,s,r,n,o,a);let l;return $(r)?l="":$(n)?l=`>=${r}.0.0 <${+r+1}.0.0-0`:$(o)?l=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(b("replaceTilde pr",a),l=`>=${r}.${n}.${o}-${a} <${r}.${+n+1}.0-0`):l=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,b("tilde return",l),l})},fu=(i,e)=>i.trim().split(/\s+/).map(t=>du(t,e)).join(" "),du=(i,e)=>{b("caret",i,e);let t=e.loose?W[x.CARETLOOSE]:W[x.CARET],s=e.includePrerelease?"-0":"";return i.replace(t,(r,n,o,a,l)=>{b("caret",i,r,n,o,a,l);let h;return $(n)?h="":$(o)?h=`>=${n}.0.0${s} <${+n+1}.0.0-0`:$(a)?n==="0"?h=`>=${n}.${o}.0${s} <${n}.${+o+1}.0-0`:h=`>=${n}.${o}.0${s} <${+n+1}.0.0-0`:l?(b("replaceCaret pr",l),n==="0"?o==="0"?h=`>=${n}.${o}.${a}-${l} <${n}.${o}.${+a+1}-0`:h=`>=${n}.${o}.${a}-${l} <${n}.${+o+1}.0-0`:h=`>=${n}.${o}.${a}-${l} <${+n+1}.0.0-0`):(b("no pr"),n==="0"?o==="0"?h=`>=${n}.${o}.${a}${s} <${n}.${o}.${+a+1}-0`:h=`>=${n}.${o}.${a}${s} <${n}.${+o+1}.0-0`:h=`>=${n}.${o}.${a} <${+n+1}.0.0-0`),b("caret return",h),h})},mu=(i,e)=>(b("replaceXRanges",i,e),i.split(/\s+/).map(t=>pu(t,e)).join(" ")),pu=(i,e)=>{i=i.trim();let t=e.loose?W[x.XRANGELOOSE]:W[x.XRANGE];return i.replace(t,(s,r,n,o,a,l)=>{b("xRange",i,s,r,n,o,a,l);let h=$(n),c=h||$(o),u=c||$(a),_=u;return r==="="&&_&&(r=""),l=e.includePrerelease?"-0":"",h?r===">"||r==="<"?s="<0.0.0-0":s="*":r&&_?(c&&(o=0),a=0,r===">"?(r=">=",c?(n=+n+1,o=0,a=0):(o=+o+1,a=0)):r==="<="&&(r="<",c?n=+n+1:o=+o+1),r==="<"&&(l="-0"),s=`${r+n}.${o}.${a}${l}`):c?s=`>=${n}.0.0${l} <${+n+1}.0.0-0`:u&&(s=`>=${n}.${o}.0${l} <${n}.${+o+1}.0-0`),b("xRange return",s),s})},_u=(i,e)=>(b("replaceStars",i,e),i.trim().replace(W[x.STAR],"")),Eu=(i,e)=>(b("replaceGTE0",i,e),i.trim().replace(W[e.includePrerelease?x.GTE0PRE:x.GTE0],"")),yu=i=>(e,t,s,r,n,o,a,l,h,c,u,_)=>($(s)?t="":$(r)?t=`>=${s}.0.0${i?"-0":""}`:$(n)?t=`>=${s}.${r}.0${i?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${i?"-0":""}`,$(h)?l="":$(c)?l=`<${+h+1}.0.0-0`:$(u)?l=`<${h}.${+c+1}.0-0`:_?l=`<=${h}.${c}.${u}-${_}`:i?l=`<${h}.${c}.${+u+1}-0`:l=`<=${l}`,`${t} ${l}`.trim()),wu=(i,e,t)=>{for(let s=0;s<i.length;s++)if(!i[s].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let s=0;s<i.length;s++)if(b(i[s].semver),i[s].semver!==Qs.ANY&&i[s].semver.prerelease.length>0){let r=i[s].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}});var $t=f((k_,ta)=>{var Bt=Symbol("SemVer ANY"),tr=class i{static get ANY(){return Bt}constructor(e,t){if(t=Zo(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),er("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Bt?this.value="":this.value=this.operator+this.semver.version,er("comp",this)}parse(e){let t=this.options.loose?Ko[Qo.COMPARATORLOOSE]:Ko[Qo.COMPARATOR],s=e.match(t);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new Jo(s[2],this.options.loose):this.semver=Bt}toString(){return this.value}test(e){if(er("Comparator.test",e,this.options.loose),this.semver===Bt||e===Bt)return!0;if(typeof e=="string")try{e=new Jo(e,this.options)}catch{return!1}return Js(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new ea(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new ea(this.value,t).test(e.semver):(t=Zo(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Js(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Js(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};ta.exports=tr;var Zo=pi(),{safeRe:Ko,t:Qo}=lt(),Js=Ys(),er=qt(),Jo=M(),ea=Q()});var jt=f((q_,ia)=>{var Su=Q(),Ru=(i,e,t)=>{try{e=new Su(e,t)}catch{return!1}return e.test(i)};ia.exports=Ru});var ra=f((x_,sa)=>{var gu=Q(),Ou=(i,e)=>new gu(i,e).set.map(t=>t.map(s=>s.value).join(" ").trim().split(" "));sa.exports=Ou});var oa=f(($_,na)=>{var bu=M(),vu=Q(),Nu=(i,e,t)=>{let s=null,r=null,n=null;try{n=new vu(e,t)}catch{return null}return i.forEach(o=>{n.test(o)&&(!s||r.compare(o)===-1)&&(s=o,r=new bu(s,t))}),s};na.exports=Nu});var la=f((B_,aa)=>{var Tu=M(),Iu=Q(),Au=(i,e,t)=>{let s=null,r=null,n=null;try{n=new Iu(e,t)}catch{return null}return i.forEach(o=>{n.test(o)&&(!s||r.compare(o)===1)&&(s=o,r=new Tu(s,t))}),s};aa.exports=Au});var ua=f((j_,ca)=>{var ir=M(),Lu=Q(),ha=xt(),Pu=(i,e)=>{i=new Lu(i,e);let t=new ir("0.0.0");if(i.test(t)||(t=new ir("0.0.0-0"),i.test(t)))return t;t=null;for(let s=0;s<i.set.length;++s){let r=i.set[s],n=null;r.forEach(o=>{let a=new ir(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!n||ha(a,n))&&(n=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),n&&(!t||ha(t,n))&&(t=n)}return t&&i.test(t)?t:null};ca.exports=Pu});var da=f((U_,fa)=>{var Du=Q(),Mu=(i,e)=>{try{return new Du(i,e).range||"*"}catch{return null}};fa.exports=Mu});var bi=f((z_,Ea)=>{var Cu=M(),_a=$t(),{ANY:Fu}=_a,ku=Q(),qu=jt(),ma=xt(),pa=wi(),xu=Ri(),$u=Si(),Bu=(i,e,t,s)=>{i=new Cu(i,s),e=new ku(e,s);let r,n,o,a,l;switch(t){case">":r=ma,n=xu,o=pa,a=">",l=">=";break;case"<":r=pa,n=$u,o=ma,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(qu(i,e,s))return!1;for(let h=0;h<e.set.length;++h){let c=e.set[h],u=null,_=null;if(c.forEach(p=>{p.semver===Fu&&(p=new _a(">=0.0.0")),u=u||p,_=_||p,r(p.semver,u.semver,s)?u=p:o(p.semver,_.semver,s)&&(_=p)}),u.operator===a||u.operator===l||(!_.operator||_.operator===a)&&n(i,_.semver))return!1;if(_.operator===l&&o(i,_.semver))return!1}return!0};Ea.exports=Bu});var wa=f((G_,ya)=>{var ju=bi(),Uu=(i,e,t)=>ju(i,e,">",t);ya.exports=Uu});var Ra=f((W_,Sa)=>{var zu=bi(),Gu=(i,e,t)=>zu(i,e,"<",t);Sa.exports=Gu});var ba=f((H_,Oa)=>{var ga=Q(),Wu=(i,e,t)=>(i=new ga(i,t),e=new ga(e,t),i.intersects(e,t));Oa.exports=Wu});var Na=f((V_,va)=>{var Hu=jt(),Vu=K();va.exports=(i,e,t)=>{let s=[],r=null,n=null,o=i.sort((c,u)=>Vu(c,u,t));for(let c of o)Hu(c,e,t)?(n=c,r||(r=c)):(n&&s.push([r,n]),n=null,r=null);r&&s.push([r,null]);let a=[];for(let[c,u]of s)c===u?a.push(c):!u&&c===o[0]?a.push("*"):u?c===o[0]?a.push(`<=${u}`):a.push(`${c} - ${u}`):a.push(`>=${c}`);let l=a.join(" || "),h=typeof e.raw=="string"?e.raw:String(e);return l.length<h.length?l:e}});var Da=f((X_,Pa)=>{var Ta=Q(),rr=$t(),{ANY:sr}=rr,Ut=jt(),nr=K(),Xu=(i,e,t={})=>{if(i===e)return!0;i=new Ta(i,t),e=new Ta(e,t);let s=!1;e:for(let r of i.set){for(let n of e.set){let o=Zu(r,n,t);if(s=s||o!==null,o)continue e}if(s)return!1}return!0},Yu=[new rr(">=0.0.0-0")],Ia=[new rr(">=0.0.0")],Zu=(i,e,t)=>{if(i===e)return!0;if(i.length===1&&i[0].semver===sr){if(e.length===1&&e[0].semver===sr)return!0;t.includePrerelease?i=Yu:i=Ia}if(e.length===1&&e[0].semver===sr){if(t.includePrerelease)return!0;e=Ia}let s=new Set,r,n;for(let p of i)p.operator===">"||p.operator===">="?r=Aa(r,p,t):p.operator==="<"||p.operator==="<="?n=La(n,p,t):s.add(p.semver);if(s.size>1)return null;let o;if(r&&n){if(o=nr(r.semver,n.semver,t),o>0)return null;if(o===0&&(r.operator!==">="||n.operator!=="<="))return null}for(let p of s){if(r&&!Ut(p,String(r),t)||n&&!Ut(p,String(n),t))return null;for(let z of e)if(!Ut(p,String(z),t))return!1;return!0}let a,l,h,c,u=n&&!t.includePrerelease&&n.semver.prerelease.length?n.semver:!1,_=r&&!t.includePrerelease&&r.semver.prerelease.length?r.semver:!1;u&&u.prerelease.length===1&&n.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(let p of e){if(c=c||p.operator===">"||p.operator===">=",h=h||p.operator==="<"||p.operator==="<=",r){if(_&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===_.major&&p.semver.minor===_.minor&&p.semver.patch===_.patch&&(_=!1),p.operator===">"||p.operator===">="){if(a=Aa(r,p,t),a===p&&a!==r)return!1}else if(r.operator===">="&&!Ut(r.semver,String(p),t))return!1}if(n){if(u&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===u.major&&p.semver.minor===u.minor&&p.semver.patch===u.patch&&(u=!1),p.operator==="<"||p.operator==="<="){if(l=La(n,p,t),l===p&&l!==n)return!1}else if(n.operator==="<="&&!Ut(n.semver,String(p),t))return!1}if(!p.operator&&(n||r)&&o!==0)return!1}return!(r&&h&&!n&&o!==0||n&&c&&!r&&o!==0||_||u)},Aa=(i,e,t)=>{if(!i)return e;let s=nr(i.semver,e.semver,t);return s>0?i:s<0||e.operator===">"&&i.operator===">="?e:i},La=(i,e,t)=>{if(!i)return e;let s=nr(i.semver,e.semver,t);return s<0?i:s>0||e.operator==="<"&&i.operator==="<="?e:i};Pa.exports=Xu});var ka=f((Y_,Fa)=>{var or=lt(),Ma=kt(),Ku=M(),Ca=Ws(),Qu=Ve(),Ju=no(),ef=ao(),tf=co(),sf=mo(),rf=_o(),nf=yo(),of=So(),af=go(),lf=K(),hf=No(),cf=Io(),uf=yi(),ff=Do(),df=Co(),mf=xt(),pf=wi(),_f=Vs(),Ef=Xs(),yf=Si(),wf=Ri(),Sf=Ys(),Rf=zo(),gf=$t(),Of=Q(),bf=jt(),vf=ra(),Nf=oa(),Tf=la(),If=ua(),Af=da(),Lf=bi(),Pf=wa(),Df=Ra(),Mf=ba(),Cf=Na(),Ff=Da();Fa.exports={parse:Qu,valid:Ju,clean:ef,inc:tf,diff:sf,major:rf,minor:nf,patch:of,prerelease:af,compare:lf,rcompare:hf,compareLoose:cf,compareBuild:uf,sort:ff,rsort:df,gt:mf,lt:pf,eq:_f,neq:Ef,gte:yf,lte:wf,cmp:Sf,coerce:Rf,Comparator:gf,Range:Of,satisfies:bf,toComparators:vf,maxSatisfying:Nf,minSatisfying:Tf,minVersion:If,validRange:Af,outside:Lf,gtr:Pf,ltr:Df,intersects:Mf,simplifyRange:Cf,subset:Ff,SemVer:Ku,re:or.re,src:or.src,tokens:or.t,SEMVER_SPEC_VERSION:Ma.SEMVER_SPEC_VERSION,RELEASE_TYPES:Ma.RELEASE_TYPES,compareIdentifiers:Ca.compareIdentifiers,rcompareIdentifiers:Ca.rcompareIdentifiers}});var ft=f(j=>{"use strict";var kf=j&&j.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(j,"__esModule",{value:!0});j.Minipass=j.isWritable=j.isReadable=j.isStream=void 0;var qa=typeof process=="object"&&process?process:{stdout:null,stderr:null},dr=require("node:events"),ja=kf(require("node:stream")),qf=require("node:string_decoder"),xf=i=>!!i&&typeof i=="object"&&(i instanceof Pi||i instanceof ja.default||(0,j.isReadable)(i)||(0,j.isWritable)(i));j.isStream=xf;var $f=i=>!!i&&typeof i=="object"&&i instanceof dr.EventEmitter&&typeof i.pipe=="function"&&i.pipe!==ja.default.Writable.prototype.pipe;j.isReadable=$f;var Bf=i=>!!i&&typeof i=="object"&&i instanceof dr.EventEmitter&&typeof i.write=="function"&&typeof i.end=="function";j.isWritable=Bf;var Oe=Symbol("EOF"),be=Symbol("maybeEmitEnd"),Le=Symbol("emittedEnd"),vi=Symbol("emittingEnd"),zt=Symbol("emittedError"),Ni=Symbol("closed"),xa=Symbol("read"),Ti=Symbol("flush"),$a=Symbol("flushChunk"),oe=Symbol("encoding"),ct=Symbol("decoder"),L=Symbol("flowing"),Gt=Symbol("paused"),ut=Symbol("resume"),P=Symbol("buffer"),B=Symbol("pipes"),D=Symbol("bufferLength"),ar=Symbol("bufferPush"),Ii=Symbol("bufferShift"),C=Symbol("objectMode"),v=Symbol("destroyed"),lr=Symbol("error"),hr=Symbol("emitData"),Ba=Symbol("emitEnd"),cr=Symbol("emitEnd2"),de=Symbol("async"),ur=Symbol("abort"),Ai=Symbol("aborted"),Wt=Symbol("signal"),Xe=Symbol("dataListeners"),X=Symbol("discarded"),Ht=i=>Promise.resolve().then(i),jf=i=>i(),Uf=i=>i==="end"||i==="finish"||i==="prefinish",zf=i=>i instanceof ArrayBuffer||!!i&&typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,Gf=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),Li=class{src;dest;opts;ondrain;constructor(e,t,s){this.src=e,this.dest=t,this.opts=s,this.ondrain=()=>e[ut](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},fr=class extends Li{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,s){super(e,t,s),this.proxyErrors=r=>t.emit("error",r),e.on("error",this.proxyErrors)}},Wf=i=>!!i.objectMode,Hf=i=>!i.objectMode&&!!i.encoding&&i.encoding!=="buffer",Pi=class extends dr.EventEmitter{[L]=!1;[Gt]=!1;[B]=[];[P]=[];[C];[oe];[de];[ct];[Oe]=!1;[Le]=!1;[vi]=!1;[Ni]=!1;[zt]=null;[D]=0;[v]=!1;[Wt];[Ai]=!1;[Xe]=0;[X]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Wf(t)?(this[C]=!0,this[oe]=null):Hf(t)?(this[oe]=t.encoding,this[C]=!1):(this[C]=!1,this[oe]=null),this[de]=!!t.async,this[ct]=this[oe]?new qf.StringDecoder(this[oe]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[P]}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[B]});let{signal:s}=t;s&&(this[Wt]=s,s.aborted?this[ur]():s.addEventListener("abort",()=>this[ur]()))}get bufferLength(){return this[D]}get encoding(){return this[oe]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[C]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[de]}set async(e){this[de]=this[de]||!!e}[ur](){this[Ai]=!0,this.emit("abort",this[Wt]?.reason),this.destroy(this[Wt]?.reason)}get aborted(){return this[Ai]}set aborted(e){}write(e,t,s){if(this[Ai])return!1;if(this[Oe])throw new Error("write after end");if(this[v])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(s=t,t="utf8"),t||(t="utf8");let r=this[de]?Ht:jf;if(!this[C]&&!Buffer.isBuffer(e)){if(Gf(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(zf(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[C]?(this[L]&&this[D]!==0&&this[Ti](!0),this[L]?this.emit("data",e):this[ar](e),this[D]!==0&&this.emit("readable"),s&&r(s),this[L]):e.length?(typeof e=="string"&&!(t===this[oe]&&!this[ct]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[oe]&&(e=this[ct].write(e)),this[L]&&this[D]!==0&&this[Ti](!0),this[L]?this.emit("data",e):this[ar](e),this[D]!==0&&this.emit("readable"),s&&r(s),this[L]):(this[D]!==0&&this.emit("readable"),s&&r(s),this[L])}read(e){if(this[v])return null;if(this[X]=!1,this[D]===0||e===0||e&&e>this[D])return this[be](),null;this[C]&&(e=null),this[P].length>1&&!this[C]&&(this[P]=[this[oe]?this[P].join(""):Buffer.concat(this[P],this[D])]);let t=this[xa](e||null,this[P][0]);return this[be](),t}[xa](e,t){if(this[C])this[Ii]();else{let s=t;e===s.length||e===null?this[Ii]():typeof s=="string"?(this[P][0]=s.slice(e),t=s.slice(0,e),this[D]-=e):(this[P][0]=s.subarray(e),t=s.subarray(0,e),this[D]-=e)}return this.emit("data",t),!this[P].length&&!this[Oe]&&this.emit("drain"),t}end(e,t,s){return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t="utf8"),e!==void 0&&this.write(e,t),s&&this.once("end",s),this[Oe]=!0,this.writable=!1,(this[L]||!this[Gt])&&this[be](),this}[ut](){this[v]||(!this[Xe]&&!this[B].length&&(this[X]=!0),this[Gt]=!1,this[L]=!0,this.emit("resume"),this[P].length?this[Ti]():this[Oe]?this[be]():this.emit("drain"))}resume(){return this[ut]()}pause(){this[L]=!1,this[Gt]=!0,this[X]=!1}get destroyed(){return this[v]}get flowing(){return this[L]}get paused(){return this[Gt]}[ar](e){this[C]?this[D]+=1:this[D]+=e.length,this[P].push(e)}[Ii](){return this[C]?this[D]-=1:this[D]-=this[P][0].length,this[P].shift()}[Ti](e=!1){do;while(this[$a](this[Ii]())&&this[P].length);!e&&!this[P].length&&!this[Oe]&&this.emit("drain")}[$a](e){return this.emit("data",e),this[L]}pipe(e,t){if(this[v])return e;this[X]=!1;let s=this[Le];return t=t||{},e===qa.stdout||e===qa.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,s?t.end&&e.end():(this[B].push(t.proxyErrors?new fr(this,e,t):new Li(this,e,t)),this[de]?Ht(()=>this[ut]()):this[ut]()),e}unpipe(e){let t=this[B].find(s=>s.dest===e);t&&(this[B].length===1?(this[L]&&this[Xe]===0&&(this[L]=!1),this[B]=[]):this[B].splice(this[B].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let s=super.on(e,t);if(e==="data")this[X]=!1,this[Xe]++,!this[B].length&&!this[L]&&this[ut]();else if(e==="readable"&&this[D]!==0)super.emit("readable");else if(Uf(e)&&this[Le])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[zt]){let r=t;this[de]?Ht(()=>r.call(this,this[zt])):r.call(this,this[zt])}return s}removeListener(e,t){return this.off(e,t)}off(e,t){let s=super.off(e,t);return e==="data"&&(this[Xe]=this.listeners("data").length,this[Xe]===0&&!this[X]&&!this[B].length&&(this[L]=!1)),s}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Xe]=0,!this[X]&&!this[B].length&&(this[L]=!1)),t}get emittedEnd(){return this[Le]}[be](){!this[vi]&&!this[Le]&&!this[v]&&this[P].length===0&&this[Oe]&&(this[vi]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ni]&&this.emit("close"),this[vi]=!1)}emit(e,...t){let s=t[0];if(e!=="error"&&e!=="close"&&e!==v&&this[v])return!1;if(e==="data")return!this[C]&&!s?!1:this[de]?(Ht(()=>this[hr](s)),!0):this[hr](s);if(e==="end")return this[Ba]();if(e==="close"){if(this[Ni]=!0,!this[Le]&&!this[v])return!1;let n=super.emit("close");return this.removeAllListeners("close"),n}else if(e==="error"){this[zt]=s,super.emit(lr,s);let n=!this[Wt]||this.listeners("error").length?super.emit("error",s):!1;return this[be](),n}else if(e==="resume"){let n=super.emit("resume");return this[be](),n}else if(e==="finish"||e==="prefinish"){let n=super.emit(e);return this.removeAllListeners(e),n}let r=super.emit(e,...t);return this[be](),r}[hr](e){for(let s of this[B])s.dest.write(e)===!1&&this.pause();let t=this[X]?!1:super.emit("data",e);return this[be](),t}[Ba](){return this[Le]?!1:(this[Le]=!0,this.readable=!1,this[de]?(Ht(()=>this[cr]()),!0):this[cr]())}[cr](){if(this[ct]){let t=this[ct].end();if(t){for(let s of this[B])s.dest.write(t);this[X]||super.emit("data",t)}}for(let t of this[B])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[C]||(e.dataLength=0);let t=this.promise();return this.on("data",s=>{e.push(s),this[C]||(e.dataLength+=s.length)}),await t,e}async concat(){if(this[C])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[oe]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(v,()=>t(new Error("stream destroyed"))),this.on("error",s=>t(s)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[X]=!1;let e=!1,t=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return t();let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Oe])return t();let n,o,a=u=>{this.off("data",l),this.off("end",h),this.off(v,c),t(),o(u)},l=u=>{this.off("error",a),this.off("end",h),this.off(v,c),this.pause(),n({value:u,done:!!this[Oe]})},h=()=>{this.off("error",a),this.off("data",l),this.off(v,c),t(),n({done:!0,value:void 0})},c=()=>a(new Error("stream destroyed"));return new Promise((u,_)=>{o=_,n=u,this.once(v,c),this.once("error",a),this.once("end",h),this.once("data",l)})},throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[X]=!1;let e=!1,t=()=>(this.pause(),this.off(lr,t),this.off(v,t),this.off("end",t),e=!0,{done:!0,value:void 0}),s=()=>{if(e)return t();let r=this.read();return r===null?t():{done:!1,value:r}};return this.once("end",t),this.once(lr,t),this.once(v,t),{next:s,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[v])return e?this.emit("error",e):this.emit(v),this;this[v]=!0,this[X]=!0,this[P].length=0,this[D]=0;let t=this;return typeof t.close=="function"&&!this[Ni]&&t.close(),e?this.emit("error",e):this.emit(v),this}static get isStream(){return j.isStream}};j.Minipass=Pi});var Et=f(J=>{"use strict";var Ua=J&&J.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(J,"__esModule",{value:!0});J.WriteStreamSync=J.WriteStream=J.ReadStreamSync=J.ReadStream=void 0;var Vf=Ua(require("events")),H=Ua(require("fs")),Xf=ft(),Yf=H.default.writev,De=Symbol("_autoClose"),le=Symbol("_close"),Vt=Symbol("_ended"),R=Symbol("_fd"),mr=Symbol("_finished"),Ne=Symbol("_flags"),pr=Symbol("_flush"),wr=Symbol("_handleChunk"),Sr=Symbol("_makeBuf"),Yt=Symbol("_mode"),Di=Symbol("_needDrain"),pt=Symbol("_onerror"),_t=Symbol("_onopen"),_r=Symbol("_onread"),dt=Symbol("_onwrite"),Me=Symbol("_open"),ae=Symbol("_path"),Pe=Symbol("_pos"),me=Symbol("_queue"),mt=Symbol("_read"),Er=Symbol("_readSize"),ve=Symbol("_reading"),Xt=Symbol("_remain"),yr=Symbol("_size"),Mi=Symbol("_write"),Ye=Symbol("_writing"),Ci=Symbol("_defaultFlag"),Ze=Symbol("_errored"),Fi=class extends Xf.Minipass{[Ze]=!1;[R];[ae];[Er];[ve]=!1;[yr];[Xt];[De];constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Ze]=!1,this[R]=typeof t.fd=="number"?t.fd:void 0,this[ae]=e,this[Er]=t.readSize||16*1024*1024,this[ve]=!1,this[yr]=typeof t.size=="number"?t.size:1/0,this[Xt]=this[yr],this[De]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[R]=="number"?this[mt]():this[Me]()}get fd(){return this[R]}get path(){return this[ae]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Me](){H.default.open(this[ae],"r",(e,t)=>this[_t](e,t))}[_t](e,t){e?this[pt](e):(this[R]=t,this.emit("open",t),this[mt]())}[Sr](){return Buffer.allocUnsafe(Math.min(this[Er],this[Xt]))}[mt](){if(!this[ve]){this[ve]=!0;let e=this[Sr]();if(e.length===0)return process.nextTick(()=>this[_r](null,0,e));H.default.read(this[R],e,0,e.length,null,(t,s,r)=>this[_r](t,s,r))}}[_r](e,t,s){this[ve]=!1,e?this[pt](e):this[wr](t,s)&&this[mt]()}[le](){if(this[De]&&typeof this[R]=="number"){let e=this[R];this[R]=void 0,H.default.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[pt](e){this[ve]=!0,this[le](),this.emit("error",e)}[wr](e,t){let s=!1;return this[Xt]-=e,e>0&&(s=super.write(e<t.length?t.subarray(0,e):t)),(e===0||this[Xt]<=0)&&(s=!1,this[le](),super.end()),s}emit(e,...t){switch(e){case"prefinish":case"finish":return!1;case"drain":return typeof this[R]=="number"&&this[mt](),!1;case"error":return this[Ze]?!1:(this[Ze]=!0,super.emit(e,...t));default:return super.emit(e,...t)}}};J.ReadStream=Fi;var Rr=class extends Fi{[Me](){let e=!0;try{this[_t](null,H.default.openSync(this[ae],"r")),e=!1}finally{e&&this[le]()}}[mt](){let e=!0;try{if(!this[ve]){this[ve]=!0;do{let t=this[Sr](),s=t.length===0?0:H.default.readSync(this[R],t,0,t.length,null);if(!this[wr](s,t))break}while(!0);this[ve]=!1}e=!1}finally{e&&this[le]()}}[le](){if(this[De]&&typeof this[R]=="number"){let e=this[R];this[R]=void 0,H.default.closeSync(e),this.emit("close")}}};J.ReadStreamSync=Rr;var ki=class extends Vf.default{readable=!1;writable=!0;[Ze]=!1;[Ye]=!1;[Vt]=!1;[me]=[];[Di]=!1;[ae];[Yt];[De];[R];[Ci];[Ne];[mr]=!1;[Pe];constructor(e,t){t=t||{},super(t),this[ae]=e,this[R]=typeof t.fd=="number"?t.fd:void 0,this[Yt]=t.mode===void 0?438:t.mode,this[Pe]=typeof t.start=="number"?t.start:void 0,this[De]=typeof t.autoClose=="boolean"?t.autoClose:!0;let s=this[Pe]!==void 0?"r+":"w";this[Ci]=t.flags===void 0,this[Ne]=t.flags===void 0?s:t.flags,this[R]===void 0&&this[Me]()}emit(e,...t){if(e==="error"){if(this[Ze])return!1;this[Ze]=!0}return super.emit(e,...t)}get fd(){return this[R]}get path(){return this[ae]}[pt](e){this[le](),this[Ye]=!0,this.emit("error",e)}[Me](){H.default.open(this[ae],this[Ne],this[Yt],(e,t)=>this[_t](e,t))}[_t](e,t){this[Ci]&&this[Ne]==="r+"&&e&&e.code==="ENOENT"?(this[Ne]="w",this[Me]()):e?this[pt](e):(this[R]=t,this.emit("open",t),this[Ye]||this[pr]())}end(e,t){return e&&this.write(e,t),this[Vt]=!0,!this[Ye]&&!this[me].length&&typeof this[R]=="number"&&this[dt](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[Vt]?(this.emit("error",new Error("write() after end()")),!1):this[R]===void 0||this[Ye]||this[me].length?(this[me].push(e),this[Di]=!0,!1):(this[Ye]=!0,this[Mi](e),!0)}[Mi](e){H.default.write(this[R],e,0,e.length,this[Pe],(t,s)=>this[dt](t,s))}[dt](e,t){e?this[pt](e):(this[Pe]!==void 0&&typeof t=="number"&&(this[Pe]+=t),this[me].length?this[pr]():(this[Ye]=!1,this[Vt]&&!this[mr]?(this[mr]=!0,this[le](),this.emit("finish")):this[Di]&&(this[Di]=!1,this.emit("drain"))))}[pr](){if(this[me].length===0)this[Vt]&&this[dt](null,0);else if(this[me].length===1)this[Mi](this[me].pop());else{let e=this[me];this[me]=[],Yf(this[R],e,this[Pe],(t,s)=>this[dt](t,s))}}[le](){if(this[De]&&typeof this[R]=="number"){let e=this[R];this[R]=void 0,H.default.close(e,t=>t?this.emit("error",t):this.emit("close"))}}};J.WriteStream=ki;var gr=class extends ki{[Me](){let e;if(this[Ci]&&this[Ne]==="r+")try{e=H.default.openSync(this[ae],this[Ne],this[Yt])}catch(t){if(t?.code==="ENOENT")return this[Ne]="w",this[Me]();throw t}else e=H.default.openSync(this[ae],this[Ne],this[Yt]);this[_t](null,e)}[le](){if(this[De]&&typeof this[R]=="number"){let e=this[R];this[R]=void 0,H.default.closeSync(e),this.emit("close")}}[Mi](e){let t=!0;try{this[dt](null,H.default.writeSync(this[R],e,0,e.length,this[Pe])),t=!1}finally{if(t)try{this[le]()}catch{}}}};J.WriteStreamSync=gr});var qi=f(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.dealias=N.isNoFile=N.isFile=N.isAsync=N.isSync=N.isAsyncNoFile=N.isSyncNoFile=N.isAsyncFile=N.isSyncFile=void 0;var Zf=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"],["onentry","onReadEntry"]]),Kf=i=>!!i.sync&&!!i.file;N.isSyncFile=Kf;var Qf=i=>!i.sync&&!!i.file;N.isAsyncFile=Qf;var Jf=i=>!!i.sync&&!i.file;N.isSyncNoFile=Jf;var ed=i=>!i.sync&&!i.file;N.isAsyncNoFile=ed;var td=i=>!!i.sync;N.isSync=td;var id=i=>!i.sync;N.isAsync=id;var sd=i=>!!i.file;N.isFile=sd;var rd=i=>!i.file;N.isNoFile=rd;var nd=i=>{let e=Zf.get(i);return e||i},od=(i={})=>{if(!i)return{};let e={};for(let[t,s]of Object.entries(i)){let r=nd(t);e[r]=s}return e.chmod===void 0&&e.noChmod===!1&&(e.chmod=!0),delete e.noChmod,e};N.dealias=od});var yt=f(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});xi.makeCommand=void 0;var Zt=qi(),ad=(i,e,t,s,r)=>Object.assign((n=[],o,a)=>{Array.isArray(n)&&(o=n,n={}),typeof o=="function"&&(a=o,o=void 0),o?o=Array.from(o):o=[];let l=(0,Zt.dealias)(n);if(r?.(l,o),(0,Zt.isSyncFile)(l)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return i(l,o)}else if((0,Zt.isAsyncFile)(l)){let h=e(l,o),c=a||void 0;return c?h.then(()=>c(),c):h}else if((0,Zt.isSyncNoFile)(l)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return t(l,o)}else if((0,Zt.isAsyncNoFile)(l)){if(typeof a=="function")throw new TypeError("callback only supported with file option");return s(l,o)}else throw new Error("impossible options??")},{syncFile:i,asyncFile:e,syncNoFile:t,asyncNoFile:s,validate:r});xi.makeCommand=ad});var Or=f(wt=>{"use strict";var ld=wt&&wt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(wt,"__esModule",{value:!0});wt.constants=void 0;var hd=ld(require("zlib")),cd=hd.default.constants||{ZLIB_VERNUM:4736};wt.constants=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},cd))});var Fr=f(g=>{"use strict";var Ga=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(g,"__esModule",{value:!0});g.BrotliDecompress=g.BrotliCompress=g.Brotli=g.Unzip=g.InflateRaw=g.DeflateRaw=g.Gunzip=g.Gzip=g.Inflate=g.Deflate=g.Zlib=g.ZlibError=g.constants=void 0;var vr=Ga(require("assert")),Ce=require("buffer"),ud=ft(),fd=Ga(require("zlib")),Ke=Or(),dd=Or();Object.defineProperty(g,"constants",{enumerable:!0,get:function(){return dd.constants}});var za=Ce.Buffer.concat,Qe=Symbol("_superWrite"),Je=class extends Error{code;errno;constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}};g.ZlibError=Je;var br=Symbol("flushFlag"),$i=class extends ud.Minipass{#e=!1;#i=!1;#s;#n;#r;#t;#o;get sawError(){return this.#e}get handle(){return this.#t}get flushFlag(){return this.#s}constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this.#s=e.flush??0,this.#n=e.finishFlush??0,this.#r=e.fullFlushFlag??0;try{this.#t=new fd.default[t](e)}catch(s){throw new Je(s)}this.#o=s=>{this.#e||(this.#e=!0,this.close(),this.emit("error",s))},this.#t?.on("error",s=>this.#o(new Je(s))),this.once("end",()=>this.close)}close(){this.#t&&(this.#t.close(),this.#t=void 0,this.emit("close"))}reset(){if(!this.#e)return(0,vr.default)(this.#t,"zlib binding closed"),this.#t.reset?.()}flush(e){this.ended||(typeof e!="number"&&(e=this.#r),this.write(Object.assign(Ce.Buffer.alloc(0),{[br]:e})))}end(e,t,s){return typeof e=="function"&&(s=e,t=void 0,e=void 0),typeof t=="function"&&(s=t,t=void 0),e&&(t?this.write(e,t):this.write(e)),this.flush(this.#n),this.#i=!0,super.end(s)}get ended(){return this.#i}[Qe](e){return super.write(e)}write(e,t,s){if(typeof t=="function"&&(s=t,t="utf8"),typeof e=="string"&&(e=Ce.Buffer.from(e,t)),this.#e)return;(0,vr.default)(this.#t,"zlib binding closed");let r=this.#t._handle,n=r.close;r.close=()=>{};let o=this.#t.close;this.#t.close=()=>{},Ce.Buffer.concat=h=>h;let a;try{let h=typeof e[br]=="number"?e[br]:this.#s;a=this.#t._processChunk(e,h),Ce.Buffer.concat=za}catch(h){Ce.Buffer.concat=za,this.#o(new Je(h))}finally{this.#t&&(this.#t._handle=r,r.close=n,this.#t.close=o,this.#t.removeAllListeners("error"))}this.#t&&this.#t.on("error",h=>this.#o(new Je(h)));let l;if(a)if(Array.isArray(a)&&a.length>0){let h=a[0];l=this[Qe](Ce.Buffer.from(h));for(let c=1;c<a.length;c++)l=this[Qe](a[c])}else l=this[Qe](Ce.Buffer.from(a));return s&&s(),l}},pe=class extends $i{#e;#i;constructor(e,t){e=e||{},e.flush=e.flush||Ke.constants.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Ke.constants.Z_FINISH,e.fullFlushFlag=Ke.constants.Z_FULL_FLUSH,super(e,t),this.#e=e.level,this.#i=e.strategy}params(e,t){if(!this.sawError){if(!this.handle)throw new Error("cannot switch params when binding is closed");if(!this.handle.params)throw new Error("not supported in this implementation");if(this.#e!==e||this.#i!==t){this.flush(Ke.constants.Z_SYNC_FLUSH),(0,vr.default)(this.handle,"zlib binding closed");let s=this.handle.flush;this.handle.flush=(r,n)=>{typeof r=="function"&&(n=r,r=this.flushFlag),this.flush(r),n?.()};try{this.handle.params(e,t)}finally{this.handle.flush=s}this.handle&&(this.#e=e,this.#i=t)}}}};g.Zlib=pe;var Nr=class extends pe{constructor(e){super(e,"Deflate")}};g.Deflate=Nr;var Tr=class extends pe{constructor(e){super(e,"Inflate")}};g.Inflate=Tr;var Ir=class extends pe{#e;constructor(e){super(e,"Gzip"),this.#e=e&&!!e.portable}[Qe](e){return this.#e?(this.#e=!1,e[9]=255,super[Qe](e)):super[Qe](e)}};g.Gzip=Ir;var Ar=class extends pe{constructor(e){super(e,"Gunzip")}};g.Gunzip=Ar;var Lr=class extends pe{constructor(e){super(e,"DeflateRaw")}};g.DeflateRaw=Lr;var Pr=class extends pe{constructor(e){super(e,"InflateRaw")}};g.InflateRaw=Pr;var Dr=class extends pe{constructor(e){super(e,"Unzip")}};g.Unzip=Dr;var Kt=class extends $i{constructor(e,t){e=e||{},e.flush=e.flush||Ke.constants.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Ke.constants.BROTLI_OPERATION_FINISH,e.fullFlushFlag=Ke.constants.BROTLI_OPERATION_FLUSH,super(e,t)}};g.Brotli=Kt;var Mr=class extends Kt{constructor(e){super(e,"BrotliCompress")}};g.BrotliCompress=Mr;var Cr=class extends Kt{constructor(e){super(e,"BrotliDecompress")}};g.BrotliDecompress=Cr});var qr=f(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.Node=Rt.Yallist=void 0;var kr=class i{tail;head;length=0;static create(e=[]){return new i(e)}constructor(e=[]){for(let t of e)this.push(t)}*[Symbol.iterator](){for(let e=this.head;e;e=e.next)yield e.value}removeNode(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");let t=e.next,s=e.prev;return t&&(t.prev=s),s&&(s.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=s),this.length--,e.next=void 0,e.prev=void 0,e.list=void 0,t}unshiftNode(e){if(e===this.head)return;e.list&&e.list.removeNode(e);let t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}pushNode(e){if(e===this.tail)return;e.list&&e.list.removeNode(e);let t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}push(...e){for(let t=0,s=e.length;t<s;t++)pd(this,e[t]);return this.length}unshift(...e){for(var t=0,s=e.length;t<s;t++)_d(this,e[t]);return this.length}pop(){if(!this.tail)return;let e=this.tail.value,t=this.tail;return this.tail=this.tail.prev,this.tail?this.tail.next=void 0:this.head=void 0,t.list=void 0,this.length--,e}shift(){if(!this.head)return;let e=this.head.value,t=this.head;return this.head=this.head.next,this.head?this.head.prev=void 0:this.tail=void 0,t.list=void 0,this.length--,e}forEach(e,t){t=t||this;for(let s=this.head,r=0;s;r++)e.call(t,s.value,r,this),s=s.next}forEachReverse(e,t){t=t||this;for(let s=this.tail,r=this.length-1;s;r--)e.call(t,s.value,r,this),s=s.prev}get(e){let t=0,s=this.head;for(;s&&t<e;t++)s=s.next;if(t===e&&s)return s.value}getReverse(e){let t=0,s=this.tail;for(;s&&t<e;t++)s=s.prev;if(t===e&&s)return s.value}map(e,t){t=t||this;let s=new i;for(let r=this.head;r;)s.push(e.call(t,r.value,this)),r=r.next;return s}mapReverse(e,t){t=t||this;var s=new i;for(let r=this.tail;r;)s.push(e.call(t,r.value,this)),r=r.prev;return s}reduce(e,t){let s,r=this.head;if(arguments.length>1)s=t;else if(this.head)r=this.head.next,s=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;r;n++)s=e(s,r.value,n),r=r.next;return s}reduceReverse(e,t){let s,r=this.tail;if(arguments.length>1)s=t;else if(this.tail)r=this.tail.prev,s=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(let n=this.length-1;r;n--)s=e(s,r.value,n),r=r.prev;return s}toArray(){let e=new Array(this.length);for(let t=0,s=this.head;s;t++)e[t]=s.value,s=s.next;return e}toArrayReverse(){let e=new Array(this.length);for(let t=0,s=this.tail;s;t++)e[t]=s.value,s=s.prev;return e}slice(e=0,t=this.length){t<0&&(t+=this.length),e<0&&(e+=this.length);let s=new i;if(t<e||t<0)return s;e<0&&(e=0),t>this.length&&(t=this.length);let r=this.head,n=0;for(n=0;r&&n<e;n++)r=r.next;for(;r&&n<t;n++,r=r.next)s.push(r.value);return s}sliceReverse(e=0,t=this.length){t<0&&(t+=this.length),e<0&&(e+=this.length);let s=new i;if(t<e||t<0)return s;e<0&&(e=0),t>this.length&&(t=this.length);let r=this.length,n=this.tail;for(;n&&r>t;r--)n=n.prev;for(;n&&r>e;r--,n=n.prev)s.push(n.value);return s}splice(e,t=0,...s){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);let r=this.head;for(let o=0;r&&o<e;o++)r=r.next;let n=[];for(let o=0;r&&o<t;o++)n.push(r.value),r=this.removeNode(r);r?r!==this.tail&&(r=r.prev):r=this.tail;for(let o of s)r=md(this,r,o);return n}reverse(){let e=this.head,t=this.tail;for(let s=e;s;s=s.prev){let r=s.prev;s.prev=s.next,s.next=r}return this.head=t,this.tail=e,this}};Rt.Yallist=kr;function md(i,e,t){let s=e,r=e?e.next:i.head,n=new St(t,s,r,i);return n.next===void 0&&(i.tail=n),n.prev===void 0&&(i.head=n),i.length++,n}function pd(i,e){i.tail=new St(e,i.tail,void 0,i),i.head||(i.head=i.tail),i.length++}function _d(i,e){i.head=new St(e,void 0,i.head,i),i.tail||(i.tail=i.head),i.length++}var St=class{list;next;prev;value;constructor(e,t,s,r){this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=void 0,s?(s.prev=this,this.next=s):this.next=void 0}};Rt.Node=St});var Va=f(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.parse=gt.encode=void 0;var Ed=(i,e)=>{if(Number.isSafeInteger(i))i<0?wd(i,e):yd(i,e);else throw Error("cannot encode number outside of javascript safe integer range");return e};gt.encode=Ed;var yd=(i,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=i&255,i=Math.floor(i/256)},wd=(i,e)=>{e[0]=255;var t=!1;i=i*-1;for(var s=e.length;s>1;s--){var r=i&255;i=Math.floor(i/256),t?e[s-1]=Wa(r):r===0?e[s-1]=0:(t=!0,e[s-1]=Ha(r))}},Sd=i=>{let e=i[0],t=e===128?gd(i.subarray(1,i.length)):e===255?Rd(i):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t};gt.parse=Sd;var Rd=i=>{for(var e=i.length,t=0,s=!1,r=e-1;r>-1;r--){var n=Number(i[r]),o;s?o=Wa(n):n===0?o=n:(s=!0,o=Ha(n)),o!==0&&(t-=o*Math.pow(256,e-r-1))}return t},gd=i=>{for(var e=i.length,t=0,s=e-1;s>-1;s--){var r=Number(i[s]);r!==0&&(t+=r*Math.pow(256,e-s-1))}return t},Wa=i=>(255^i)&255,Ha=i=>(255^i)+1&255});var xr=f(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.code=Y.name=Y.isName=Y.isCode=void 0;var Od=i=>Y.name.has(i);Y.isCode=Od;var bd=i=>Y.code.has(i);Y.isName=bd;Y.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Y.code=new Map(Array.from(Y.name).map(i=>[i[1],i[0]]))});var bt=f(_e=>{"use strict";var vd=_e&&_e.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Nd=_e&&_e.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Xa=_e&&_e.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&vd(e,i,t);return Nd(e,i),e};Object.defineProperty(_e,"__esModule",{value:!0});_e.Header=void 0;var Ot=require("node:path"),Ya=Xa(Va()),Qt=Xa(xr()),jr=class{cksumValid=!1;needPax=!1;nullBlock=!1;block;path;mode;uid;gid;size;cksum;#e="Unsupported";linkpath;uname;gname;devmaj=0;devmin=0;atime;ctime;mtime;charset;comment;constructor(e,t=0,s,r){Buffer.isBuffer(e)?this.decode(e,t||0,s,r):e&&this.#i(e)}decode(e,t,s,r){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");this.path=et(e,t,100),this.mode=Fe(e,t+100,8),this.uid=Fe(e,t+108,8),this.gid=Fe(e,t+116,8),this.size=Fe(e,t+124,12),this.mtime=$r(e,t+136,12),this.cksum=Fe(e,t+148,12),r&&this.#i(r,!0),s&&this.#i(s);let n=et(e,t+156,1);if(Qt.isCode(n)&&(this.#e=n||"0"),this.#e==="0"&&this.path.slice(-1)==="/"&&(this.#e="5"),this.#e==="5"&&(this.size=0),this.linkpath=et(e,t+157,100),e.subarray(t+257,t+265).toString()==="ustar\x0000")if(this.uname=et(e,t+265,32),this.gname=et(e,t+297,32),this.devmaj=Fe(e,t+329,8)??0,this.devmin=Fe(e,t+337,8)??0,e[t+475]!==0){let a=et(e,t+345,155);this.path=a+"/"+this.path}else{let a=et(e,t+345,130);a&&(this.path=a+"/"+this.path),this.atime=$r(e,t+476,12),this.ctime=$r(e,t+488,12)}let o=8*32;for(let a=t;a<t+148;a++)o+=e[a];for(let a=t+156;a<t+512;a++)o+=e[a];this.cksumValid=o===this.cksum,this.cksum===void 0&&o===8*32&&(this.nullBlock=!0)}#i(e,t=!1){Object.assign(this,Object.fromEntries(Object.entries(e).filter(([s,r])=>!(r==null||s==="path"&&t||s==="linkpath"&&t||s==="global"))))}encode(e,t=0){if(e||(e=this.block=Buffer.alloc(512)),this.#e==="Unsupported"&&(this.#e="0"),!(e.length>=t+512))throw new Error("need 512 bytes for header");let s=this.ctime||this.atime?130:155,r=Td(this.path||"",s),n=r[0],o=r[1];this.needPax=!!r[2],this.needPax=tt(e,t,100,n)||this.needPax,this.needPax=ke(e,t+100,8,this.mode)||this.needPax,this.needPax=ke(e,t+108,8,this.uid)||this.needPax,this.needPax=ke(e,t+116,8,this.gid)||this.needPax,this.needPax=ke(e,t+124,12,this.size)||this.needPax,this.needPax=Br(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this.#e.charCodeAt(0),this.needPax=tt(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=tt(e,t+265,32,this.uname)||this.needPax,this.needPax=tt(e,t+297,32,this.gname)||this.needPax,this.needPax=ke(e,t+329,8,this.devmaj)||this.needPax,this.needPax=ke(e,t+337,8,this.devmin)||this.needPax,this.needPax=tt(e,t+345,s,o)||this.needPax,e[t+475]!==0?this.needPax=tt(e,t+345,155,o)||this.needPax:(this.needPax=tt(e,t+345,130,o)||this.needPax,this.needPax=Br(e,t+476,12,this.atime)||this.needPax,this.needPax=Br(e,t+488,12,this.ctime)||this.needPax);let a=8*32;for(let l=t;l<t+148;l++)a+=e[l];for(let l=t+156;l<t+512;l++)a+=e[l];return this.cksum=a,ke(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}get type(){return this.#e==="Unsupported"?this.#e:Qt.name.get(this.#e)}get typeKey(){return this.#e}set type(e){let t=String(Qt.code.get(e));if(Qt.isCode(t)||t==="Unsupported")this.#e=t;else if(Qt.isCode(e))this.#e=e;else throw new TypeError("invalid entry type: "+e)}};_e.Header=jr;var Td=(i,e)=>{let s=i,r="",n,o=Ot.posix.parse(i).root||".";if(Buffer.byteLength(s)<100)n=[s,r,!1];else{r=Ot.posix.dirname(s),s=Ot.posix.basename(s);do Buffer.byteLength(s)<=100&&Buffer.byteLength(r)<=e?n=[s,r,!1]:Buffer.byteLength(s)>100&&Buffer.byteLength(r)<=e?n=[s.slice(0,99),r,!0]:(s=Ot.posix.join(Ot.posix.basename(r),s),r=Ot.posix.dirname(r));while(r!==o&&n===void 0);n||(n=[i.slice(0,99),"",!0])}return n},et=(i,e,t)=>i.subarray(e,e+t).toString("utf8").replace(/\0.*/,""),$r=(i,e,t)=>Id(Fe(i,e,t)),Id=i=>i===void 0?void 0:new Date(i*1e3),Fe=(i,e,t)=>Number(i[e])&128?Ya.parse(i.subarray(e,e+t)):Ld(i,e,t),Ad=i=>isNaN(i)?void 0:i,Ld=(i,e,t)=>Ad(parseInt(i.subarray(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),Pd={12:8589934591,8:2097151},ke=(i,e,t,s)=>s===void 0?!1:s>Pd[t]||s<0?(Ya.encode(s,i.subarray(e,e+t)),!0):(Dd(i,e,t,s),!1),Dd=(i,e,t,s)=>i.write(Md(s,t),e,t,"ascii"),Md=(i,e)=>Cd(Math.floor(i).toString(8),e),Cd=(i,e)=>(i.length===e-1?i:new Array(e-i.length-1).join("0")+i+" ")+"\0",Br=(i,e,t,s)=>s===void 0?!1:ke(i,e,t,s.getTime()/1e3),Fd=new Array(156).join("\0"),tt=(i,e,t,s)=>s===void 0?!1:(i.write(s+Fd,e,t,"utf8"),s.length!==Buffer.byteLength(s)||s.length>t)});var ji=f(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.Pax=void 0;var kd=require("node:path"),qd=bt(),Ur=class i{atime;mtime;ctime;charset;comment;gid;uid;gname;uname;linkpath;dev;ino;nlink;path;size;mode;global;constructor(e,t=!1){this.atime=e.atime,this.charset=e.charset,this.comment=e.comment,this.ctime=e.ctime,this.dev=e.dev,this.gid=e.gid,this.global=t,this.gname=e.gname,this.ino=e.ino,this.linkpath=e.linkpath,this.mtime=e.mtime,this.nlink=e.nlink,this.path=e.path,this.size=e.size,this.uid=e.uid,this.uname=e.uname}encode(){let e=this.encodeBody();if(e==="")return Buffer.allocUnsafe(0);let t=Buffer.byteLength(e),s=512*Math.ceil(1+t/512),r=Buffer.allocUnsafe(s);for(let n=0;n<512;n++)r[n]=0;new qd.Header({path:("PaxHeader/"+(0,kd.basename)(this.path??"")).slice(0,99),mode:this.mode||420,uid:this.uid,gid:this.gid,size:t,mtime:this.mtime,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime,ctime:this.ctime}).encode(r),r.write(e,512,t,"utf8");for(let n=t+512;n<r.length;n++)r[n]=0;return r}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===void 0)return"";let t=this[e],s=t instanceof Date?t.getTime()/1e3:t,r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+s+`
`,n=Buffer.byteLength(r),o=Math.floor(Math.log(n)/Math.log(10))+1;return n+o>=Math.pow(10,o)&&(o+=1),o+n+r}static parse(e,t,s=!1){return new i(xd($d(e),t),s)}};Bi.Pax=Ur;var xd=(i,e)=>e?Object.assign({},e,i):i,$d=i=>i.replace(/\n$/,"").split(`
`).reduce(Bd,Object.create(null)),Bd=(i,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return i;e=e.slice((t+" ").length);let s=e.split("="),r=s.shift();if(!r)return i;let n=r.replace(/^SCHILY\.(dev|ino|nlink)/,"$1"),o=s.join("=");return i[n]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(n)?new Date(Number(o)*1e3):/^[0-9]+$/.test(o)?+o:o,i}});var vt=f(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.normalizeWindowsPath=void 0;var jd=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;Ui.normalizeWindowsPath=jd!=="win32"?i=>i:i=>i&&i.replace(/\\/g,"/")});var Wi=f(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.ReadEntry=void 0;var Ud=ft(),zi=vt(),zr=class extends Ud.Minipass{extended;globalExtended;header;startBlockSize;blockRemain;remain;type;meta=!1;ignore=!1;path;mode;uid;gid;uname;gname;size=0;mtime;atime;ctime;linkpath;dev;ino;nlink;invalid=!1;absolute;unsupported=!1;constructor(e,t,s){switch(super({}),this.pause(),this.extended=t,this.globalExtended=s,this.header=e,this.remain=e.size??0,this.startBlockSize=512*Math.ceil(this.remain/512),this.blockRemain=this.startBlockSize,this.type=e.type,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}if(!e.path)throw new Error("no path provided for tar.ReadEntry");this.path=(0,zi.normalizeWindowsPath)(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=this.remain,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=e.linkpath?(0,zi.normalizeWindowsPath)(e.linkpath):void 0,this.uname=e.uname,this.gname=e.gname,t&&this.#e(t),s&&this.#e(s,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let s=this.remain,r=this.blockRemain;return this.remain=Math.max(0,s-t),this.blockRemain=Math.max(0,r-t),this.ignore?!0:s>=t?super.write(e):super.write(e.subarray(0,s))}#e(e,t=!1){e.path&&(e.path=(0,zi.normalizeWindowsPath)(e.path)),e.linkpath&&(e.linkpath=(0,zi.normalizeWindowsPath)(e.linkpath)),Object.assign(this,Object.fromEntries(Object.entries(e).filter(([s,r])=>!(r==null||s==="path"&&t))))}};Gi.ReadEntry=zr});var Vi=f(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.warnMethod=void 0;var zd=(i,e,t,s={})=>{i.file&&(s.file=i.file),i.cwd&&(s.cwd=i.cwd),s.code=t instanceof Error&&t.code||e,s.tarCode=e,!i.strict&&s.recoverable!==!1?(t instanceof Error&&(s=Object.assign(t,s),t=t.message),i.emit("warn",e,t,s)):t instanceof Error?i.emit("error",Object.assign(t,s)):i.emit("error",Object.assign(new Error(`${e}: ${t}`),s))};Hi.warnMethod=zd});var ts=f(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.Parser=void 0;var Gd=require("events"),Za=Fr(),Wd=qr(),Ka=bt(),Qa=ji(),Hd=Wi(),Vd=Vi(),Xd=1024*1024,Gr=Buffer.from([31,139]),ee=Symbol("state"),it=Symbol("writeEntry"),Te=Symbol("readEntry"),Wr=Symbol("nextEntry"),Ja=Symbol("processEntry"),Ee=Symbol("extendedHeader"),Jt=Symbol("globalExtendedHeader"),qe=Symbol("meta"),el=Symbol("emitMeta"),O=Symbol("buffer"),Ie=Symbol("queue"),xe=Symbol("ended"),Hr=Symbol("emittedEnd"),st=Symbol("emit"),T=Symbol("unzip"),Xi=Symbol("consumeChunk"),Yi=Symbol("consumeChunkSub"),Vr=Symbol("consumeBody"),tl=Symbol("consumeMeta"),il=Symbol("consumeHeader"),ei=Symbol("consuming"),Xr=Symbol("bufferConcat"),Zi=Symbol("maybeEnd"),Nt=Symbol("writing"),$e=Symbol("aborted"),Ki=Symbol("onDone"),rt=Symbol("sawValidEntry"),Qi=Symbol("sawNullBlock"),Ji=Symbol("sawEOF"),sl=Symbol("closeStream"),Yd=()=>!0,Yr=class extends Gd.EventEmitter{file;strict;maxMetaEntrySize;filter;brotli;writable=!0;readable=!1;[Ie]=new Wd.Yallist;[O];[Te];[it];[ee]="begin";[qe]="";[Ee];[Jt];[xe]=!1;[T];[$e]=!1;[rt];[Qi]=!1;[Ji]=!1;[Nt]=!1;[ei]=!1;[Hr]=!1;constructor(e={}){super(),this.file=e.file||"",this.on(Ki,()=>{(this[ee]==="begin"||this[rt]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Ki,e.ondone):this.on(Ki,()=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||Xd,this.filter=typeof e.filter=="function"?e.filter:Yd;let t=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:t?void 0:!1,this.on("end",()=>this[sl]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onReadEntry=="function"&&this.on("entry",e.onReadEntry)}warn(e,t,s={}){(0,Vd.warnMethod)(this,e,t,s)}[il](e,t){this[rt]===void 0&&(this[rt]=!1);let s;try{s=new Ka.Header(e,t,this[Ee],this[Jt])}catch(r){return this.warn("TAR_ENTRY_INVALID",r)}if(s.nullBlock)this[Qi]?(this[Ji]=!0,this[ee]==="begin"&&(this[ee]="header"),this[st]("eof")):(this[Qi]=!0,this[st]("nullBlock"));else if(this[Qi]=!1,!s.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:s});else if(!s.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:s});else{let r=s.type;if(/^(Symbolic)?Link$/.test(r)&&!s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:s});else if(!/^(Symbolic)?Link$/.test(r)&&!/^(Global)?ExtendedHeader$/.test(r)&&s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:s});else{let n=this[it]=new Hd.ReadEntry(s,this[Ee],this[Jt]);if(!this[rt])if(n.remain){let o=()=>{n.invalid||(this[rt]=!0)};n.on("end",o)}else this[rt]=!0;n.meta?n.size>this.maxMetaEntrySize?(n.ignore=!0,this[st]("ignoredEntry",n),this[ee]="ignore",n.resume()):n.size>0&&(this[qe]="",n.on("data",o=>this[qe]+=o),this[ee]="meta"):(this[Ee]=void 0,n.ignore=n.ignore||!this.filter(n.path,n),n.ignore?(this[st]("ignoredEntry",n),this[ee]=n.remain?"ignore":"header",n.resume()):(n.remain?this[ee]="body":(this[ee]="header",n.end()),this[Te]?this[Ie].push(n):(this[Ie].push(n),this[Wr]())))}}}[sl](){queueMicrotask(()=>this.emit("close"))}[Ja](e){let t=!0;if(!e)this[Te]=void 0,t=!1;else if(Array.isArray(e)){let[s,...r]=e;this.emit(s,...r)}else this[Te]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",()=>this[Wr]()),t=!1);return t}[Wr](){do;while(this[Ja](this[Ie].shift()));if(!this[Ie].length){let e=this[Te];!e||e.flowing||e.size===e.remain?this[Nt]||this.emit("drain"):e.once("drain",()=>this.emit("drain"))}}[Vr](e,t){let s=this[it];if(!s)throw new Error("attempt to consume body without entry??");let r=s.blockRemain??0,n=r>=e.length&&t===0?e:e.subarray(t,t+r);return s.write(n),s.blockRemain||(this[ee]="header",this[it]=void 0,s.end()),n.length}[tl](e,t){let s=this[it],r=this[Vr](e,t);return!this[it]&&s&&this[el](s),r}[st](e,t,s){!this[Ie].length&&!this[Te]?this.emit(e,t,s):this[Ie].push([e,t,s])}[el](e){switch(this[st]("meta",this[qe]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Ee]=Qa.Pax.parse(this[qe],this[Ee],!1);break;case"GlobalExtendedHeader":this[Jt]=Qa.Pax.parse(this[qe],this[Jt],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":{let t=this[Ee]??Object.create(null);this[Ee]=t,t.path=this[qe].replace(/\0.*/,"");break}case"NextFileHasLongLinkpath":{let t=this[Ee]||Object.create(null);this[Ee]=t,t.linkpath=this[qe].replace(/\0.*/,"");break}default:throw new Error("unknown meta: "+e.type)}}abort(e){this[$e]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e,t,s){if(typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8")),this[$e])return s?.(),!1;if((this[T]===void 0||this.brotli===void 0&&this[T]===!1)&&e){if(this[O]&&(e=Buffer.concat([this[O],e]),this[O]=void 0),e.length<Gr.length)return this[O]=e,s?.(),!0;for(let a=0;this[T]===void 0&&a<Gr.length;a++)e[a]!==Gr[a]&&(this[T]=!1);let o=this.brotli===void 0;if(this[T]===!1&&o)if(e.length<512)if(this[xe])this.brotli=!0;else return this[O]=e,s?.(),!0;else try{new Ka.Header(e.subarray(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[T]===void 0||this[T]===!1&&this.brotli){let a=this[xe];this[xe]=!1,this[T]=this[T]===void 0?new Za.Unzip({}):new Za.BrotliDecompress({}),this[T].on("data",h=>this[Xi](h)),this[T].on("error",h=>this.abort(h)),this[T].on("end",()=>{this[xe]=!0,this[Xi]()}),this[Nt]=!0;let l=!!this[T][a?"end":"write"](e);return this[Nt]=!1,s?.(),l}}this[Nt]=!0,this[T]?this[T].write(e):this[Xi](e),this[Nt]=!1;let n=this[Ie].length?!1:this[Te]?this[Te].flowing:!0;return!n&&!this[Ie].length&&this[Te]?.once("drain",()=>this.emit("drain")),s?.(),n}[Xr](e){e&&!this[$e]&&(this[O]=this[O]?Buffer.concat([this[O],e]):e)}[Zi](){if(this[xe]&&!this[Hr]&&!this[$e]&&!this[ei]){this[Hr]=!0;let e=this[it];if(e&&e.blockRemain){let t=this[O]?this[O].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[O]&&e.write(this[O]),e.end()}this[st](Ki)}}[Xi](e){if(this[ei]&&e)this[Xr](e);else if(!e&&!this[O])this[Zi]();else if(e){if(this[ei]=!0,this[O]){this[Xr](e);let t=this[O];this[O]=void 0,this[Yi](t)}else this[Yi](e);for(;this[O]&&this[O]?.length>=512&&!this[$e]&&!this[Ji];){let t=this[O];this[O]=void 0,this[Yi](t)}this[ei]=!1}(!this[O]||this[xe])&&this[Zi]()}[Yi](e){let t=0,s=e.length;for(;t+512<=s&&!this[$e]&&!this[Ji];)switch(this[ee]){case"begin":case"header":this[il](e,t),t+=512;break;case"ignore":case"body":t+=this[Vr](e,t);break;case"meta":t+=this[tl](e,t);break;default:throw new Error("invalid state: "+this[ee])}t<s&&(this[O]?this[O]=Buffer.concat([e.subarray(t),this[O]]):this[O]=e.subarray(t))}end(e,t,s){return typeof e=="function"&&(s=e,t=void 0,e=void 0),typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,t)),s&&this.once("finish",s),this[$e]||(this[T]?(e&&this[T].write(e),this[T].end()):(this[xe]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),e&&this.write(e),this[Zi]())),this}};es.Parser=Yr});var ti=f(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.stripTrailingSlashes=void 0;var Zd=i=>{let e=i.length-1,t=-1;for(;e>-1&&i.charAt(e)==="/";)t=e,e--;return t===-1?i:i.slice(0,t)};is.stripTrailingSlashes=Zd});var It=f(U=>{"use strict";var Kd=U&&U.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Qd=U&&U.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Jd=U&&U.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&Kd(e,i,t);return Qd(e,i),e},em=U&&U.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(U,"__esModule",{value:!0});U.list=U.filesFilter=void 0;var tm=Jd(Et()),Tt=em(require("node:fs")),rl=require("path"),im=yt(),ss=ts(),Zr=ti(),sm=i=>{let e=i.onReadEntry;i.onReadEntry=e?t=>{e(t),t.resume()}:t=>t.resume()},rm=(i,e)=>{let t=new Map(e.map(n=>[(0,Zr.stripTrailingSlashes)(n),!0])),s=i.filter,r=(n,o="")=>{let a=o||(0,rl.parse)(n).root||".",l;if(n===a)l=!1;else{let h=t.get(n);h!==void 0?l=h:l=r((0,rl.dirname)(n),a)}return t.set(n,l),l};i.filter=s?(n,o)=>s(n,o)&&r((0,Zr.stripTrailingSlashes)(n)):n=>r((0,Zr.stripTrailingSlashes)(n))};U.filesFilter=rm;var nm=i=>{let e=new ss.Parser(i),t=i.file,s;try{let r=Tt.default.statSync(t),n=i.maxReadSize||16*1024*1024;if(r.size<n)e.end(Tt.default.readFileSync(t));else{let o=0,a=Buffer.allocUnsafe(n);for(s=Tt.default.openSync(t,"r");o<r.size;){let l=Tt.default.readSync(s,a,0,n,o);o+=l,e.write(a.subarray(0,l))}e.end()}}finally{if(typeof s=="number")try{Tt.default.closeSync(s)}catch{}}},om=(i,e)=>{let t=new ss.Parser(i),s=i.maxReadSize||16*1024*1024,r=i.file;return new Promise((o,a)=>{t.on("error",a),t.on("end",o),Tt.default.stat(r,(l,h)=>{if(l)a(l);else{let c=new tm.ReadStream(r,{readSize:s,size:h.size});c.on("error",a),c.pipe(t)}})})};U.list=(0,im.makeCommand)(nm,om,i=>new ss.Parser(i),i=>new ss.Parser(i),(i,e)=>{e?.length&&(0,U.filesFilter)(i,e),i.noResume||sm(i)})});var nl=f(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.modeFix=void 0;var am=(i,e,t)=>(i&=4095,t&&(i=(i|384)&-19),e&&(i&256&&(i|=64),i&32&&(i|=8),i&4&&(i|=1)),i);rs.modeFix=am});var Kr=f(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.stripAbsolutePath=void 0;var lm=require("node:path"),{isAbsolute:hm,parse:ol}=lm.win32,cm=i=>{let e="",t=ol(i);for(;hm(i)||t.root;){let s=i.charAt(0)==="/"&&i.slice(0,4)!=="//?/"?"/":t.root;i=i.slice(s.length),e+=s,t=ol(i)}return[e,i]};ns.stripAbsolutePath=cm});var Jr=f(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.decode=At.encode=void 0;var os=["|","<",">","?",":"],Qr=os.map(i=>String.fromCharCode(61440+i.charCodeAt(0))),um=new Map(os.map((i,e)=>[i,Qr[e]])),fm=new Map(Qr.map((i,e)=>[i,os[e]])),dm=i=>os.reduce((e,t)=>e.split(t).join(um.get(t)),i);At.encode=dm;var mm=i=>Qr.reduce((e,t)=>e.split(t).join(fm.get(t)),i);At.decode=mm});var un=f(F=>{"use strict";var pm=F&&F.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),_m=F&&F.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Em=F&&F.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&pm(e,i,t);return _m(e,i),e},fl=F&&F.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(F,"__esModule",{value:!0});F.WriteEntryTar=F.WriteEntrySync=F.WriteEntry=void 0;var we=fl(require("fs")),dl=ft(),al=fl(require("path")),ml=bt(),pl=nl(),ye=vt(),_l=qi(),El=ji(),yl=Kr(),ym=ti(),wl=Vi(),wm=Em(Jr()),Sl=(i,e)=>e?(i=(0,ye.normalizeWindowsPath)(i).replace(/^\.(\/|$)/,""),(0,ym.stripTrailingSlashes)(e)+"/"+i):(0,ye.normalizeWindowsPath)(i),Sm=16*1024*1024,ll=Symbol("process"),hl=Symbol("file"),cl=Symbol("directory"),tn=Symbol("symlink"),ul=Symbol("hardlink"),ii=Symbol("header"),as=Symbol("read"),sn=Symbol("lstat"),ls=Symbol("onlstat"),rn=Symbol("onread"),nn=Symbol("onreadlink"),on=Symbol("openfile"),an=Symbol("onopenfile"),Be=Symbol("close"),hs=Symbol("mode"),ln=Symbol("awaitDrain"),en=Symbol("ondrain"),Se=Symbol("prefix"),cs=class extends dl.Minipass{path;portable;myuid=process.getuid&&process.getuid()||0;myuser=process.env.USER||"";maxReadSize;linkCache;statCache;preservePaths;cwd;strict;mtime;noPax;noMtime;prefix;fd;blockLen=0;blockRemain=0;buf;pos=0;remain=0;length=0;offset=0;win32;absolute;header;type;linkpath;stat;onWriteEntry;#e=!1;constructor(e,t={}){let s=(0,_l.dealias)(t);super(),this.path=(0,ye.normalizeWindowsPath)(e),this.portable=!!s.portable,this.maxReadSize=s.maxReadSize||Sm,this.linkCache=s.linkCache||new Map,this.statCache=s.statCache||new Map,this.preservePaths=!!s.preservePaths,this.cwd=(0,ye.normalizeWindowsPath)(s.cwd||process.cwd()),this.strict=!!s.strict,this.noPax=!!s.noPax,this.noMtime=!!s.noMtime,this.mtime=s.mtime,this.prefix=s.prefix?(0,ye.normalizeWindowsPath)(s.prefix):void 0,this.onWriteEntry=s.onWriteEntry,typeof s.onwarn=="function"&&this.on("warn",s.onwarn);let r=!1;if(!this.preservePaths){let[o,a]=(0,yl.stripAbsolutePath)(this.path);o&&typeof a=="string"&&(this.path=a,r=o)}this.win32=!!s.win32||process.platform==="win32",this.win32&&(this.path=wm.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=(0,ye.normalizeWindowsPath)(s.absolute||al.default.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path});let n=this.statCache.get(this.absolute);n?this[ls](n):this[sn]()}warn(e,t,s={}){return(0,wl.warnMethod)(this,e,t,s)}emit(e,...t){return e==="error"&&(this.#e=!0),super.emit(e,...t)}[sn](){we.default.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[ls](t)})}[ls](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Rm(e),this.emit("stat",e),this[ll]()}[ll](){switch(this.type){case"File":return this[hl]();case"Directory":return this[cl]();case"SymbolicLink":return this[tn]();default:return this.end()}}[hs](e){return(0,pl.modeFix)(e,this.type==="Directory",this.portable)}[Se](e){return Sl(e,this.prefix)}[ii](){if(!this.stat)throw new Error("cannot write header before stat");this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.onWriteEntry?.(this),this.header=new ml.Header({path:this[Se](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Se](this.linkpath):this.linkpath,mode:this[hs](this.stat.mode),uid:this.portable?void 0:this.stat.uid,gid:this.portable?void 0:this.stat.gid,size:this.stat.size,mtime:this.noMtime?void 0:this.mtime||this.stat.mtime,type:this.type==="Unsupported"?void 0:this.type,uname:this.portable?void 0:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?void 0:this.stat.atime,ctime:this.portable?void 0:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new El.Pax({atime:this.portable?void 0:this.header.atime,ctime:this.portable?void 0:this.header.ctime,gid:this.portable?void 0:this.header.gid,mtime:this.noMtime?void 0:this.mtime||this.header.mtime,path:this[Se](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Se](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?void 0:this.header.uid,uname:this.portable?void 0:this.header.uname,dev:this.portable?void 0:this.stat.dev,ino:this.portable?void 0:this.stat.ino,nlink:this.portable?void 0:this.stat.nlink}).encode());let e=this.header?.block;if(!e)throw new Error("failed to encode header");super.write(e)}[cl](){if(!this.stat)throw new Error("cannot create directory entry without stat");this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[ii](),this.end()}[tn](){we.default.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[nn](t)})}[nn](e){this.linkpath=(0,ye.normalizeWindowsPath)(e),this[ii](),this.end()}[ul](e){if(!this.stat)throw new Error("cannot create link entry without stat");this.type="Link",this.linkpath=(0,ye.normalizeWindowsPath)(al.default.relative(this.cwd,e)),this.stat.size=0,this[ii](),this.end()}[hl](){if(!this.stat)throw new Error("cannot create file entry without stat");if(this.stat.nlink>1){let e=`${this.stat.dev}:${this.stat.ino}`,t=this.linkCache.get(e);if(t?.indexOf(this.cwd)===0)return this[ul](t);this.linkCache.set(e,this.absolute)}if(this[ii](),this.stat.size===0)return this.end();this[on]()}[on](){we.default.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[an](t)})}[an](e){if(this.fd=e,this.#e)return this[Be]();if(!this.stat)throw new Error("should stat before calling onopenfile");this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[as]()}[as](){let{fd:e,buf:t,offset:s,length:r,pos:n}=this;if(e===void 0||t===void 0)throw new Error("cannot read file without first opening");we.default.read(e,t,s,r,n,(o,a)=>{if(o)return this[Be](()=>this.emit("error",o));this[rn](a)})}[Be](e=()=>{}){this.fd!==void 0&&we.default.close(this.fd,e)}[rn](e){if(e<=0&&this.remain>0){let r=Object.assign(new Error("encountered unexpected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[Be](()=>this.emit("error",r))}if(e>this.remain){let r=Object.assign(new Error("did not encounter expected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[Be](()=>this.emit("error",r))}if(!this.buf)throw new Error("should have created buffer prior to reading");if(e===this.remain)for(let r=e;r<this.length&&e<this.blockRemain;r++)this.buf[r+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.subarray(this.offset,this.offset+e);this.write(t)?this[en]():this[ln](()=>this[en]())}[ln](e){this.once("drain",e)}write(e,t,s){if(typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8")),this.blockRemain<e.length){let r=Object.assign(new Error("writing more data than expected"),{path:this.absolute});return this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e,null,s)}[en](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Be](e=>e?this.emit("error",e):this.end());if(!this.buf)throw new Error("buffer lost somehow in ONDRAIN");this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[as]()}};F.WriteEntry=cs;var hn=class extends cs{sync=!0;[sn](){this[ls](we.default.lstatSync(this.absolute))}[tn](){this[nn](we.default.readlinkSync(this.absolute))}[on](){this[an](we.default.openSync(this.absolute,"r"))}[as](){let e=!0;try{let{fd:t,buf:s,offset:r,length:n,pos:o}=this;if(t===void 0||s===void 0)throw new Error("fd and buf must be set in READ method");let a=we.default.readSync(t,s,r,n,o);this[rn](a),e=!1}finally{if(e)try{this[Be](()=>{})}catch{}}}[ln](e){e()}[Be](e=()=>{}){this.fd!==void 0&&we.default.closeSync(this.fd),e()}};F.WriteEntrySync=hn;var cn=class extends dl.Minipass{blockLen=0;blockRemain=0;buf=0;pos=0;remain=0;length=0;preservePaths;portable;strict;noPax;noMtime;readEntry;type;prefix;path;mode;uid;gid;uname;gname;header;mtime;atime;ctime;linkpath;size;onWriteEntry;warn(e,t,s={}){return(0,wl.warnMethod)(this,e,t,s)}constructor(e,t={}){let s=(0,_l.dealias)(t);super(),this.preservePaths=!!s.preservePaths,this.portable=!!s.portable,this.strict=!!s.strict,this.noPax=!!s.noPax,this.noMtime=!!s.noMtime,this.onWriteEntry=s.onWriteEntry,this.readEntry=e;let{type:r}=e;if(r==="Unsupported")throw new Error("writing entry that should be ignored");this.type=r,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=s.prefix,this.path=(0,ye.normalizeWindowsPath)(e.path),this.mode=e.mode!==void 0?this[hs](e.mode):void 0,this.uid=this.portable?void 0:e.uid,this.gid=this.portable?void 0:e.gid,this.uname=this.portable?void 0:e.uname,this.gname=this.portable?void 0:e.gname,this.size=e.size,this.mtime=this.noMtime?void 0:s.mtime||e.mtime,this.atime=this.portable?void 0:e.atime,this.ctime=this.portable?void 0:e.ctime,this.linkpath=e.linkpath!==void 0?(0,ye.normalizeWindowsPath)(e.linkpath):void 0,typeof s.onwarn=="function"&&this.on("warn",s.onwarn);let n=!1;if(!this.preservePaths){let[a,l]=(0,yl.stripAbsolutePath)(this.path);a&&typeof l=="string"&&(this.path=l,n=a)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.onWriteEntry?.(this),this.header=new ml.Header({path:this[Se](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Se](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?void 0:this.uid,gid:this.portable?void 0:this.gid,size:this.size,mtime:this.noMtime?void 0:this.mtime,type:this.type,uname:this.portable?void 0:this.uname,atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new El.Pax({atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime,gid:this.portable?void 0:this.gid,mtime:this.noMtime?void 0:this.mtime,path:this[Se](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Se](this.linkpath):this.linkpath,size:this.size,uid:this.portable?void 0:this.uid,uname:this.portable?void 0:this.uname,dev:this.portable?void 0:this.readEntry.dev,ino:this.portable?void 0:this.readEntry.ino,nlink:this.portable?void 0:this.readEntry.nlink}).encode());let o=this.header?.block;if(!o)throw new Error("failed to encode header");super.write(o),e.pipe(this)}[Se](e){return Sl(e,this.prefix)}[hs](e){return(0,pl.modeFix)(e,this.type==="Directory",this.portable)}write(e,t,s){typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8"));let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e,s)}end(e,t,s){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),typeof e=="function"&&(s=e,t=void 0,e=void 0),typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,t??"utf8")),s&&this.once("finish",s),e?super.end(e,s):super.end(s),this}};F.WriteEntryTar=cn;var Rm=i=>i.isFile()?"File":i.isDirectory()?"Directory":i.isSymbolicLink()?"SymbolicLink":"Unsupported"});var ys=f(k=>{"use strict";var gm=k&&k.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Om=k&&k.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),bm=k&&k.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&gm(e,i,t);return Om(e,i),e},Tl=k&&k.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(k,"__esModule",{value:!0});k.PackSync=k.Pack=k.PackJob=void 0;var _s=Tl(require("fs")),_n=un(),ni=class{path;absolute;entry;stat;readdir;pending=!1;ignore=!1;piped=!1;constructor(e,t){this.path=e||"./",this.absolute=t}};k.PackJob=ni;var vm=ft(),Rl=bm(Fr()),Nm=qr(),Tm=Wi(),Im=Vi(),gl=Buffer.alloc(1024),us=Symbol("onStat"),si=Symbol("ended"),he=Symbol("queue"),Lt=Symbol("current"),nt=Symbol("process"),ri=Symbol("processing"),Ol=Symbol("processJob"),ce=Symbol("jobs"),fn=Symbol("jobDone"),fs=Symbol("addFSEntry"),bl=Symbol("addTarEntry"),En=Symbol("stat"),yn=Symbol("readdir"),ds=Symbol("onreaddir"),ms=Symbol("pipe"),vl=Symbol("entry"),dn=Symbol("entryOpt"),ps=Symbol("writeEntryClass"),Il=Symbol("write"),mn=Symbol("ondrain"),Nl=Tl(require("path")),pn=vt(),Es=class extends vm.Minipass{opt;cwd;maxReadSize;preservePaths;strict;noPax;prefix;linkCache;statCache;file;portable;zip;readdirCache;noDirRecurse;follow;noMtime;mtime;filter;jobs;[ps];onWriteEntry;[he];[ce]=0;[ri]=!1;[si]=!1;constructor(e={}){if(super(),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=(0,pn.normalizeWindowsPath)(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this.onWriteEntry=e.onWriteEntry,this[ps]=_n.WriteEntry,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");if(e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new Rl.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new Rl.BrotliCompress(e.brotli)),!this.zip)throw new Error("impossible");let t=this.zip;t.on("data",s=>super.write(s)),t.on("end",()=>super.end()),t.on("drain",()=>this[mn]()),this.on("resume",()=>t.resume())}else this.on("drain",this[mn]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,e.mtime&&(this.mtime=e.mtime),this.filter=typeof e.filter=="function"?e.filter:()=>!0,this[he]=new Nm.Yallist,this[ce]=0,this.jobs=Number(e.jobs)||4,this[ri]=!1,this[si]=!1}[Il](e){return super.write(e)}add(e){return this.write(e),this}end(e,t,s){return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e&&this.add(e),this[si]=!0,this[nt](),s&&s(),this}write(e){if(this[si])throw new Error("write after end");return e instanceof Tm.ReadEntry?this[bl](e):this[fs](e),this.flowing}[bl](e){let t=(0,pn.normalizeWindowsPath)(Nl.default.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let s=new ni(e.path,t);s.entry=new _n.WriteEntryTar(e,this[dn](s)),s.entry.on("end",()=>this[fn](s)),this[ce]+=1,this[he].push(s)}this[nt]()}[fs](e){let t=(0,pn.normalizeWindowsPath)(Nl.default.resolve(this.cwd,e));this[he].push(new ni(e,t)),this[nt]()}[En](e){e.pending=!0,this[ce]+=1;let t=this.follow?"stat":"lstat";_s.default[t](e.absolute,(s,r)=>{e.pending=!1,this[ce]-=1,s?this.emit("error",s):this[us](e,r)})}[us](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[nt]()}[yn](e){e.pending=!0,this[ce]+=1,_s.default.readdir(e.absolute,(t,s)=>{if(e.pending=!1,this[ce]-=1,t)return this.emit("error",t);this[ds](e,s)})}[ds](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[nt]()}[nt](){if(!this[ri]){this[ri]=!0;for(let e=this[he].head;e&&this[ce]<this.jobs;e=e.next)if(this[Ol](e.value),e.value.ignore){let t=e.next;this[he].removeNode(e),e.next=t}this[ri]=!1,this[si]&&!this[he].length&&this[ce]===0&&(this.zip?this.zip.end(gl):(super.write(gl),super.end()))}}get[Lt](){return this[he]&&this[he].head&&this[he].head.value}[fn](e){this[he].shift(),this[ce]-=1,this[nt]()}[Ol](e){if(!e.pending){if(e.entry){e===this[Lt]&&!e.piped&&this[ms](e);return}if(!e.stat){let t=this.statCache.get(e.absolute);t?this[us](e,t):this[En](e)}if(e.stat&&!e.ignore){if(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir){let t=this.readdirCache.get(e.absolute);if(t?this[ds](e,t):this[yn](e),!e.readdir)return}if(e.entry=this[vl](e),!e.entry){e.ignore=!0;return}e===this[Lt]&&!e.piped&&this[ms](e)}}}[dn](e){return{onwarn:(t,s,r)=>this.warn(t,s,r),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix,onWriteEntry:this.onWriteEntry}}[vl](e){this[ce]+=1;try{return new this[ps](e.path,this[dn](e)).on("end",()=>this[fn](e)).on("error",s=>this.emit("error",s))}catch(t){this.emit("error",t)}}[mn](){this[Lt]&&this[Lt].entry&&this[Lt].entry.resume()}[ms](e){e.piped=!0,e.readdir&&e.readdir.forEach(r=>{let n=e.path,o=n==="./"?"":n.replace(/\/*$/,"/");this[fs](o+r)});let t=e.entry,s=this.zip;if(!t)throw new Error("cannot pipe without source");s?t.on("data",r=>{s.write(r)||t.pause()}):t.on("data",r=>{super.write(r)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}warn(e,t,s={}){(0,Im.warnMethod)(this,e,t,s)}};k.Pack=Es;var wn=class extends Es{sync=!0;constructor(e){super(e),this[ps]=_n.WriteEntrySync}pause(){}resume(){}[En](e){let t=this.follow?"statSync":"lstatSync";this[us](e,_s.default[t](e.absolute))}[yn](e){this[ds](e,_s.default.readdirSync(e.absolute))}[ms](e){let t=e.entry,s=this.zip;if(e.readdir&&e.readdir.forEach(r=>{let n=e.path,o=n==="./"?"":n.replace(/\/*$/,"/");this[fs](o+r)}),!t)throw new Error("Cannot pipe without source");s?t.on("data",r=>{s.write(r)}):t.on("data",r=>{super[Il](r)})}};k.PackSync=wn});var Sn=f(Pt=>{"use strict";var Am=Pt&&Pt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.create=void 0;var Al=Et(),Ll=Am(require("node:path")),Pl=It(),Lm=yt(),ws=ys(),Pm=(i,e)=>{let t=new ws.PackSync(i),s=new Al.WriteStreamSync(i.file,{mode:i.mode||438});t.pipe(s),Dl(t,e)},Dm=(i,e)=>{let t=new ws.Pack(i),s=new Al.WriteStream(i.file,{mode:i.mode||438});t.pipe(s);let r=new Promise((n,o)=>{s.on("error",o),s.on("close",n),t.on("error",o)});return Ml(t,e),r},Dl=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?(0,Pl.list)({file:Ll.default.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onReadEntry:s=>i.add(s)}):i.add(t)}),i.end()},Ml=async(i,e)=>{for(let t=0;t<e.length;t++){let s=String(e[t]);s.charAt(0)==="@"?await(0,Pl.list)({file:Ll.default.resolve(String(i.cwd),s.slice(1)),noResume:!0,onReadEntry:r=>{i.add(r)}}):i.add(s)}i.end()},Mm=(i,e)=>{let t=new ws.PackSync(i);return Dl(t,e),t},Cm=(i,e)=>{let t=new ws.Pack(i);return Ml(t,e),t};Pt.create=(0,Lm.makeCommand)(Pm,Dm,Mm,Cm,(i,e)=>{if(!e?.length)throw new TypeError("no paths specified to add to archive")})});var kl=f(Dt=>{"use strict";var Fm=Dt&&Dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getWriteFlag=void 0;var Cl=Fm(require("fs")),km=process.env.__FAKE_PLATFORM__||process.platform,qm=km==="win32",{O_CREAT:xm,O_TRUNC:$m,O_WRONLY:Bm}=Cl.default.constants,Fl=Number(process.env.__FAKE_FS_O_FILENAME__)||Cl.default.constants.UV_FS_O_FILEMAP||0,jm=qm&&!!Fl,Um=512*1024,zm=Fl|$m|xm|Bm;Dt.getWriteFlag=jm?i=>i<Um?zm:"w":()=>"w"});var xl=f(Re=>{"use strict";var ql=Re&&Re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Re,"__esModule",{value:!0});Re.chownrSync=Re.chownr=void 0;var Rs=ql(require("node:fs")),oi=ql(require("node:path")),Rn=(i,e,t)=>{try{return Rs.default.lchownSync(i,e,t)}catch(s){if(s?.code!=="ENOENT")throw s}},Ss=(i,e,t,s)=>{Rs.default.lchown(i,e,t,r=>{s(r&&r?.code!=="ENOENT"?r:null)})},Gm=(i,e,t,s,r)=>{if(e.isDirectory())(0,Re.chownr)(oi.default.resolve(i,e.name),t,s,n=>{if(n)return r(n);let o=oi.default.resolve(i,e.name);Ss(o,t,s,r)});else{let n=oi.default.resolve(i,e.name);Ss(n,t,s,r)}},Wm=(i,e,t,s)=>{Rs.default.readdir(i,{withFileTypes:!0},(r,n)=>{if(r){if(r.code==="ENOENT")return s();if(r.code!=="ENOTDIR"&&r.code!=="ENOTSUP")return s(r)}if(r||!n.length)return Ss(i,e,t,s);let o=n.length,a=null,l=h=>{if(!a){if(h)return s(a=h);if(--o===0)return Ss(i,e,t,s)}};for(let h of n)Gm(i,h,e,t,l)})};Re.chownr=Wm;var Hm=(i,e,t,s)=>{e.isDirectory()&&(0,Re.chownrSync)(oi.default.resolve(i,e.name),t,s),Rn(oi.default.resolve(i,e.name),t,s)},Vm=(i,e,t)=>{let s;try{s=Rs.default.readdirSync(i,{withFileTypes:!0})}catch(r){let n=r;if(n?.code==="ENOENT")return;if(n?.code==="ENOTDIR"||n?.code==="ENOTSUP")return Rn(i,e,t);throw n}for(let r of s)Hm(i,r,e,t);return Rn(i,e,t)};Re.chownrSync=Vm});var ai=f(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.optsArg=void 0;var gs=require("fs"),Xm=i=>{if(!i)i={mode:511};else if(typeof i=="object")i={mode:511,...i};else if(typeof i=="number")i={mode:i};else if(typeof i=="string")i={mode:parseInt(i,8)};else throw new TypeError("invalid options argument");let e=i,t=i.fs||{};return i.mkdir=i.mkdir||t.mkdir||gs.mkdir,i.mkdirAsync=i.mkdirAsync?i.mkdirAsync:async(s,r)=>new Promise((n,o)=>e.mkdir(s,r,(a,l)=>a?o(a):n(l))),i.stat=i.stat||t.stat||gs.stat,i.statAsync=i.statAsync?i.statAsync:async s=>new Promise((r,n)=>e.stat(s,(o,a)=>o?n(o):r(a))),i.statSync=i.statSync||t.statSync||gs.statSync,i.mkdirSync=i.mkdirSync||t.mkdirSync||gs.mkdirSync,e};Os.optsArg=Xm});var bs=f(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.mkdirpManual=ue.mkdirpManualSync=void 0;var $l=require("path"),Bl=ai(),Ym=(i,e,t)=>{let s=(0,$l.dirname)(i),r={...(0,Bl.optsArg)(e),recursive:!1};if(s===i)try{return r.mkdirSync(i,r)}catch(n){let o=n;if(o&&o.code!=="EISDIR")throw n;return}try{return r.mkdirSync(i,r),t||i}catch(n){let o=n;if(o&&o.code==="ENOENT")return(0,ue.mkdirpManualSync)(i,r,(0,ue.mkdirpManualSync)(s,r,t));if(o&&o.code!=="EEXIST"&&o&&o.code!=="EROFS")throw n;try{if(!r.statSync(i).isDirectory())throw n}catch{throw n}}};ue.mkdirpManualSync=Ym;ue.mkdirpManual=Object.assign(async(i,e,t)=>{let s=(0,Bl.optsArg)(e);s.recursive=!1;let r=(0,$l.dirname)(i);return r===i?s.mkdirAsync(i,s).catch(n=>{let o=n;if(o&&o.code!=="EISDIR")throw n}):s.mkdirAsync(i,s).then(()=>t||i,async n=>{let o=n;if(o&&o.code==="ENOENT")return(0,ue.mkdirpManual)(r,s).then(a=>(0,ue.mkdirpManual)(i,s,a));if(o&&o.code!=="EEXIST"&&o.code!=="EROFS")throw n;return s.statAsync(i).then(a=>{if(a.isDirectory())return t;throw n},()=>{throw n})})},{sync:ue.mkdirpManualSync})});var Ul=f(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.findMadeSync=je.findMade=void 0;var jl=require("path"),Zm=async(i,e,t)=>{if(t!==e)return i.statAsync(e).then(s=>s.isDirectory()?t:void 0,s=>{let r=s;return r&&r.code==="ENOENT"?(0,je.findMade)(i,(0,jl.dirname)(e),e):void 0})};je.findMade=Zm;var Km=(i,e,t)=>{if(t!==e)try{return i.statSync(e).isDirectory()?t:void 0}catch(s){let r=s;return r&&r.code==="ENOENT"?(0,je.findMadeSync)(i,(0,jl.dirname)(e),e):void 0}};je.findMadeSync=Km});var gn=f(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.mkdirpNative=ot.mkdirpNativeSync=void 0;var zl=require("path"),Gl=Ul(),Wl=bs(),Hl=ai(),Qm=(i,e)=>{let t=(0,Hl.optsArg)(e);if(t.recursive=!0,(0,zl.dirname)(i)===i)return t.mkdirSync(i,t);let r=(0,Gl.findMadeSync)(t,i);try{return t.mkdirSync(i,t),r}catch(n){let o=n;if(o&&o.code==="ENOENT")return(0,Wl.mkdirpManualSync)(i,t);throw n}};ot.mkdirpNativeSync=Qm;ot.mkdirpNative=Object.assign(async(i,e)=>{let t={...(0,Hl.optsArg)(e),recursive:!0};return(0,zl.dirname)(i)===i?await t.mkdirAsync(i,t):(0,Gl.findMade)(t,i).then(r=>t.mkdirAsync(i,t).then(n=>r||n).catch(n=>{let o=n;if(o&&o.code==="ENOENT")return(0,Wl.mkdirpManual)(i,t);throw n}))},{sync:ot.mkdirpNativeSync})});var Xl=f(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.pathArg=void 0;var Jm=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,Vl=require("path"),ep=i=>{if(/\0/.test(i))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:i,code:"ERR_INVALID_ARG_VALUE"});if(i=(0,Vl.resolve)(i),Jm==="win32"){let e=/[*|"<>?:]/,{root:t}=(0,Vl.parse)(i);if(e.test(i.substring(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:i,code:"EINVAL"})}return i};vs.pathArg=ep});var bn=f(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.useNative=at.useNativeSync=void 0;var Yl=require("fs"),Zl=ai(),tp=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,On=tp.replace(/^v/,"").split("."),Kl=+On[0]>10||+On[0]==10&&+On[1]>=12;at.useNativeSync=Kl?i=>(0,Zl.optsArg)(i).mkdirSync===Yl.mkdirSync:()=>!1;at.useNative=Object.assign(Kl?i=>(0,Zl.optsArg)(i).mkdir===Yl.mkdir:()=>!1,{sync:at.useNativeSync})});var sh=f(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.mkdirp=S.nativeSync=S.native=S.manualSync=S.manual=S.sync=S.mkdirpSync=S.useNativeSync=S.useNative=S.mkdirpNativeSync=S.mkdirpNative=S.mkdirpManualSync=S.mkdirpManual=void 0;var Ue=bs(),ze=gn(),Ql=ai(),Jl=Xl(),Ns=bn(),eh=bs();Object.defineProperty(S,"mkdirpManual",{enumerable:!0,get:function(){return eh.mkdirpManual}});Object.defineProperty(S,"mkdirpManualSync",{enumerable:!0,get:function(){return eh.mkdirpManualSync}});var th=gn();Object.defineProperty(S,"mkdirpNative",{enumerable:!0,get:function(){return th.mkdirpNative}});Object.defineProperty(S,"mkdirpNativeSync",{enumerable:!0,get:function(){return th.mkdirpNativeSync}});var ih=bn();Object.defineProperty(S,"useNative",{enumerable:!0,get:function(){return ih.useNative}});Object.defineProperty(S,"useNativeSync",{enumerable:!0,get:function(){return ih.useNativeSync}});var ip=(i,e)=>{i=(0,Jl.pathArg)(i);let t=(0,Ql.optsArg)(e);return(0,Ns.useNativeSync)(t)?(0,ze.mkdirpNativeSync)(i,t):(0,Ue.mkdirpManualSync)(i,t)};S.mkdirpSync=ip;S.sync=S.mkdirpSync;S.manual=Ue.mkdirpManual;S.manualSync=Ue.mkdirpManualSync;S.native=ze.mkdirpNative;S.nativeSync=ze.mkdirpNativeSync;S.mkdirp=Object.assign(async(i,e)=>{i=(0,Jl.pathArg)(i);let t=(0,Ql.optsArg)(e);return(0,Ns.useNative)(t)?(0,ze.mkdirpNative)(i,t):(0,Ue.mkdirpManual)(i,t)},{mkdirpSync:S.mkdirpSync,mkdirpNative:ze.mkdirpNative,mkdirpNativeSync:ze.mkdirpNativeSync,mkdirpManual:Ue.mkdirpManual,mkdirpManualSync:Ue.mkdirpManualSync,sync:S.mkdirpSync,native:ze.mkdirpNative,nativeSync:ze.mkdirpNativeSync,manual:Ue.mkdirpManual,manualSync:Ue.mkdirpManualSync,useNative:Ns.useNative,useNativeSync:Ns.useNativeSync})});var rh=f(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.CwdError=void 0;var vn=class extends Error{path;code;syscall="chdir";constructor(e,t){super(`${t}: Cannot cd into '${e}'`),this.path=e,this.code=t}get name(){return"CwdError"}};Ts.CwdError=vn});var nh=f(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.SymlinkError=void 0;var Nn=class extends Error{path;symlink;syscall="symlink";code="TAR_SYMLINK_ERROR";constructor(e,t){super("TAR_SYMLINK_ERROR: Cannot extract through symbolic link"),this.symlink=e,this.path=t}get name(){return"SymlinkError"}};Is.SymlinkError=Nn});var fh=f(Ge=>{"use strict";var oh=Ge&&Ge.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.mkdirSync=Ge.mkdir=void 0;var ah=xl(),te=oh(require("fs")),lh=sh(),As=oh(require("node:path")),hh=rh(),fe=vt(),ch=nh(),Ls=(i,e)=>i.get((0,fe.normalizeWindowsPath)(e)),li=(i,e,t)=>i.set((0,fe.normalizeWindowsPath)(e),t),sp=(i,e)=>{te.default.stat(i,(t,s)=>{(t||!s.isDirectory())&&(t=new hh.CwdError(i,t?.code||"ENOTDIR")),e(t)})},rp=(i,e,t)=>{i=(0,fe.normalizeWindowsPath)(i);let s=e.umask??18,r=e.mode|448,n=(r&s)!==0,o=e.uid,a=e.gid,l=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),h=e.preserve,c=e.unlink,u=e.cache,_=(0,fe.normalizeWindowsPath)(e.cwd),p=(G,A)=>{G?t(G):(li(u,i,!0),A&&l?(0,ah.chownr)(A,o,a,zn=>p(zn)):n?te.default.chmod(i,r,t):t())};if(u&&Ls(u,i)===!0)return p();if(i===_)return sp(i,p);if(h)return(0,lh.mkdirp)(i,{mode:r}).then(G=>p(null,G??void 0),p);let I=(0,fe.normalizeWindowsPath)(As.default.relative(_,i)).split("/");Ps(_,I,r,u,c,_,void 0,p)};Ge.mkdir=rp;var Ps=(i,e,t,s,r,n,o,a)=>{if(!e.length)return a(null,o);let l=e.shift(),h=(0,fe.normalizeWindowsPath)(As.default.resolve(i+"/"+l));if(Ls(s,h))return Ps(h,e,t,s,r,n,o,a);te.default.mkdir(h,t,uh(h,e,t,s,r,n,o,a))},uh=(i,e,t,s,r,n,o,a)=>l=>{l?te.default.lstat(i,(h,c)=>{if(h)h.path=h.path&&(0,fe.normalizeWindowsPath)(h.path),a(h);else if(c.isDirectory())Ps(i,e,t,s,r,n,o,a);else if(r)te.default.unlink(i,u=>{if(u)return a(u);te.default.mkdir(i,t,uh(i,e,t,s,r,n,o,a))});else{if(c.isSymbolicLink())return a(new ch.SymlinkError(i,i+"/"+e.join("/")));a(l)}}):(o=o||i,Ps(i,e,t,s,r,n,o,a))},np=i=>{let e=!1,t;try{e=te.default.statSync(i).isDirectory()}catch(s){t=s?.code}finally{if(!e)throw new hh.CwdError(i,t??"ENOTDIR")}},op=(i,e)=>{i=(0,fe.normalizeWindowsPath)(i);let t=e.umask??18,s=e.mode|448,r=(s&t)!==0,n=e.uid,o=e.gid,a=typeof n=="number"&&typeof o=="number"&&(n!==e.processUid||o!==e.processGid),l=e.preserve,h=e.unlink,c=e.cache,u=(0,fe.normalizeWindowsPath)(e.cwd),_=G=>{li(c,i,!0),G&&a&&(0,ah.chownrSync)(G,n,o),r&&te.default.chmodSync(i,s)};if(c&&Ls(c,i)===!0)return _();if(i===u)return np(u),_();if(l)return _((0,lh.mkdirpSync)(i,s)??void 0);let z=(0,fe.normalizeWindowsPath)(As.default.relative(u,i)).split("/"),I;for(let G=z.shift(),A=u;G&&(A+="/"+G);G=z.shift())if(A=(0,fe.normalizeWindowsPath)(As.default.resolve(A)),!Ls(c,A))try{te.default.mkdirSync(A,s),I=I||A,li(c,A,!0)}catch{let Gn=te.default.lstatSync(A);if(Gn.isDirectory()){li(c,A,!0);continue}else if(h){te.default.unlinkSync(A),te.default.mkdirSync(A,s),I=I||A,li(c,A,!0);continue}else if(Gn.isSymbolicLink())return new ch.SymlinkError(A,A+"/"+z.join("/"))}return _(I)};Ge.mkdirSync=op});var In=f(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.normalizeUnicode=void 0;var Tn=Object.create(null),{hasOwnProperty:ap}=Object.prototype,lp=i=>(ap.call(Tn,i)||(Tn[i]=i.normalize("NFD")),Tn[i]);Ds.normalizeUnicode=lp});var mh=f(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.PathReservations=void 0;var dh=require("node:path"),hp=In(),cp=ti(),up=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,fp=up==="win32",dp=i=>i.split("/").slice(0,-1).reduce((t,s)=>{let r=t[t.length-1];return r!==void 0&&(s=(0,dh.join)(r,s)),t.push(s||"/"),t},[]),An=class{#e=new Map;#i=new Map;#s=new Set;reserve(e,t){e=fp?["win32 parallelization disabled"]:e.map(r=>(0,cp.stripTrailingSlashes)((0,dh.join)((0,hp.normalizeUnicode)(r))).toLowerCase());let s=new Set(e.map(r=>dp(r)).reduce((r,n)=>r.concat(n)));this.#i.set(t,{dirs:s,paths:e});for(let r of e){let n=this.#e.get(r);n?n.push(t):this.#e.set(r,[t])}for(let r of s){let n=this.#e.get(r);if(!n)this.#e.set(r,[new Set([t])]);else{let o=n[n.length-1];o instanceof Set?o.add(t):n.push(new Set([t]))}}return this.#r(t)}#n(e){let t=this.#i.get(e);if(!t)throw new Error("function does not have any path reservations");return{paths:t.paths.map(s=>this.#e.get(s)),dirs:[...t.dirs].map(s=>this.#e.get(s))}}check(e){let{paths:t,dirs:s}=this.#n(e);return t.every(r=>r&&r[0]===e)&&s.every(r=>r&&r[0]instanceof Set&&r[0].has(e))}#r(e){return this.#s.has(e)||!this.check(e)?!1:(this.#s.add(e),e(()=>this.#t(e)),!0)}#t(e){if(!this.#s.has(e))return!1;let t=this.#i.get(e);if(!t)throw new Error("invalid reservation");let{paths:s,dirs:r}=t,n=new Set;for(let o of s){let a=this.#e.get(o);if(!a||a?.[0]!==e)continue;let l=a[1];if(!l){this.#e.delete(o);continue}if(a.shift(),typeof l=="function")n.add(l);else for(let h of l)n.add(h)}for(let o of r){let a=this.#e.get(o),l=a?.[0];if(!(!a||!(l instanceof Set)))if(l.size===1&&a.length===1){this.#e.delete(o);continue}else if(l.size===1){a.shift();let h=a[0];typeof h=="function"&&n.add(h)}else l.delete(e)}return this.#s.delete(e),n.forEach(o=>this.#r(o)),!0}};Ms.PathReservations=An});var $n=f(V=>{"use strict";var mp=V&&V.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),pp=V&&V.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),vh=V&&V.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&mp(e,i,t);return pp(e,i),e},xn=V&&V.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(V,"__esModule",{value:!0});V.UnpackSync=V.Unpack=void 0;var _p=vh(Et()),Ep=xn(require("node:assert")),Nh=require("node:crypto"),w=xn(require("node:fs")),Ae=xn(require("node:path")),Th=kl(),Ih=fh(),yp=In(),ie=vt(),wp=ts(),Sp=Kr(),Rp=ti(),ph=vh(Jr()),gp=mh(),_h=Symbol("onEntry"),Dn=Symbol("checkFs"),Eh=Symbol("checkFs2"),ks=Symbol("pruneCache"),Mn=Symbol("isReusable"),se=Symbol("makeFs"),Cn=Symbol("file"),Fn=Symbol("directory"),qs=Symbol("link"),yh=Symbol("symlink"),wh=Symbol("hardlink"),Sh=Symbol("unsupported"),Rh=Symbol("checkPath"),We=Symbol("mkdir"),q=Symbol("onError"),Cs=Symbol("pending"),gh=Symbol("pend"),Mt=Symbol("unpend"),Ln=Symbol("ended"),Pn=Symbol("maybeClose"),kn=Symbol("skip"),hi=Symbol("doChown"),ci=Symbol("uid"),ui=Symbol("gid"),fi=Symbol("checkedCwd"),Op=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,di=Op==="win32",bp=1024,vp=(i,e)=>{if(!di)return w.default.unlink(i,e);let t=i+".DELETE."+(0,Nh.randomBytes)(16).toString("hex");w.default.rename(i,t,s=>{if(s)return e(s);w.default.unlink(t,e)})},Np=i=>{if(!di)return w.default.unlinkSync(i);let e=i+".DELETE."+(0,Nh.randomBytes)(16).toString("hex");w.default.renameSync(i,e),w.default.unlinkSync(e)},Oh=(i,e,t)=>i!==void 0&&i===i>>>0?i:e!==void 0&&e===e>>>0?e:t,bh=i=>(0,Rp.stripTrailingSlashes)((0,ie.normalizeWindowsPath)((0,yp.normalizeUnicode)(i))).toLowerCase(),Tp=(i,e)=>{e=bh(e);for(let t of i.keys()){let s=bh(t);(s===e||s.indexOf(e+"/")===0)&&i.delete(t)}},Ip=i=>{for(let e of i.keys())i.delete(e)},xs=class extends wp.Parser{[Ln]=!1;[fi]=!1;[Cs]=0;reservations=new gp.PathReservations;transform;writable=!0;readable=!1;dirCache;uid;gid;setOwner;preserveOwner;processGid;processUid;maxDepth;forceChown;win32;newer;keep;noMtime;preservePaths;unlink;cwd;strip;processUmask;umask;dmode;fmode;chmod;constructor(e={}){if(e.ondone=()=>{this[Ln]=!0,this[Pn]()},super(e),this.transform=e.transform,this.dirCache=e.dirCache||new Map,this.chmod=!!e.chmod,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=void 0,this.gid=void 0,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=!!(process.getuid&&process.getuid()===0):this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():void 0,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():void 0,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:bp,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||di,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=(0,ie.normalizeWindowsPath)(Ae.default.resolve(e.cwd||process.cwd())),this.strip=Number(e.strip)||0,this.processUmask=this.chmod?typeof e.processUmask=="number"?e.processUmask:process.umask():0,this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[_h](t))}warn(e,t,s={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(s.recoverable=!1),super.warn(e,t,s)}[Pn](){this[Ln]&&this[Cs]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[Rh](e){let t=(0,ie.normalizeWindowsPath)(e.path),s=t.split("/");if(this.strip){if(s.length<this.strip)return!1;if(e.type==="Link"){let r=(0,ie.normalizeWindowsPath)(String(e.linkpath)).split("/");if(r.length>=this.strip)e.linkpath=r.slice(this.strip).join("/");else return!1}s.splice(0,this.strip),e.path=s.join("/")}if(isFinite(this.maxDepth)&&s.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:t,depth:s.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(s.includes("..")||di&&/^[a-z]:\.\.$/i.test(s[0]??""))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[r,n]=(0,Sp.stripAbsolutePath)(t);r&&(e.path=String(n),this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:e,path:t}))}if(Ae.default.isAbsolute(e.path)?e.absolute=(0,ie.normalizeWindowsPath)(Ae.default.resolve(e.path)):e.absolute=(0,ie.normalizeWindowsPath)(Ae.default.resolve(this.cwd,e.path)),!this.preservePaths&&typeof e.absolute=="string"&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:(0,ie.normalizeWindowsPath)(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Ae.default.win32.parse(String(e.absolute));e.absolute=r+ph.encode(String(e.absolute).slice(r.length));let{root:n}=Ae.default.win32.parse(e.path);e.path=n+ph.encode(e.path.slice(n.length))}return!0}[_h](e){if(!this[Rh](e))return e.resume();switch(Ep.default.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Dn](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[Sh](e)}}[q](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[Mt](),t.resume())}[We](e,t,s){(0,Ih.mkdir)((0,ie.normalizeWindowsPath)(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t},s)}[hi](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ci](e){return Oh(this.uid,e.uid,this.processUid)}[ui](e){return Oh(this.gid,e.gid,this.processGid)}[Cn](e,t){let s=typeof e.mode=="number"?e.mode&4095:this.fmode,r=new _p.WriteStream(String(e.absolute),{flags:(0,Th.getWriteFlag)(e.size),mode:s,autoClose:!1});r.on("error",l=>{r.fd&&w.default.close(r.fd,()=>{}),r.write=()=>!0,this[q](l,e),t()});let n=1,o=l=>{if(l){r.fd&&w.default.close(r.fd,()=>{}),this[q](l,e),t();return}--n===0&&r.fd!==void 0&&w.default.close(r.fd,h=>{h?this[q](h,e):this[Mt](),t()})};r.on("finish",()=>{let l=String(e.absolute),h=r.fd;if(typeof h=="number"&&e.mtime&&!this.noMtime){n++;let c=e.atime||new Date,u=e.mtime;w.default.futimes(h,c,u,_=>_?w.default.utimes(l,c,u,p=>o(p&&_)):o())}if(typeof h=="number"&&this[hi](e)){n++;let c=this[ci](e),u=this[ui](e);typeof c=="number"&&typeof u=="number"&&w.default.fchown(h,c,u,_=>_?w.default.chown(l,c,u,p=>o(p&&_)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",l=>{this[q](l,e),t()}),e.pipe(a)),a.pipe(r)}[Fn](e,t){let s=typeof e.mode=="number"?e.mode&4095:this.dmode;this[We](String(e.absolute),s,r=>{if(r){this[q](r,e),t();return}let n=1,o=()=>{--n===0&&(t(),this[Mt](),e.resume())};e.mtime&&!this.noMtime&&(n++,w.default.utimes(String(e.absolute),e.atime||new Date,e.mtime,o)),this[hi](e)&&(n++,w.default.chown(String(e.absolute),Number(this[ci](e)),Number(this[ui](e)),o)),o()})}[Sh](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[yh](e,t){this[qs](e,String(e.linkpath),"symlink",t)}[wh](e,t){let s=(0,ie.normalizeWindowsPath)(Ae.default.resolve(this.cwd,String(e.linkpath)));this[qs](e,s,"link",t)}[gh](){this[Cs]++}[Mt](){this[Cs]--,this[Pn]()}[kn](e){this[Mt](),e.resume()}[Mn](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!di}[Dn](e){this[gh]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,s=>this[Eh](e,s))}[ks](e){e.type==="SymbolicLink"?Ip(this.dirCache):e.type!=="Directory"&&Tp(this.dirCache,String(e.absolute))}[Eh](e,t){this[ks](e);let s=a=>{this[ks](e),t(a)},r=()=>{this[We](this.cwd,this.dmode,a=>{if(a){this[q](a,e),s();return}this[fi]=!0,n()})},n=()=>{if(e.absolute!==this.cwd){let a=(0,ie.normalizeWindowsPath)(Ae.default.dirname(String(e.absolute)));if(a!==this.cwd)return this[We](a,this.dmode,l=>{if(l){this[q](l,e),s();return}o()})}o()},o=()=>{w.default.lstat(String(e.absolute),(a,l)=>{if(l&&(this.keep||this.newer&&l.mtime>(e.mtime??l.mtime))){this[kn](e),s();return}if(a||this[Mn](e,l))return this[se](null,e,s);if(l.isDirectory()){if(e.type==="Directory"){let h=this.chmod&&e.mode&&(l.mode&4095)!==e.mode,c=u=>this[se](u??null,e,s);return h?w.default.chmod(String(e.absolute),Number(e.mode),c):c()}if(e.absolute!==this.cwd)return w.default.rmdir(String(e.absolute),h=>this[se](h??null,e,s))}if(e.absolute===this.cwd)return this[se](null,e,s);vp(String(e.absolute),h=>this[se](h??null,e,s))})};this[fi]?n():r()}[se](e,t,s){if(e){this[q](e,t),s();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[Cn](t,s);case"Link":return this[wh](t,s);case"SymbolicLink":return this[yh](t,s);case"Directory":case"GNUDumpDir":return this[Fn](t,s)}}[qs](e,t,s,r){w.default[s](t,String(e.absolute),n=>{n?this[q](n,e):(this[Mt](),e.resume()),r()})}};V.Unpack=xs;var Fs=i=>{try{return[null,i()]}catch(e){return[e,null]}},qn=class extends xs{sync=!0;[se](e,t){return super[se](e,t,()=>{})}[Dn](e){if(this[ks](e),!this[fi]){let n=this[We](this.cwd,this.dmode);if(n)return this[q](n,e);this[fi]=!0}if(e.absolute!==this.cwd){let n=(0,ie.normalizeWindowsPath)(Ae.default.dirname(String(e.absolute)));if(n!==this.cwd){let o=this[We](n,this.dmode);if(o)return this[q](o,e)}}let[t,s]=Fs(()=>w.default.lstatSync(String(e.absolute)));if(s&&(this.keep||this.newer&&s.mtime>(e.mtime??s.mtime)))return this[kn](e);if(t||this[Mn](e,s))return this[se](null,e);if(s.isDirectory()){if(e.type==="Directory"){let o=this.chmod&&e.mode&&(s.mode&4095)!==e.mode,[a]=o?Fs(()=>{w.default.chmodSync(String(e.absolute),Number(e.mode))}):[];return this[se](a,e)}let[n]=Fs(()=>w.default.rmdirSync(String(e.absolute)));this[se](n,e)}let[r]=e.absolute===this.cwd?[]:Fs(()=>Np(String(e.absolute)));this[se](r,e)}[Cn](e,t){let s=typeof e.mode=="number"?e.mode&4095:this.fmode,r=a=>{let l;try{w.default.closeSync(n)}catch(h){l=h}(a||l)&&this[q](a||l,e),t()},n;try{n=w.default.openSync(String(e.absolute),(0,Th.getWriteFlag)(e.size),s)}catch(a){return r(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[q](a,e)),e.pipe(o)),o.on("data",a=>{try{w.default.writeSync(n,a,0,a.length)}catch(l){r(l)}}),o.on("end",()=>{let a=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,h=e.mtime;try{w.default.futimesSync(n,l,h)}catch(c){try{w.default.utimesSync(String(e.absolute),l,h)}catch{a=c}}}if(this[hi](e)){let l=this[ci](e),h=this[ui](e);try{w.default.fchownSync(n,Number(l),Number(h))}catch(c){try{w.default.chownSync(String(e.absolute),Number(l),Number(h))}catch{a=a||c}}}r(a)})}[Fn](e,t){let s=typeof e.mode=="number"?e.mode&4095:this.dmode,r=this[We](String(e.absolute),s);if(r){this[q](r,e),t();return}if(e.mtime&&!this.noMtime)try{w.default.utimesSync(String(e.absolute),e.atime||new Date,e.mtime)}catch{}if(this[hi](e))try{w.default.chownSync(String(e.absolute),Number(this[ci](e)),Number(this[ui](e)))}catch{}t(),e.resume()}[We](e,t){try{return(0,Ih.mkdirSync)((0,ie.normalizeWindowsPath)(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(s){return s}}[qs](e,t,s,r){let n=`${s}Sync`;try{w.default[n](t,String(e.absolute)),r(),e.resume()}catch(o){return this[q](o,e)}}};V.UnpackSync=qn});var Bn=f(re=>{"use strict";var Ap=re&&re.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Lp=re&&re.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Pp=re&&re.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&Ap(e,i,t);return Lp(e,i),e},Dp=re&&re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(re,"__esModule",{value:!0});re.extract=void 0;var Ah=Pp(Et()),Lh=Dp(require("node:fs")),Mp=It(),Cp=yt(),$s=$n(),Fp=i=>{let e=new $s.UnpackSync(i),t=i.file,s=Lh.default.statSync(t),r=i.maxReadSize||16*1024*1024;new Ah.ReadStreamSync(t,{readSize:r,size:s.size}).pipe(e)},kp=(i,e)=>{let t=new $s.Unpack(i),s=i.maxReadSize||16*1024*1024,r=i.file;return new Promise((o,a)=>{t.on("error",a),t.on("close",o),Lh.default.stat(r,(l,h)=>{if(l)a(l);else{let c=new Ah.ReadStream(r,{readSize:s,size:h.size});c.on("error",a),c.pipe(t)}})})};re.extract=(0,Cp.makeCommand)(Fp,kp,i=>new $s.UnpackSync(i),i=>new $s.Unpack(i),(i,e)=>{e?.length&&(0,Mp.filesFilter)(i,e)})});var Bs=f(Ct=>{"use strict";var Ph=Ct&&Ct.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.replace=void 0;var Dh=Et(),Z=Ph(require("node:fs")),Mh=Ph(require("node:path")),Ch=bt(),Fh=It(),qp=yt(),xp=qi(),kh=ys(),$p=(i,e)=>{let t=new kh.PackSync(i),s=!0,r,n;try{try{r=Z.default.openSync(i.file,"r+")}catch(l){if(l?.code==="ENOENT")r=Z.default.openSync(i.file,"w+");else throw l}let o=Z.default.fstatSync(r),a=Buffer.alloc(512);e:for(n=0;n<o.size;n+=512){for(let c=0,u=0;c<512;c+=u){if(u=Z.default.readSync(r,a,c,a.length-c,n+c),n===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!u)break e}let l=new Ch.Header(a);if(!l.cksumValid)break;let h=512*Math.ceil((l.size||0)/512);if(n+h+512>o.size)break;n+=h,i.mtimeCache&&l.mtime&&i.mtimeCache.set(String(l.path),l.mtime)}s=!1,Bp(i,t,n,r,e)}finally{if(s)try{Z.default.closeSync(r)}catch{}}},Bp=(i,e,t,s,r)=>{let n=new Dh.WriteStreamSync(i.file,{fd:s,start:t});e.pipe(n),Up(e,r)},jp=(i,e)=>{e=Array.from(e);let t=new kh.Pack(i),s=(n,o,a)=>{let l=(p,z)=>{p?Z.default.close(n,I=>a(p)):a(null,z)},h=0;if(o===0)return l(null,0);let c=0,u=Buffer.alloc(512),_=(p,z)=>{if(p||typeof z>"u")return l(p);if(c+=z,c<512&&z)return Z.default.read(n,u,c,u.length-c,h+c,_);if(h===0&&u[0]===31&&u[1]===139)return l(new Error("cannot append to compressed archives"));if(c<512)return l(null,h);let I=new Ch.Header(u);if(!I.cksumValid)return l(null,h);let G=512*Math.ceil((I.size??0)/512);if(h+G+512>o||(h+=G+512,h>=o))return l(null,h);i.mtimeCache&&I.mtime&&i.mtimeCache.set(String(I.path),I.mtime),c=0,Z.default.read(n,u,0,512,h,_)};Z.default.read(n,u,0,512,h,_)};return new Promise((n,o)=>{t.on("error",o);let a="r+",l=(h,c)=>{if(h&&h.code==="ENOENT"&&a==="r+")return a="w+",Z.default.open(i.file,a,l);if(h||!c)return o(h);Z.default.fstat(c,(u,_)=>{if(u)return Z.default.close(c,()=>o(u));s(c,_.size,(p,z)=>{if(p)return o(p);let I=new Dh.WriteStream(i.file,{fd:c,start:z});t.pipe(I),I.on("error",o),I.on("close",n),zp(t,e)})})};Z.default.open(i.file,a,l)})},Up=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?(0,Fh.list)({file:Mh.default.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onReadEntry:s=>i.add(s)}):i.add(t)}),i.end()},zp=async(i,e)=>{for(let t=0;t<e.length;t++){let s=String(e[t]);s.charAt(0)==="@"?await(0,Fh.list)({file:Mh.default.resolve(String(i.cwd),s.slice(1)),noResume:!0,onReadEntry:r=>i.add(r)}):i.add(s)}i.end()};Ct.replace=(0,qp.makeCommand)($p,jp,()=>{throw new TypeError("file is required")},()=>{throw new TypeError("file is required")},(i,e)=>{if(!(0,xp.isFile)(i))throw new TypeError("file is required");if(i.gzip||i.brotli||i.file.endsWith(".br")||i.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e?.length)throw new TypeError("no paths specified to add/replace")})});var jn=f(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.update=void 0;var Gp=yt(),mi=Bs();js.update=(0,Gp.makeCommand)(mi.replace.syncFile,mi.replace.asyncFile,mi.replace.syncNoFile,mi.replace.asyncNoFile,(i,e=[])=>{mi.replace.validate?.(i,e),Wp(i)});var Wp=i=>{let e=i.filter;i.mtimeCache||(i.mtimeCache=new Map),i.filter=e?(t,s)=>e(t,s)&&!((i.mtimeCache?.get(t)??s.mtime??0)>(s.mtime??0)):(t,s)=>!((i.mtimeCache?.get(t)??s.mtime??0)>(s.mtime??0))}});var xh=f(y=>{"use strict";var qh=y&&y.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Hp=y&&y.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),ne=y&&y.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&qh(e,i,t)},Vp=y&&y.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&qh(e,i,t);return Hp(e,i),e};Object.defineProperty(y,"__esModule",{value:!0});y.u=y.types=y.r=y.t=y.x=y.c=void 0;ne(Sn(),y);var Xp=Sn();Object.defineProperty(y,"c",{enumerable:!0,get:function(){return Xp.create}});ne(Bn(),y);var Yp=Bn();Object.defineProperty(y,"x",{enumerable:!0,get:function(){return Yp.extract}});ne(bt(),y);ne(It(),y);var Zp=It();Object.defineProperty(y,"t",{enumerable:!0,get:function(){return Zp.list}});ne(ys(),y);ne(ts(),y);ne(ji(),y);ne(Wi(),y);ne(Bs(),y);var Kp=Bs();Object.defineProperty(y,"r",{enumerable:!0,get:function(){return Kp.replace}});y.types=Vp(xr());ne($n(),y);ne(jn(),y);var Qp=jn();Object.defineProperty(y,"u",{enumerable:!0,get:function(){return Qp.update}});ne(un(),y)});var{execSync:$h}=require("child_process"),Jp=ka(),e_=require("https"),Us=require("path"),t_=xh(),He=require("fs"),Un=require("os"),Ft=(()=>{try{return He.accessSync("/usr/local/bin",He.constants.W_OK),"/usr/local/bin"}catch{return Us.join(process.env.INPUT_PKGX_DIR||Us.join(process.env.HOME,".pkgx"),"bin")}})();He.writeFileSync(process.env.GITHUB_PATH,`${Ft}
`);function Bh(){let i=Un.platform(),e=Un.arch();return e=="x64"&&(e="x86-64"),e=="arm64"&&(e="aarch64"),`${i}/${e}`}function i_(i,e){return new Promise((t,s)=>{e_.get(i,r=>{if(r.statusCode!==200){s(new Error(`Failed to get '${i}' (${r.statusCode})`));return}console.log("extracting tarball\u2026");let n=t_.x({cwd:e,strip:3});r.pipe(n).on("finish",t).on("error",s),n.on("error",s)}).on("error",s)})}function s_(i){let e=s=>s.startsWith('"')||s.startsWith("'")?s.slice(1,-1):s,t=s=>s.replaceAll(/\$\{([a-zA-Z0-9_]+):\+:\$[a-zA-Z0-9_]+\}/g,(n,o)=>(a=>a?`:${a}`:"")(process.env[o])).replaceAll(/\$\{([a-zA-Z0-9_]+)\}/g,(n,o)=>process.env[o]??"").replaceAll(/\$([a-zA-Z0-9_]+)/g,(n,o)=>process.env[o]??"");for(let s of i.split(`
`)){let r=s.match(/^([^=]+)=(.*)$/);if(r){let[n,o,a]=r,l=e(a);if(o==="PATH")l.replaceAll("${PATH:+:$PATH}","").replaceAll("$PATH","").replaceAll("${PATH}","").split(":").forEach(h=>{He.appendFileSync(process.env.GITHUB_PATH,`${h}
`)});else{let h=t(l);He.appendFileSync(process.env.GITHUB_ENV,`${o}=${h}
`)}}}}async function r_(){let i=`https://dist.pkgx.dev/pkgx.sh/${Bh()}/versions.txt`;console.log(`::group::installing ${Ft}/pkgx`),console.log(`fetching ${i}`);let s=(await(await fetch(i)).text()).split(`
`),r=process.env.INPUT_VERSION?Jp.maxSatisfying(s,process.env.INPUT_VERSION):s.slice(-1)[0];if(!r)throw new Error(`no version found for ${process.env.INPUT_VERSION}`);console.log(`selected pkgx v${r}`),i=`https://dist.pkgx.dev/pkgx.sh/${Bh()}/v${r}.tar.gz`,console.log(`fetching ${i}`),He.existsSync(Ft)||He.mkdirSync(Ft,{recursive:!0}),await i_(i,Ft),console.log("::endgroup::")}(async()=>{if(await r_(),process.env.INPUT_PKGX_DIR&&He.appendFileSync(process.env.GITHUB_ENV,`PKGX_DIR=${process.env.INPUT_PKGX_DIR}
`),Un.platform()!="darwin"){console.log("::group::installing pre-requisites");let i=Us.join(Us.dirname(__filename),"installer.sh");$h(i,{env:{PKGX_INSTALL_PREREQS:"1",...process.env}}),console.log("::endgroup::")}if(process.env["INPUT_+"]){console.log("::group::installing pkgx input packages");let i=process.env["INPUT_+"].split(" "),e=`${Ft}/pkgx ${i.map(r=>`+${r}`).join(" ")}`;console.log(`running: \`${e}\``);let t;process.env.INPUT_PKGX_DIR&&(t=process.env,t.PKGX_DIR=process.env.INPUT_PKGX_DIR);let s=$h(e,{env:t});s_(s.toString()),console.log("::endgroup::")}})().catch(i=>{console.error(`::error::${i.message}`),process.exit(1)});
