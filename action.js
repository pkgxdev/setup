var f=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var qt=f((l_,Vn)=>{var Uh="2.0.0",zh=Number.MAX_SAFE_INTEGER||9007199254740991,Wh=16,Gh=250,Hh=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Vn.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Wh,MAX_SAFE_BUILD_LENGTH:Gh,MAX_SAFE_INTEGER:zh,RELEASE_TYPES:Hh,SEMVER_SPEC_VERSION:Uh,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var xt=f((h_,Xn)=>{var Vh=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...i)=>console.error("SEMVER",...i):()=>{};Xn.exports=Vh});var lt=f((de,Yn)=>{var{MAX_SAFE_COMPONENT_LENGTH:Gs,MAX_SAFE_BUILD_LENGTH:Xh,MAX_LENGTH:Yh}=qt(),Zh=xt();de=Yn.exports={};var Kh=de.re=[],Qh=de.safeRe=[],d=de.src=[],Jh=de.safeSrc=[],m=de.t={},ec=0,Hs="[a-zA-Z0-9-]",tc=[["\\s",1],["\\d",Yh],[Hs,Xh]],ic=i=>{for(let[e,t]of tc)i=i.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return i},E=(i,e,t)=>{let s=ic(e),r=ec++;Zh(i,r,e),m[i]=r,d[r]=e,Jh[r]=s,Kh[r]=new RegExp(e,t?"g":void 0),Qh[r]=new RegExp(s,t?"g":void 0)};E("NUMERICIDENTIFIER","0|[1-9]\\d*");E("NUMERICIDENTIFIERLOOSE","\\d+");E("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Hs}*`);E("MAINVERSION",`(${d[m.NUMERICIDENTIFIER]})\\.(${d[m.NUMERICIDENTIFIER]})\\.(${d[m.NUMERICIDENTIFIER]})`);E("MAINVERSIONLOOSE",`(${d[m.NUMERICIDENTIFIERLOOSE]})\\.(${d[m.NUMERICIDENTIFIERLOOSE]})\\.(${d[m.NUMERICIDENTIFIERLOOSE]})`);E("PRERELEASEIDENTIFIER",`(?:${d[m.NUMERICIDENTIFIER]}|${d[m.NONNUMERICIDENTIFIER]})`);E("PRERELEASEIDENTIFIERLOOSE",`(?:${d[m.NUMERICIDENTIFIERLOOSE]}|${d[m.NONNUMERICIDENTIFIER]})`);E("PRERELEASE",`(?:-(${d[m.PRERELEASEIDENTIFIER]}(?:\\.${d[m.PRERELEASEIDENTIFIER]})*))`);E("PRERELEASELOOSE",`(?:-?(${d[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[m.PRERELEASEIDENTIFIERLOOSE]})*))`);E("BUILDIDENTIFIER",`${Hs}+`);E("BUILD",`(?:\\+(${d[m.BUILDIDENTIFIER]}(?:\\.${d[m.BUILDIDENTIFIER]})*))`);E("FULLPLAIN",`v?${d[m.MAINVERSION]}${d[m.PRERELEASE]}?${d[m.BUILD]}?`);E("FULL",`^${d[m.FULLPLAIN]}$`);E("LOOSEPLAIN",`[v=\\s]*${d[m.MAINVERSIONLOOSE]}${d[m.PRERELEASELOOSE]}?${d[m.BUILD]}?`);E("LOOSE",`^${d[m.LOOSEPLAIN]}$`);E("GTLT","((?:<|>)?=?)");E("XRANGEIDENTIFIERLOOSE",`${d[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);E("XRANGEIDENTIFIER",`${d[m.NUMERICIDENTIFIER]}|x|X|\\*`);E("XRANGEPLAIN",`[v=\\s]*(${d[m.XRANGEIDENTIFIER]})(?:\\.(${d[m.XRANGEIDENTIFIER]})(?:\\.(${d[m.XRANGEIDENTIFIER]})(?:${d[m.PRERELEASE]})?${d[m.BUILD]}?)?)?`);E("XRANGEPLAINLOOSE",`[v=\\s]*(${d[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[m.XRANGEIDENTIFIERLOOSE]})(?:${d[m.PRERELEASELOOSE]})?${d[m.BUILD]}?)?)?`);E("XRANGE",`^${d[m.GTLT]}\\s*${d[m.XRANGEPLAIN]}$`);E("XRANGELOOSE",`^${d[m.GTLT]}\\s*${d[m.XRANGEPLAINLOOSE]}$`);E("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Gs}})(?:\\.(\\d{1,${Gs}}))?(?:\\.(\\d{1,${Gs}}))?`);E("COERCE",`${d[m.COERCEPLAIN]}(?:$|[^\\d])`);E("COERCEFULL",d[m.COERCEPLAIN]+`(?:${d[m.PRERELEASE]})?(?:${d[m.BUILD]})?(?:$|[^\\d])`);E("COERCERTL",d[m.COERCE],!0);E("COERCERTLFULL",d[m.COERCEFULL],!0);E("LONETILDE","(?:~>?)");E("TILDETRIM",`(\\s*)${d[m.LONETILDE]}\\s+`,!0);de.tildeTrimReplace="$1~";E("TILDE",`^${d[m.LONETILDE]}${d[m.XRANGEPLAIN]}$`);E("TILDELOOSE",`^${d[m.LONETILDE]}${d[m.XRANGEPLAINLOOSE]}$`);E("LONECARET","(?:\\^)");E("CARETTRIM",`(\\s*)${d[m.LONECARET]}\\s+`,!0);de.caretTrimReplace="$1^";E("CARET",`^${d[m.LONECARET]}${d[m.XRANGEPLAIN]}$`);E("CARETLOOSE",`^${d[m.LONECARET]}${d[m.XRANGEPLAINLOOSE]}$`);E("COMPARATORLOOSE",`^${d[m.GTLT]}\\s*(${d[m.LOOSEPLAIN]})$|^$`);E("COMPARATOR",`^${d[m.GTLT]}\\s*(${d[m.FULLPLAIN]})$|^$`);E("COMPARATORTRIM",`(\\s*)${d[m.GTLT]}\\s*(${d[m.LOOSEPLAIN]}|${d[m.XRANGEPLAIN]})`,!0);de.comparatorTrimReplace="$1$2$3";E("HYPHENRANGE",`^\\s*(${d[m.XRANGEPLAIN]})\\s+-\\s+(${d[m.XRANGEPLAIN]})\\s*$`);E("HYPHENRANGELOOSE",`^\\s*(${d[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[m.XRANGEPLAINLOOSE]})\\s*$`);E("STAR","(<|>)?=?\\s*\\*");E("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");E("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ei=f((c_,Zn)=>{var sc=Object.freeze({loose:!0}),rc=Object.freeze({}),nc=i=>i?typeof i!="object"?sc:i:rc;Zn.exports=nc});var Vs=f((u_,Jn)=>{var Kn=/^[0-9]+$/,Qn=(i,e)=>{let t=Kn.test(i),s=Kn.test(e);return t&&s&&(i=+i,e=+e),i===e?0:t&&!s?-1:s&&!t?1:i<e?-1:1},oc=(i,e)=>Qn(e,i);Jn.exports={compareIdentifiers:Qn,rcompareIdentifiers:oc}});var M=f((f_,so)=>{var wi=xt(),{MAX_LENGTH:eo,MAX_SAFE_INTEGER:yi}=qt(),{safeRe:to,safeSrc:io,t:Si}=lt(),ac=Ei(),{compareIdentifiers:ht}=Vs(),Xs=class i{constructor(e,t){if(t=ac(t),e instanceof i){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>eo)throw new TypeError(`version is longer than ${eo} characters`);wi("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let s=e.trim().match(t.loose?to[Si.LOOSE]:to[Si.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>yi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>yi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>yi||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){let n=+r;if(n>=0&&n<yi)return n}return r}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(wi("SemVer.compare",this.version,this.options,e),!(e instanceof i)){if(typeof e=="string"&&e===this.version)return 0;e=new i(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof i||(e=new i(e,this.options)),ht(this.major,e.major)||ht(this.minor,e.minor)||ht(this.patch,e.patch)}comparePre(e){if(e instanceof i||(e=new i(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let s=this.prerelease[t],r=e.prerelease[t];if(wi("prerelease compare",t,s,r),s===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(s===void 0)return-1;if(s===r)continue;return ht(s,r)}while(++t)}compareBuild(e){e instanceof i||(e=new i(e,this.options));let t=0;do{let s=this.build[t],r=e.build[t];if(wi("build compare",t,s,r),s===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(s===void 0)return-1;if(s===r)continue;return ht(s,r)}while(++t)}inc(e,t,s){if(e.startsWith("pre")){if(!t&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let r=new RegExp(`^${this.options.loose?io[Si.PRERELEASELOOSE]:io[Si.PRERELEASE]}$`),n=`-${t}`.match(r);if(!n||n[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let r=Number(s)?1:0;if(this.prerelease.length===0)this.prerelease=[r];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);if(n===-1){if(t===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let n=[t,r];s===!1&&(n=[t]),ht(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};so.exports=Xs});var Ve=f((d_,no)=>{var ro=M(),lc=(i,e,t=!1)=>{if(i instanceof ro)return i;try{return new ro(i,e)}catch(s){if(!t)return null;throw s}};no.exports=lc});var ao=f((m_,oo)=>{var hc=Ve(),cc=(i,e)=>{let t=hc(i,e);return t?t.version:null};oo.exports=cc});var ho=f((p_,lo)=>{var uc=Ve(),fc=(i,e)=>{let t=uc(i.trim().replace(/^[=v]+/,""),e);return t?t.version:null};lo.exports=fc});var fo=f((__,uo)=>{var co=M(),dc=(i,e,t,s,r)=>{typeof t=="string"&&(r=s,s=t,t=void 0);try{return new co(i instanceof co?i.version:i,t).inc(e,s,r).version}catch{return null}};uo.exports=dc});var _o=f((E_,po)=>{var mo=Ve(),mc=(i,e)=>{let t=mo(i,null,!0),s=mo(e,null,!0),r=t.compare(s);if(r===0)return null;let n=r>0,o=n?t:s,a=n?s:t,l=!!o.prerelease.length;if(!!a.prerelease.length&&!l){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let c=l?"pre":"";return t.major!==s.major?c+"major":t.minor!==s.minor?c+"minor":t.patch!==s.patch?c+"patch":"prerelease"};po.exports=mc});var wo=f((w_,Eo)=>{var pc=M(),_c=(i,e)=>new pc(i,e).major;Eo.exports=_c});var So=f((y_,yo)=>{var Ec=M(),wc=(i,e)=>new Ec(i,e).minor;yo.exports=wc});var go=f((S_,Ro)=>{var yc=M(),Sc=(i,e)=>new yc(i,e).patch;Ro.exports=Sc});var bo=f((R_,Oo)=>{var Rc=Ve(),gc=(i,e)=>{let t=Rc(i,e);return t&&t.prerelease.length?t.prerelease:null};Oo.exports=gc});var K=f((g_,No)=>{var vo=M(),Oc=(i,e,t)=>new vo(i,t).compare(new vo(e,t));No.exports=Oc});var Io=f((O_,To)=>{var bc=K(),vc=(i,e,t)=>bc(e,i,t);To.exports=vc});var Lo=f((b_,Ao)=>{var Nc=K(),Tc=(i,e)=>Nc(i,e,!0);Ao.exports=Tc});var Ri=f((v_,Do)=>{var Po=M(),Ic=(i,e,t)=>{let s=new Po(i,t),r=new Po(e,t);return s.compare(r)||s.compareBuild(r)};Do.exports=Ic});var Co=f((N_,Mo)=>{var Ac=Ri(),Lc=(i,e)=>i.sort((t,s)=>Ac(t,s,e));Mo.exports=Lc});var ko=f((T_,Fo)=>{var Pc=Ri(),Dc=(i,e)=>i.sort((t,s)=>Pc(s,t,e));Fo.exports=Dc});var $t=f((I_,qo)=>{var Mc=K(),Cc=(i,e,t)=>Mc(i,e,t)>0;qo.exports=Cc});var gi=f((A_,xo)=>{var Fc=K(),kc=(i,e,t)=>Fc(i,e,t)<0;xo.exports=kc});var Ys=f((L_,$o)=>{var qc=K(),xc=(i,e,t)=>qc(i,e,t)===0;$o.exports=xc});var Zs=f((P_,Bo)=>{var $c=K(),Bc=(i,e,t)=>$c(i,e,t)!==0;Bo.exports=Bc});var Oi=f((D_,jo)=>{var jc=K(),Uc=(i,e,t)=>jc(i,e,t)>=0;jo.exports=Uc});var bi=f((M_,Uo)=>{var zc=K(),Wc=(i,e,t)=>zc(i,e,t)<=0;Uo.exports=Wc});var Ks=f((C_,zo)=>{var Gc=Ys(),Hc=Zs(),Vc=$t(),Xc=Oi(),Yc=gi(),Zc=bi(),Kc=(i,e,t,s)=>{switch(e){case"===":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i===t;case"!==":return typeof i=="object"&&(i=i.version),typeof t=="object"&&(t=t.version),i!==t;case"":case"=":case"==":return Gc(i,t,s);case"!=":return Hc(i,t,s);case">":return Vc(i,t,s);case">=":return Xc(i,t,s);case"<":return Yc(i,t,s);case"<=":return Zc(i,t,s);default:throw new TypeError(`Invalid operator: ${e}`)}};zo.exports=Kc});var Go=f((F_,Wo)=>{var Qc=M(),Jc=Ve(),{safeRe:vi,t:Ni}=lt(),eu=(i,e)=>{if(i instanceof Qc)return i;if(typeof i=="number"&&(i=String(i)),typeof i!="string")return null;e=e||{};let t=null;if(!e.rtl)t=i.match(e.includePrerelease?vi[Ni.COERCEFULL]:vi[Ni.COERCE]);else{let l=e.includePrerelease?vi[Ni.COERCERTLFULL]:vi[Ni.COERCERTL],h;for(;(h=l.exec(i))&&(!t||t.index+t[0].length!==i.length);)(!t||h.index+h[0].length!==t.index+t[0].length)&&(t=h),l.lastIndex=h.index+h[1].length+h[2].length;l.lastIndex=-1}if(t===null)return null;let s=t[2],r=t[3]||"0",n=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return Jc(`${s}.${r}.${n}${o}${a}`,e)};Wo.exports=eu});var Vo=f((k_,Ho)=>{var Qs=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let r=this.map.keys().next().value;this.delete(r)}this.map.set(e,t)}return this}};Ho.exports=Qs});var Q=f((q_,Ko)=>{var tu=/\s+/g,Js=class i{constructor(e,t){if(t=su(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof er)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(tu," "),this.set=this.raw.split("||").map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(r=>!Yo(r[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let r of this.set)if(r.length===1&&cu(r[0])){this.set=[r];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let s=0;s<t.length;s++)s>0&&(this.formatted+=" "),this.formatted+=t[s].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let s=((this.options.includePrerelease&&lu)|(this.options.loose&&hu))+":"+e,r=Xo.get(s);if(r)return r;let n=this.options.loose,o=n?G[x.HYPHENRANGELOOSE]:G[x.HYPHENRANGE];e=e.replace(o,Su(this.options.includePrerelease)),b("hyphen replace",e),e=e.replace(G[x.COMPARATORTRIM],nu),b("comparator trim",e),e=e.replace(G[x.TILDETRIM],ou),b("tilde trim",e),e=e.replace(G[x.CARETTRIM],au),b("caret trim",e);let a=e.split(" ").map(u=>uu(u,this.options)).join(" ").split(/\s+/).map(u=>yu(u,this.options));n&&(a=a.filter(u=>(b("loose invalid filter",u,this.options),!!u.match(G[x.COMPARATORLOOSE])))),b("range list",a);let l=new Map,h=a.map(u=>new er(u,this.options));for(let u of h){if(Yo(u))return[u];l.set(u.value,u)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return Xo.set(s,c),c}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some(s=>Zo(s,t)&&e.set.some(r=>Zo(r,t)&&s.every(n=>r.every(o=>n.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new ru(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Ru(this.set[t],e,this.options))return!0;return!1}};Ko.exports=Js;var iu=Vo(),Xo=new iu,su=Ei(),er=Bt(),b=xt(),ru=M(),{safeRe:G,t:x,comparatorTrimReplace:nu,tildeTrimReplace:ou,caretTrimReplace:au}=lt(),{FLAG_INCLUDE_PRERELEASE:lu,FLAG_LOOSE:hu}=qt(),Yo=i=>i.value==="<0.0.0-0",cu=i=>i.value==="",Zo=(i,e)=>{let t=!0,s=i.slice(),r=s.pop();for(;t&&s.length;)t=s.every(n=>r.intersects(n,e)),r=s.pop();return t},uu=(i,e)=>(b("comp",i,e),i=mu(i,e),b("caret",i),i=fu(i,e),b("tildes",i),i=_u(i,e),b("xrange",i),i=wu(i,e),b("stars",i),i),$=i=>!i||i.toLowerCase()==="x"||i==="*",fu=(i,e)=>i.trim().split(/\s+/).map(t=>du(t,e)).join(" "),du=(i,e)=>{let t=e.loose?G[x.TILDELOOSE]:G[x.TILDE];return i.replace(t,(s,r,n,o,a)=>{b("tilde",i,s,r,n,o,a);let l;return $(r)?l="":$(n)?l=`>=${r}.0.0 <${+r+1}.0.0-0`:$(o)?l=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:a?(b("replaceTilde pr",a),l=`>=${r}.${n}.${o}-${a} <${r}.${+n+1}.0-0`):l=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,b("tilde return",l),l})},mu=(i,e)=>i.trim().split(/\s+/).map(t=>pu(t,e)).join(" "),pu=(i,e)=>{b("caret",i,e);let t=e.loose?G[x.CARETLOOSE]:G[x.CARET],s=e.includePrerelease?"-0":"";return i.replace(t,(r,n,o,a,l)=>{b("caret",i,r,n,o,a,l);let h;return $(n)?h="":$(o)?h=`>=${n}.0.0${s} <${+n+1}.0.0-0`:$(a)?n==="0"?h=`>=${n}.${o}.0${s} <${n}.${+o+1}.0-0`:h=`>=${n}.${o}.0${s} <${+n+1}.0.0-0`:l?(b("replaceCaret pr",l),n==="0"?o==="0"?h=`>=${n}.${o}.${a}-${l} <${n}.${o}.${+a+1}-0`:h=`>=${n}.${o}.${a}-${l} <${n}.${+o+1}.0-0`:h=`>=${n}.${o}.${a}-${l} <${+n+1}.0.0-0`):(b("no pr"),n==="0"?o==="0"?h=`>=${n}.${o}.${a}${s} <${n}.${o}.${+a+1}-0`:h=`>=${n}.${o}.${a}${s} <${n}.${+o+1}.0-0`:h=`>=${n}.${o}.${a} <${+n+1}.0.0-0`),b("caret return",h),h})},_u=(i,e)=>(b("replaceXRanges",i,e),i.split(/\s+/).map(t=>Eu(t,e)).join(" ")),Eu=(i,e)=>{i=i.trim();let t=e.loose?G[x.XRANGELOOSE]:G[x.XRANGE];return i.replace(t,(s,r,n,o,a,l)=>{b("xRange",i,s,r,n,o,a,l);let h=$(n),c=h||$(o),u=c||$(a),_=u;return r==="="&&_&&(r=""),l=e.includePrerelease?"-0":"",h?r===">"||r==="<"?s="<0.0.0-0":s="*":r&&_?(c&&(o=0),a=0,r===">"?(r=">=",c?(n=+n+1,o=0,a=0):(o=+o+1,a=0)):r==="<="&&(r="<",c?n=+n+1:o=+o+1),r==="<"&&(l="-0"),s=`${r+n}.${o}.${a}${l}`):c?s=`>=${n}.0.0${l} <${+n+1}.0.0-0`:u&&(s=`>=${n}.${o}.0${l} <${n}.${+o+1}.0-0`),b("xRange return",s),s})},wu=(i,e)=>(b("replaceStars",i,e),i.trim().replace(G[x.STAR],"")),yu=(i,e)=>(b("replaceGTE0",i,e),i.trim().replace(G[e.includePrerelease?x.GTE0PRE:x.GTE0],"")),Su=i=>(e,t,s,r,n,o,a,l,h,c,u,_)=>($(s)?t="":$(r)?t=`>=${s}.0.0${i?"-0":""}`:$(n)?t=`>=${s}.${r}.0${i?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${i?"-0":""}`,$(h)?l="":$(c)?l=`<${+h+1}.0.0-0`:$(u)?l=`<${h}.${+c+1}.0-0`:_?l=`<=${h}.${c}.${u}-${_}`:i?l=`<${h}.${c}.${+u+1}-0`:l=`<=${l}`,`${t} ${l}`.trim()),Ru=(i,e,t)=>{for(let s=0;s<i.length;s++)if(!i[s].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let s=0;s<i.length;s++)if(b(i[s].semver),i[s].semver!==er.ANY&&i[s].semver.prerelease.length>0){let r=i[s].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0}});var Bt=f((x_,sa)=>{var jt=Symbol("SemVer ANY"),sr=class i{static get ANY(){return jt}constructor(e,t){if(t=Qo(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),ir("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===jt?this.value="":this.value=this.operator+this.semver.version,ir("comp",this)}parse(e){let t=this.options.loose?Jo[ea.COMPARATORLOOSE]:Jo[ea.COMPARATOR],s=e.match(t);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new ta(s[2],this.options.loose):this.semver=jt}toString(){return this.value}test(e){if(ir("Comparator.test",e,this.options.loose),this.semver===jt||e===jt)return!0;if(typeof e=="string")try{e=new ta(e,this.options)}catch{return!1}return tr(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new ia(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new ia(this.value,t).test(e.semver):(t=Qo(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||tr(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||tr(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};sa.exports=sr;var Qo=Ei(),{safeRe:Jo,t:ea}=lt(),tr=Ks(),ir=xt(),ta=M(),ia=Q()});var Ut=f(($_,ra)=>{var gu=Q(),Ou=(i,e,t)=>{try{e=new gu(e,t)}catch{return!1}return e.test(i)};ra.exports=Ou});var oa=f((B_,na)=>{var bu=Q(),vu=(i,e)=>new bu(i,e).set.map(t=>t.map(s=>s.value).join(" ").trim().split(" "));na.exports=vu});var la=f((j_,aa)=>{var Nu=M(),Tu=Q(),Iu=(i,e,t)=>{let s=null,r=null,n=null;try{n=new Tu(e,t)}catch{return null}return i.forEach(o=>{n.test(o)&&(!s||r.compare(o)===-1)&&(s=o,r=new Nu(s,t))}),s};aa.exports=Iu});var ca=f((U_,ha)=>{var Au=M(),Lu=Q(),Pu=(i,e,t)=>{let s=null,r=null,n=null;try{n=new Lu(e,t)}catch{return null}return i.forEach(o=>{n.test(o)&&(!s||r.compare(o)===1)&&(s=o,r=new Au(s,t))}),s};ha.exports=Pu});var da=f((z_,fa)=>{var rr=M(),Du=Q(),ua=$t(),Mu=(i,e)=>{i=new Du(i,e);let t=new rr("0.0.0");if(i.test(t)||(t=new rr("0.0.0-0"),i.test(t)))return t;t=null;for(let s=0;s<i.set.length;++s){let r=i.set[s],n=null;r.forEach(o=>{let a=new rr(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!n||ua(a,n))&&(n=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),n&&(!t||ua(t,n))&&(t=n)}return t&&i.test(t)?t:null};fa.exports=Mu});var pa=f((W_,ma)=>{var Cu=Q(),Fu=(i,e)=>{try{return new Cu(i,e).range||"*"}catch{return null}};ma.exports=Fu});var Ti=f((G_,ya)=>{var ku=M(),wa=Bt(),{ANY:qu}=wa,xu=Q(),$u=Ut(),_a=$t(),Ea=gi(),Bu=bi(),ju=Oi(),Uu=(i,e,t,s)=>{i=new ku(i,s),e=new xu(e,s);let r,n,o,a,l;switch(t){case">":r=_a,n=Bu,o=Ea,a=">",l=">=";break;case"<":r=Ea,n=ju,o=_a,a="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($u(i,e,s))return!1;for(let h=0;h<e.set.length;++h){let c=e.set[h],u=null,_=null;if(c.forEach(p=>{p.semver===qu&&(p=new wa(">=0.0.0")),u=u||p,_=_||p,r(p.semver,u.semver,s)?u=p:o(p.semver,_.semver,s)&&(_=p)}),u.operator===a||u.operator===l||(!_.operator||_.operator===a)&&n(i,_.semver))return!1;if(_.operator===l&&o(i,_.semver))return!1}return!0};ya.exports=Uu});var Ra=f((H_,Sa)=>{var zu=Ti(),Wu=(i,e,t)=>zu(i,e,">",t);Sa.exports=Wu});var Oa=f((V_,ga)=>{var Gu=Ti(),Hu=(i,e,t)=>Gu(i,e,"<",t);ga.exports=Hu});var Na=f((X_,va)=>{var ba=Q(),Vu=(i,e,t)=>(i=new ba(i,t),e=new ba(e,t),i.intersects(e,t));va.exports=Vu});var Ia=f((Y_,Ta)=>{var Xu=Ut(),Yu=K();Ta.exports=(i,e,t)=>{let s=[],r=null,n=null,o=i.sort((c,u)=>Yu(c,u,t));for(let c of o)Xu(c,e,t)?(n=c,r||(r=c)):(n&&s.push([r,n]),n=null,r=null);r&&s.push([r,null]);let a=[];for(let[c,u]of s)c===u?a.push(c):!u&&c===o[0]?a.push("*"):u?c===o[0]?a.push(`<=${u}`):a.push(`${c} - ${u}`):a.push(`>=${c}`);let l=a.join(" || "),h=typeof e.raw=="string"?e.raw:String(e);return l.length<h.length?l:e}});var Ca=f((Z_,Ma)=>{var Aa=Q(),or=Bt(),{ANY:nr}=or,zt=Ut(),ar=K(),Zu=(i,e,t={})=>{if(i===e)return!0;i=new Aa(i,t),e=new Aa(e,t);let s=!1;e:for(let r of i.set){for(let n of e.set){let o=Qu(r,n,t);if(s=s||o!==null,o)continue e}if(s)return!1}return!0},Ku=[new or(">=0.0.0-0")],La=[new or(">=0.0.0")],Qu=(i,e,t)=>{if(i===e)return!0;if(i.length===1&&i[0].semver===nr){if(e.length===1&&e[0].semver===nr)return!0;t.includePrerelease?i=Ku:i=La}if(e.length===1&&e[0].semver===nr){if(t.includePrerelease)return!0;e=La}let s=new Set,r,n;for(let p of i)p.operator===">"||p.operator===">="?r=Pa(r,p,t):p.operator==="<"||p.operator==="<="?n=Da(n,p,t):s.add(p.semver);if(s.size>1)return null;let o;if(r&&n){if(o=ar(r.semver,n.semver,t),o>0)return null;if(o===0&&(r.operator!==">="||n.operator!=="<="))return null}for(let p of s){if(r&&!zt(p,String(r),t)||n&&!zt(p,String(n),t))return null;for(let z of e)if(!zt(p,String(z),t))return!1;return!0}let a,l,h,c,u=n&&!t.includePrerelease&&n.semver.prerelease.length?n.semver:!1,_=r&&!t.includePrerelease&&r.semver.prerelease.length?r.semver:!1;u&&u.prerelease.length===1&&n.operator==="<"&&u.prerelease[0]===0&&(u=!1);for(let p of e){if(c=c||p.operator===">"||p.operator===">=",h=h||p.operator==="<"||p.operator==="<=",r){if(_&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===_.major&&p.semver.minor===_.minor&&p.semver.patch===_.patch&&(_=!1),p.operator===">"||p.operator===">="){if(a=Pa(r,p,t),a===p&&a!==r)return!1}else if(r.operator===">="&&!zt(r.semver,String(p),t))return!1}if(n){if(u&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===u.major&&p.semver.minor===u.minor&&p.semver.patch===u.patch&&(u=!1),p.operator==="<"||p.operator==="<="){if(l=Da(n,p,t),l===p&&l!==n)return!1}else if(n.operator==="<="&&!zt(n.semver,String(p),t))return!1}if(!p.operator&&(n||r)&&o!==0)return!1}return!(r&&h&&!n&&o!==0||n&&c&&!r&&o!==0||_||u)},Pa=(i,e,t)=>{if(!i)return e;let s=ar(i.semver,e.semver,t);return s>0?i:s<0||e.operator===">"&&i.operator===">="?e:i},Da=(i,e,t)=>{if(!i)return e;let s=ar(i.semver,e.semver,t);return s<0?i:s>0||e.operator==="<"&&i.operator==="<="?e:i};Ma.exports=Zu});var xa=f((K_,qa)=>{var lr=lt(),Fa=qt(),Ju=M(),ka=Vs(),ef=Ve(),tf=ao(),sf=ho(),rf=fo(),nf=_o(),of=wo(),af=So(),lf=go(),hf=bo(),cf=K(),uf=Io(),ff=Lo(),df=Ri(),mf=Co(),pf=ko(),_f=$t(),Ef=gi(),wf=Ys(),yf=Zs(),Sf=Oi(),Rf=bi(),gf=Ks(),Of=Go(),bf=Bt(),vf=Q(),Nf=Ut(),Tf=oa(),If=la(),Af=ca(),Lf=da(),Pf=pa(),Df=Ti(),Mf=Ra(),Cf=Oa(),Ff=Na(),kf=Ia(),qf=Ca();qa.exports={parse:ef,valid:tf,clean:sf,inc:rf,diff:nf,major:of,minor:af,patch:lf,prerelease:hf,compare:cf,rcompare:uf,compareLoose:ff,compareBuild:df,sort:mf,rsort:pf,gt:_f,lt:Ef,eq:wf,neq:yf,gte:Sf,lte:Rf,cmp:gf,coerce:Of,Comparator:bf,Range:vf,satisfies:Nf,toComparators:Tf,maxSatisfying:If,minSatisfying:Af,minVersion:Lf,validRange:Pf,outside:Df,gtr:Mf,ltr:Cf,intersects:Ff,simplifyRange:kf,subset:qf,SemVer:Ju,re:lr.re,src:lr.src,tokens:lr.t,SEMVER_SPEC_VERSION:Fa.SEMVER_SPEC_VERSION,RELEASE_TYPES:Fa.RELEASE_TYPES,compareIdentifiers:ka.compareIdentifiers,rcompareIdentifiers:ka.rcompareIdentifiers}});var ft=f(j=>{"use strict";var xf=j&&j.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(j,"__esModule",{value:!0});j.Minipass=j.isWritable=j.isReadable=j.isStream=void 0;var $a=typeof process=="object"&&process?process:{stdout:null,stderr:null},pr=require("node:events"),za=xf(require("node:stream")),$f=require("node:string_decoder"),Bf=i=>!!i&&typeof i=="object"&&(i instanceof Ci||i instanceof za.default||(0,j.isReadable)(i)||(0,j.isWritable)(i));j.isStream=Bf;var jf=i=>!!i&&typeof i=="object"&&i instanceof pr.EventEmitter&&typeof i.pipe=="function"&&i.pipe!==za.default.Writable.prototype.pipe;j.isReadable=jf;var Uf=i=>!!i&&typeof i=="object"&&i instanceof pr.EventEmitter&&typeof i.write=="function"&&typeof i.end=="function";j.isWritable=Uf;var Oe=Symbol("EOF"),be=Symbol("maybeEmitEnd"),Le=Symbol("emittedEnd"),Ii=Symbol("emittingEnd"),Wt=Symbol("emittedError"),Ai=Symbol("closed"),Ba=Symbol("read"),Li=Symbol("flush"),ja=Symbol("flushChunk"),oe=Symbol("encoding"),ct=Symbol("decoder"),L=Symbol("flowing"),Gt=Symbol("paused"),ut=Symbol("resume"),P=Symbol("buffer"),B=Symbol("pipes"),D=Symbol("bufferLength"),hr=Symbol("bufferPush"),Pi=Symbol("bufferShift"),C=Symbol("objectMode"),v=Symbol("destroyed"),cr=Symbol("error"),ur=Symbol("emitData"),Ua=Symbol("emitEnd"),fr=Symbol("emitEnd2"),me=Symbol("async"),dr=Symbol("abort"),Di=Symbol("aborted"),Ht=Symbol("signal"),Xe=Symbol("dataListeners"),X=Symbol("discarded"),Vt=i=>Promise.resolve().then(i),zf=i=>i(),Wf=i=>i==="end"||i==="finish"||i==="prefinish",Gf=i=>i instanceof ArrayBuffer||!!i&&typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,Hf=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),Mi=class{src;dest;opts;ondrain;constructor(e,t,s){this.src=e,this.dest=t,this.opts=s,this.ondrain=()=>e[ut](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},mr=class extends Mi{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,s){super(e,t,s),this.proxyErrors=r=>t.emit("error",r),e.on("error",this.proxyErrors)}},Vf=i=>!!i.objectMode,Xf=i=>!i.objectMode&&!!i.encoding&&i.encoding!=="buffer",Ci=class extends pr.EventEmitter{[L]=!1;[Gt]=!1;[B]=[];[P]=[];[C];[oe];[me];[ct];[Oe]=!1;[Le]=!1;[Ii]=!1;[Ai]=!1;[Wt]=null;[D]=0;[v]=!1;[Ht];[Di]=!1;[Xe]=0;[X]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Vf(t)?(this[C]=!0,this[oe]=null):Xf(t)?(this[oe]=t.encoding,this[C]=!1):(this[C]=!1,this[oe]=null),this[me]=!!t.async,this[ct]=this[oe]?new $f.StringDecoder(this[oe]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[P]}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[B]});let{signal:s}=t;s&&(this[Ht]=s,s.aborted?this[dr]():s.addEventListener("abort",()=>this[dr]()))}get bufferLength(){return this[D]}get encoding(){return this[oe]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[C]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[me]}set async(e){this[me]=this[me]||!!e}[dr](){this[Di]=!0,this.emit("abort",this[Ht]?.reason),this.destroy(this[Ht]?.reason)}get aborted(){return this[Di]}set aborted(e){}write(e,t,s){if(this[Di])return!1;if(this[Oe])throw new Error("write after end");if(this[v])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(s=t,t="utf8"),t||(t="utf8");let r=this[me]?Vt:zf;if(!this[C]&&!Buffer.isBuffer(e)){if(Hf(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(Gf(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[C]?(this[L]&&this[D]!==0&&this[Li](!0),this[L]?this.emit("data",e):this[hr](e),this[D]!==0&&this.emit("readable"),s&&r(s),this[L]):e.length?(typeof e=="string"&&!(t===this[oe]&&!this[ct]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[oe]&&(e=this[ct].write(e)),this[L]&&this[D]!==0&&this[Li](!0),this[L]?this.emit("data",e):this[hr](e),this[D]!==0&&this.emit("readable"),s&&r(s),this[L]):(this[D]!==0&&this.emit("readable"),s&&r(s),this[L])}read(e){if(this[v])return null;if(this[X]=!1,this[D]===0||e===0||e&&e>this[D])return this[be](),null;this[C]&&(e=null),this[P].length>1&&!this[C]&&(this[P]=[this[oe]?this[P].join(""):Buffer.concat(this[P],this[D])]);let t=this[Ba](e||null,this[P][0]);return this[be](),t}[Ba](e,t){if(this[C])this[Pi]();else{let s=t;e===s.length||e===null?this[Pi]():typeof s=="string"?(this[P][0]=s.slice(e),t=s.slice(0,e),this[D]-=e):(this[P][0]=s.subarray(e),t=s.subarray(0,e),this[D]-=e)}return this.emit("data",t),!this[P].length&&!this[Oe]&&this.emit("drain"),t}end(e,t,s){return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t="utf8"),e!==void 0&&this.write(e,t),s&&this.once("end",s),this[Oe]=!0,this.writable=!1,(this[L]||!this[Gt])&&this[be](),this}[ut](){this[v]||(!this[Xe]&&!this[B].length&&(this[X]=!0),this[Gt]=!1,this[L]=!0,this.emit("resume"),this[P].length?this[Li]():this[Oe]?this[be]():this.emit("drain"))}resume(){return this[ut]()}pause(){this[L]=!1,this[Gt]=!0,this[X]=!1}get destroyed(){return this[v]}get flowing(){return this[L]}get paused(){return this[Gt]}[hr](e){this[C]?this[D]+=1:this[D]+=e.length,this[P].push(e)}[Pi](){return this[C]?this[D]-=1:this[D]-=this[P][0].length,this[P].shift()}[Li](e=!1){do;while(this[ja](this[Pi]())&&this[P].length);!e&&!this[P].length&&!this[Oe]&&this.emit("drain")}[ja](e){return this.emit("data",e),this[L]}pipe(e,t){if(this[v])return e;this[X]=!1;let s=this[Le];return t=t||{},e===$a.stdout||e===$a.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,s?t.end&&e.end():(this[B].push(t.proxyErrors?new mr(this,e,t):new Mi(this,e,t)),this[me]?Vt(()=>this[ut]()):this[ut]()),e}unpipe(e){let t=this[B].find(s=>s.dest===e);t&&(this[B].length===1?(this[L]&&this[Xe]===0&&(this[L]=!1),this[B]=[]):this[B].splice(this[B].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let s=super.on(e,t);if(e==="data")this[X]=!1,this[Xe]++,!this[B].length&&!this[L]&&this[ut]();else if(e==="readable"&&this[D]!==0)super.emit("readable");else if(Wf(e)&&this[Le])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Wt]){let r=t;this[me]?Vt(()=>r.call(this,this[Wt])):r.call(this,this[Wt])}return s}removeListener(e,t){return this.off(e,t)}off(e,t){let s=super.off(e,t);return e==="data"&&(this[Xe]=this.listeners("data").length,this[Xe]===0&&!this[X]&&!this[B].length&&(this[L]=!1)),s}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Xe]=0,!this[X]&&!this[B].length&&(this[L]=!1)),t}get emittedEnd(){return this[Le]}[be](){!this[Ii]&&!this[Le]&&!this[v]&&this[P].length===0&&this[Oe]&&(this[Ii]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ai]&&this.emit("close"),this[Ii]=!1)}emit(e,...t){let s=t[0];if(e!=="error"&&e!=="close"&&e!==v&&this[v])return!1;if(e==="data")return!this[C]&&!s?!1:this[me]?(Vt(()=>this[ur](s)),!0):this[ur](s);if(e==="end")return this[Ua]();if(e==="close"){if(this[Ai]=!0,!this[Le]&&!this[v])return!1;let n=super.emit("close");return this.removeAllListeners("close"),n}else if(e==="error"){this[Wt]=s,super.emit(cr,s);let n=!this[Ht]||this.listeners("error").length?super.emit("error",s):!1;return this[be](),n}else if(e==="resume"){let n=super.emit("resume");return this[be](),n}else if(e==="finish"||e==="prefinish"){let n=super.emit(e);return this.removeAllListeners(e),n}let r=super.emit(e,...t);return this[be](),r}[ur](e){for(let s of this[B])s.dest.write(e)===!1&&this.pause();let t=this[X]?!1:super.emit("data",e);return this[be](),t}[Ua](){return this[Le]?!1:(this[Le]=!0,this.readable=!1,this[me]?(Vt(()=>this[fr]()),!0):this[fr]())}[fr](){if(this[ct]){let t=this[ct].end();if(t){for(let s of this[B])s.dest.write(t);this[X]||super.emit("data",t)}}for(let t of this[B])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[C]||(e.dataLength=0);let t=this.promise();return this.on("data",s=>{e.push(s),this[C]||(e.dataLength+=s.length)}),await t,e}async concat(){if(this[C])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[oe]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(v,()=>t(new Error("stream destroyed"))),this.on("error",s=>t(s)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[X]=!1;let e=!1,t=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return t();let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[Oe])return t();let n,o,a=u=>{this.off("data",l),this.off("end",h),this.off(v,c),t(),o(u)},l=u=>{this.off("error",a),this.off("end",h),this.off(v,c),this.pause(),n({value:u,done:!!this[Oe]})},h=()=>{this.off("error",a),this.off("data",l),this.off(v,c),t(),n({done:!0,value:void 0})},c=()=>a(new Error("stream destroyed"));return new Promise((u,_)=>{o=_,n=u,this.once(v,c),this.once("error",a),this.once("end",h),this.once("data",l)})},throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[X]=!1;let e=!1,t=()=>(this.pause(),this.off(cr,t),this.off(v,t),this.off("end",t),e=!0,{done:!0,value:void 0}),s=()=>{if(e)return t();let r=this.read();return r===null?t():{done:!1,value:r}};return this.once("end",t),this.once(cr,t),this.once(v,t),{next:s,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[v])return e?this.emit("error",e):this.emit(v),this;this[v]=!0,this[X]=!0,this[P].length=0,this[D]=0;let t=this;return typeof t.close=="function"&&!this[Ai]&&t.close(),e?this.emit("error",e):this.emit(v),this}static get isStream(){return j.isStream}};j.Minipass=Ci});var Et=f(J=>{"use strict";var Wa=J&&J.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(J,"__esModule",{value:!0});J.WriteStreamSync=J.WriteStream=J.ReadStreamSync=J.ReadStream=void 0;var Yf=Wa(require("events")),H=Wa(require("fs")),Zf=ft(),Kf=H.default.writev,De=Symbol("_autoClose"),le=Symbol("_close"),Xt=Symbol("_ended"),R=Symbol("_fd"),_r=Symbol("_finished"),Ne=Symbol("_flags"),Er=Symbol("_flush"),Rr=Symbol("_handleChunk"),gr=Symbol("_makeBuf"),Zt=Symbol("_mode"),Fi=Symbol("_needDrain"),pt=Symbol("_onerror"),_t=Symbol("_onopen"),wr=Symbol("_onread"),dt=Symbol("_onwrite"),Me=Symbol("_open"),ae=Symbol("_path"),Pe=Symbol("_pos"),pe=Symbol("_queue"),mt=Symbol("_read"),yr=Symbol("_readSize"),ve=Symbol("_reading"),Yt=Symbol("_remain"),Sr=Symbol("_size"),ki=Symbol("_write"),Ye=Symbol("_writing"),qi=Symbol("_defaultFlag"),Ze=Symbol("_errored"),xi=class extends Zf.Minipass{[Ze]=!1;[R];[ae];[yr];[ve]=!1;[Sr];[Yt];[De];constructor(e,t){if(t=t||{},super(t),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Ze]=!1,this[R]=typeof t.fd=="number"?t.fd:void 0,this[ae]=e,this[yr]=t.readSize||16*1024*1024,this[ve]=!1,this[Sr]=typeof t.size=="number"?t.size:1/0,this[Yt]=this[Sr],this[De]=typeof t.autoClose=="boolean"?t.autoClose:!0,typeof this[R]=="number"?this[mt]():this[Me]()}get fd(){return this[R]}get path(){return this[ae]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Me](){H.default.open(this[ae],"r",(e,t)=>this[_t](e,t))}[_t](e,t){e?this[pt](e):(this[R]=t,this.emit("open",t),this[mt]())}[gr](){return Buffer.allocUnsafe(Math.min(this[yr],this[Yt]))}[mt](){if(!this[ve]){this[ve]=!0;let e=this[gr]();if(e.length===0)return process.nextTick(()=>this[wr](null,0,e));H.default.read(this[R],e,0,e.length,null,(t,s,r)=>this[wr](t,s,r))}}[wr](e,t,s){this[ve]=!1,e?this[pt](e):this[Rr](t,s)&&this[mt]()}[le](){if(this[De]&&typeof this[R]=="number"){let e=this[R];this[R]=void 0,H.default.close(e,t=>t?this.emit("error",t):this.emit("close"))}}[pt](e){this[ve]=!0,this[le](),this.emit("error",e)}[Rr](e,t){let s=!1;return this[Yt]-=e,e>0&&(s=super.write(e<t.length?t.subarray(0,e):t)),(e===0||this[Yt]<=0)&&(s=!1,this[le](),super.end()),s}emit(e,...t){switch(e){case"prefinish":case"finish":return!1;case"drain":return typeof this[R]=="number"&&this[mt](),!1;case"error":return this[Ze]?!1:(this[Ze]=!0,super.emit(e,...t));default:return super.emit(e,...t)}}};J.ReadStream=xi;var Or=class extends xi{[Me](){let e=!0;try{this[_t](null,H.default.openSync(this[ae],"r")),e=!1}finally{e&&this[le]()}}[mt](){let e=!0;try{if(!this[ve]){this[ve]=!0;do{let t=this[gr](),s=t.length===0?0:H.default.readSync(this[R],t,0,t.length,null);if(!this[Rr](s,t))break}while(!0);this[ve]=!1}e=!1}finally{e&&this[le]()}}[le](){if(this[De]&&typeof this[R]=="number"){let e=this[R];this[R]=void 0,H.default.closeSync(e),this.emit("close")}}};J.ReadStreamSync=Or;var $i=class extends Yf.default{readable=!1;writable=!0;[Ze]=!1;[Ye]=!1;[Xt]=!1;[pe]=[];[Fi]=!1;[ae];[Zt];[De];[R];[qi];[Ne];[_r]=!1;[Pe];constructor(e,t){t=t||{},super(t),this[ae]=e,this[R]=typeof t.fd=="number"?t.fd:void 0,this[Zt]=t.mode===void 0?438:t.mode,this[Pe]=typeof t.start=="number"?t.start:void 0,this[De]=typeof t.autoClose=="boolean"?t.autoClose:!0;let s=this[Pe]!==void 0?"r+":"w";this[qi]=t.flags===void 0,this[Ne]=t.flags===void 0?s:t.flags,this[R]===void 0&&this[Me]()}emit(e,...t){if(e==="error"){if(this[Ze])return!1;this[Ze]=!0}return super.emit(e,...t)}get fd(){return this[R]}get path(){return this[ae]}[pt](e){this[le](),this[Ye]=!0,this.emit("error",e)}[Me](){H.default.open(this[ae],this[Ne],this[Zt],(e,t)=>this[_t](e,t))}[_t](e,t){this[qi]&&this[Ne]==="r+"&&e&&e.code==="ENOENT"?(this[Ne]="w",this[Me]()):e?this[pt](e):(this[R]=t,this.emit("open",t),this[Ye]||this[Er]())}end(e,t){return e&&this.write(e,t),this[Xt]=!0,!this[Ye]&&!this[pe].length&&typeof this[R]=="number"&&this[dt](null,0),this}write(e,t){return typeof e=="string"&&(e=Buffer.from(e,t)),this[Xt]?(this.emit("error",new Error("write() after end()")),!1):this[R]===void 0||this[Ye]||this[pe].length?(this[pe].push(e),this[Fi]=!0,!1):(this[Ye]=!0,this[ki](e),!0)}[ki](e){H.default.write(this[R],e,0,e.length,this[Pe],(t,s)=>this[dt](t,s))}[dt](e,t){e?this[pt](e):(this[Pe]!==void 0&&typeof t=="number"&&(this[Pe]+=t),this[pe].length?this[Er]():(this[Ye]=!1,this[Xt]&&!this[_r]?(this[_r]=!0,this[le](),this.emit("finish")):this[Fi]&&(this[Fi]=!1,this.emit("drain"))))}[Er](){if(this[pe].length===0)this[Xt]&&this[dt](null,0);else if(this[pe].length===1)this[ki](this[pe].pop());else{let e=this[pe];this[pe]=[],Kf(this[R],e,this[Pe],(t,s)=>this[dt](t,s))}}[le](){if(this[De]&&typeof this[R]=="number"){let e=this[R];this[R]=void 0,H.default.close(e,t=>t?this.emit("error",t):this.emit("close"))}}};J.WriteStream=$i;var br=class extends $i{[Me](){let e;if(this[qi]&&this[Ne]==="r+")try{e=H.default.openSync(this[ae],this[Ne],this[Zt])}catch(t){if(t?.code==="ENOENT")return this[Ne]="w",this[Me]();throw t}else e=H.default.openSync(this[ae],this[Ne],this[Zt]);this[_t](null,e)}[le](){if(this[De]&&typeof this[R]=="number"){let e=this[R];this[R]=void 0,H.default.closeSync(e),this.emit("close")}}[ki](e){let t=!0;try{this[dt](null,H.default.writeSync(this[R],e,0,e.length,this[Pe])),t=!1}finally{if(t)try{this[le]()}catch{}}}};J.WriteStreamSync=br});var Bi=f(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.dealias=N.isNoFile=N.isFile=N.isAsync=N.isSync=N.isAsyncNoFile=N.isSyncNoFile=N.isAsyncFile=N.isSyncFile=void 0;var Qf=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"],["onentry","onReadEntry"]]),Jf=i=>!!i.sync&&!!i.file;N.isSyncFile=Jf;var ed=i=>!i.sync&&!!i.file;N.isAsyncFile=ed;var td=i=>!!i.sync&&!i.file;N.isSyncNoFile=td;var id=i=>!i.sync&&!i.file;N.isAsyncNoFile=id;var sd=i=>!!i.sync;N.isSync=sd;var rd=i=>!i.sync;N.isAsync=rd;var nd=i=>!!i.file;N.isFile=nd;var od=i=>!i.file;N.isNoFile=od;var ad=i=>{let e=Qf.get(i);return e||i},ld=(i={})=>{if(!i)return{};let e={};for(let[t,s]of Object.entries(i)){let r=ad(t);e[r]=s}return e.chmod===void 0&&e.noChmod===!1&&(e.chmod=!0),delete e.noChmod,e};N.dealias=ld});var wt=f(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.makeCommand=void 0;var Kt=Bi(),hd=(i,e,t,s,r)=>Object.assign((n=[],o,a)=>{Array.isArray(n)&&(o=n,n={}),typeof o=="function"&&(a=o,o=void 0),o?o=Array.from(o):o=[];let l=(0,Kt.dealias)(n);if(r?.(l,o),(0,Kt.isSyncFile)(l)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return i(l,o)}else if((0,Kt.isAsyncFile)(l)){let h=e(l,o),c=a||void 0;return c?h.then(()=>c(),c):h}else if((0,Kt.isSyncNoFile)(l)){if(typeof a=="function")throw new TypeError("callback not supported for sync tar functions");return t(l,o)}else if((0,Kt.isAsyncNoFile)(l)){if(typeof a=="function")throw new TypeError("callback only supported with file option");return s(l,o)}else throw new Error("impossible options??")},{syncFile:i,asyncFile:e,syncNoFile:t,asyncNoFile:s,validate:r});ji.makeCommand=hd});var vr=f(yt=>{"use strict";var cd=yt&&yt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yt,"__esModule",{value:!0});yt.constants=void 0;var ud=cd(require("zlib")),fd=ud.default.constants||{ZLIB_VERNUM:4736};yt.constants=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},fd))});var qr=f(g=>{"use strict";var Ha=g&&g.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(g,"__esModule",{value:!0});g.BrotliDecompress=g.BrotliCompress=g.Brotli=g.Unzip=g.InflateRaw=g.DeflateRaw=g.Gunzip=g.Gzip=g.Inflate=g.Deflate=g.Zlib=g.ZlibError=g.constants=void 0;var Tr=Ha(require("assert")),Ce=require("buffer"),dd=ft(),md=Ha(require("zlib")),Ke=vr(),pd=vr();Object.defineProperty(g,"constants",{enumerable:!0,get:function(){return pd.constants}});var Ga=Ce.Buffer.concat,Qe=Symbol("_superWrite"),Je=class extends Error{code;errno;constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}};g.ZlibError=Je;var Nr=Symbol("flushFlag"),Ui=class extends dd.Minipass{#e=!1;#i=!1;#s;#n;#r;#t;#o;get sawError(){return this.#e}get handle(){return this.#t}get flushFlag(){return this.#s}constructor(e,t){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this.#s=e.flush??0,this.#n=e.finishFlush??0,this.#r=e.fullFlushFlag??0;try{this.#t=new md.default[t](e)}catch(s){throw new Je(s)}this.#o=s=>{this.#e||(this.#e=!0,this.close(),this.emit("error",s))},this.#t?.on("error",s=>this.#o(new Je(s))),this.once("end",()=>this.close)}close(){this.#t&&(this.#t.close(),this.#t=void 0,this.emit("close"))}reset(){if(!this.#e)return(0,Tr.default)(this.#t,"zlib binding closed"),this.#t.reset?.()}flush(e){this.ended||(typeof e!="number"&&(e=this.#r),this.write(Object.assign(Ce.Buffer.alloc(0),{[Nr]:e})))}end(e,t,s){return typeof e=="function"&&(s=e,t=void 0,e=void 0),typeof t=="function"&&(s=t,t=void 0),e&&(t?this.write(e,t):this.write(e)),this.flush(this.#n),this.#i=!0,super.end(s)}get ended(){return this.#i}[Qe](e){return super.write(e)}write(e,t,s){if(typeof t=="function"&&(s=t,t="utf8"),typeof e=="string"&&(e=Ce.Buffer.from(e,t)),this.#e)return;(0,Tr.default)(this.#t,"zlib binding closed");let r=this.#t._handle,n=r.close;r.close=()=>{};let o=this.#t.close;this.#t.close=()=>{},Ce.Buffer.concat=h=>h;let a;try{let h=typeof e[Nr]=="number"?e[Nr]:this.#s;a=this.#t._processChunk(e,h),Ce.Buffer.concat=Ga}catch(h){Ce.Buffer.concat=Ga,this.#o(new Je(h))}finally{this.#t&&(this.#t._handle=r,r.close=n,this.#t.close=o,this.#t.removeAllListeners("error"))}this.#t&&this.#t.on("error",h=>this.#o(new Je(h)));let l;if(a)if(Array.isArray(a)&&a.length>0){let h=a[0];l=this[Qe](Ce.Buffer.from(h));for(let c=1;c<a.length;c++)l=this[Qe](a[c])}else l=this[Qe](Ce.Buffer.from(a));return s&&s(),l}},_e=class extends Ui{#e;#i;constructor(e,t){e=e||{},e.flush=e.flush||Ke.constants.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Ke.constants.Z_FINISH,e.fullFlushFlag=Ke.constants.Z_FULL_FLUSH,super(e,t),this.#e=e.level,this.#i=e.strategy}params(e,t){if(!this.sawError){if(!this.handle)throw new Error("cannot switch params when binding is closed");if(!this.handle.params)throw new Error("not supported in this implementation");if(this.#e!==e||this.#i!==t){this.flush(Ke.constants.Z_SYNC_FLUSH),(0,Tr.default)(this.handle,"zlib binding closed");let s=this.handle.flush;this.handle.flush=(r,n)=>{typeof r=="function"&&(n=r,r=this.flushFlag),this.flush(r),n?.()};try{this.handle.params(e,t)}finally{this.handle.flush=s}this.handle&&(this.#e=e,this.#i=t)}}}};g.Zlib=_e;var Ir=class extends _e{constructor(e){super(e,"Deflate")}};g.Deflate=Ir;var Ar=class extends _e{constructor(e){super(e,"Inflate")}};g.Inflate=Ar;var Lr=class extends _e{#e;constructor(e){super(e,"Gzip"),this.#e=e&&!!e.portable}[Qe](e){return this.#e?(this.#e=!1,e[9]=255,super[Qe](e)):super[Qe](e)}};g.Gzip=Lr;var Pr=class extends _e{constructor(e){super(e,"Gunzip")}};g.Gunzip=Pr;var Dr=class extends _e{constructor(e){super(e,"DeflateRaw")}};g.DeflateRaw=Dr;var Mr=class extends _e{constructor(e){super(e,"InflateRaw")}};g.InflateRaw=Mr;var Cr=class extends _e{constructor(e){super(e,"Unzip")}};g.Unzip=Cr;var Qt=class extends Ui{constructor(e,t){e=e||{},e.flush=e.flush||Ke.constants.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Ke.constants.BROTLI_OPERATION_FINISH,e.fullFlushFlag=Ke.constants.BROTLI_OPERATION_FLUSH,super(e,t)}};g.Brotli=Qt;var Fr=class extends Qt{constructor(e){super(e,"BrotliCompress")}};g.BrotliCompress=Fr;var kr=class extends Qt{constructor(e){super(e,"BrotliDecompress")}};g.BrotliDecompress=kr});var $r=f(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.Node=Rt.Yallist=void 0;var xr=class i{tail;head;length=0;static create(e=[]){return new i(e)}constructor(e=[]){for(let t of e)this.push(t)}*[Symbol.iterator](){for(let e=this.head;e;e=e.next)yield e.value}removeNode(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");let t=e.next,s=e.prev;return t&&(t.prev=s),s&&(s.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=s),this.length--,e.next=void 0,e.prev=void 0,e.list=void 0,t}unshiftNode(e){if(e===this.head)return;e.list&&e.list.removeNode(e);let t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}pushNode(e){if(e===this.tail)return;e.list&&e.list.removeNode(e);let t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}push(...e){for(let t=0,s=e.length;t<s;t++)Ed(this,e[t]);return this.length}unshift(...e){for(var t=0,s=e.length;t<s;t++)wd(this,e[t]);return this.length}pop(){if(!this.tail)return;let e=this.tail.value,t=this.tail;return this.tail=this.tail.prev,this.tail?this.tail.next=void 0:this.head=void 0,t.list=void 0,this.length--,e}shift(){if(!this.head)return;let e=this.head.value,t=this.head;return this.head=this.head.next,this.head?this.head.prev=void 0:this.tail=void 0,t.list=void 0,this.length--,e}forEach(e,t){t=t||this;for(let s=this.head,r=0;s;r++)e.call(t,s.value,r,this),s=s.next}forEachReverse(e,t){t=t||this;for(let s=this.tail,r=this.length-1;s;r--)e.call(t,s.value,r,this),s=s.prev}get(e){let t=0,s=this.head;for(;s&&t<e;t++)s=s.next;if(t===e&&s)return s.value}getReverse(e){let t=0,s=this.tail;for(;s&&t<e;t++)s=s.prev;if(t===e&&s)return s.value}map(e,t){t=t||this;let s=new i;for(let r=this.head;r;)s.push(e.call(t,r.value,this)),r=r.next;return s}mapReverse(e,t){t=t||this;var s=new i;for(let r=this.tail;r;)s.push(e.call(t,r.value,this)),r=r.prev;return s}reduce(e,t){let s,r=this.head;if(arguments.length>1)s=t;else if(this.head)r=this.head.next,s=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;r;n++)s=e(s,r.value,n),r=r.next;return s}reduceReverse(e,t){let s,r=this.tail;if(arguments.length>1)s=t;else if(this.tail)r=this.tail.prev,s=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(let n=this.length-1;r;n--)s=e(s,r.value,n),r=r.prev;return s}toArray(){let e=new Array(this.length);for(let t=0,s=this.head;s;t++)e[t]=s.value,s=s.next;return e}toArrayReverse(){let e=new Array(this.length);for(let t=0,s=this.tail;s;t++)e[t]=s.value,s=s.prev;return e}slice(e=0,t=this.length){t<0&&(t+=this.length),e<0&&(e+=this.length);let s=new i;if(t<e||t<0)return s;e<0&&(e=0),t>this.length&&(t=this.length);let r=this.head,n=0;for(n=0;r&&n<e;n++)r=r.next;for(;r&&n<t;n++,r=r.next)s.push(r.value);return s}sliceReverse(e=0,t=this.length){t<0&&(t+=this.length),e<0&&(e+=this.length);let s=new i;if(t<e||t<0)return s;e<0&&(e=0),t>this.length&&(t=this.length);let r=this.length,n=this.tail;for(;n&&r>t;r--)n=n.prev;for(;n&&r>e;r--,n=n.prev)s.push(n.value);return s}splice(e,t=0,...s){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);let r=this.head;for(let o=0;r&&o<e;o++)r=r.next;let n=[];for(let o=0;r&&o<t;o++)n.push(r.value),r=this.removeNode(r);r?r!==this.tail&&(r=r.prev):r=this.tail;for(let o of s)r=_d(this,r,o);return n}reverse(){let e=this.head,t=this.tail;for(let s=e;s;s=s.prev){let r=s.prev;s.prev=s.next,s.next=r}return this.head=t,this.tail=e,this}};Rt.Yallist=xr;function _d(i,e,t){let s=e,r=e?e.next:i.head,n=new St(t,s,r,i);return n.next===void 0&&(i.tail=n),n.prev===void 0&&(i.head=n),i.length++,n}function Ed(i,e){i.tail=new St(e,i.tail,void 0,i),i.head||(i.head=i.tail),i.length++}function wd(i,e){i.head=new St(e,void 0,i.head,i),i.tail||(i.tail=i.head),i.length++}var St=class{list;next;prev;value;constructor(e,t,s,r){this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=void 0,s?(s.prev=this,this.next=s):this.next=void 0}};Rt.Node=St});var Ya=f(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.parse=gt.encode=void 0;var yd=(i,e)=>{if(Number.isSafeInteger(i))i<0?Rd(i,e):Sd(i,e);else throw Error("cannot encode number outside of javascript safe integer range");return e};gt.encode=yd;var Sd=(i,e)=>{e[0]=128;for(var t=e.length;t>1;t--)e[t-1]=i&255,i=Math.floor(i/256)},Rd=(i,e)=>{e[0]=255;var t=!1;i=i*-1;for(var s=e.length;s>1;s--){var r=i&255;i=Math.floor(i/256),t?e[s-1]=Va(r):r===0?e[s-1]=0:(t=!0,e[s-1]=Xa(r))}},gd=i=>{let e=i[0],t=e===128?bd(i.subarray(1,i.length)):e===255?Od(i):null;if(t===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(t))throw Error("parsed number outside of javascript safe integer range");return t};gt.parse=gd;var Od=i=>{for(var e=i.length,t=0,s=!1,r=e-1;r>-1;r--){var n=Number(i[r]),o;s?o=Va(n):n===0?o=n:(s=!0,o=Xa(n)),o!==0&&(t-=o*Math.pow(256,e-r-1))}return t},bd=i=>{for(var e=i.length,t=0,s=e-1;s>-1;s--){var r=Number(i[s]);r!==0&&(t+=r*Math.pow(256,e-s-1))}return t},Va=i=>(255^i)&255,Xa=i=>(255^i)+1&255});var Br=f(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.code=Y.name=Y.isName=Y.isCode=void 0;var vd=i=>Y.name.has(i);Y.isCode=vd;var Nd=i=>Y.code.has(i);Y.isName=Nd;Y.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);Y.code=new Map(Array.from(Y.name).map(i=>[i[1],i[0]]))});var bt=f(Ee=>{"use strict";var Td=Ee&&Ee.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Id=Ee&&Ee.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Za=Ee&&Ee.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&Td(e,i,t);return Id(e,i),e};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.Header=void 0;var Ot=require("node:path"),Ka=Za(Ya()),Jt=Za(Br()),zr=class{cksumValid=!1;needPax=!1;nullBlock=!1;block;path;mode;uid;gid;size;cksum;#e="Unsupported";linkpath;uname;gname;devmaj=0;devmin=0;atime;ctime;mtime;charset;comment;constructor(e,t=0,s,r){Buffer.isBuffer(e)?this.decode(e,t||0,s,r):e&&this.#i(e)}decode(e,t,s,r){if(t||(t=0),!e||!(e.length>=t+512))throw new Error("need 512 bytes for header");this.path=et(e,t,100),this.mode=Fe(e,t+100,8),this.uid=Fe(e,t+108,8),this.gid=Fe(e,t+116,8),this.size=Fe(e,t+124,12),this.mtime=jr(e,t+136,12),this.cksum=Fe(e,t+148,12),r&&this.#i(r,!0),s&&this.#i(s);let n=et(e,t+156,1);if(Jt.isCode(n)&&(this.#e=n||"0"),this.#e==="0"&&this.path.slice(-1)==="/"&&(this.#e="5"),this.#e==="5"&&(this.size=0),this.linkpath=et(e,t+157,100),e.subarray(t+257,t+265).toString()==="ustar\x0000")if(this.uname=et(e,t+265,32),this.gname=et(e,t+297,32),this.devmaj=Fe(e,t+329,8)??0,this.devmin=Fe(e,t+337,8)??0,e[t+475]!==0){let a=et(e,t+345,155);this.path=a+"/"+this.path}else{let a=et(e,t+345,130);a&&(this.path=a+"/"+this.path),this.atime=jr(e,t+476,12),this.ctime=jr(e,t+488,12)}let o=8*32;for(let a=t;a<t+148;a++)o+=e[a];for(let a=t+156;a<t+512;a++)o+=e[a];this.cksumValid=o===this.cksum,this.cksum===void 0&&o===8*32&&(this.nullBlock=!0)}#i(e,t=!1){Object.assign(this,Object.fromEntries(Object.entries(e).filter(([s,r])=>!(r==null||s==="path"&&t||s==="linkpath"&&t||s==="global"))))}encode(e,t=0){if(e||(e=this.block=Buffer.alloc(512)),this.#e==="Unsupported"&&(this.#e="0"),!(e.length>=t+512))throw new Error("need 512 bytes for header");let s=this.ctime||this.atime?130:155,r=Ad(this.path||"",s),n=r[0],o=r[1];this.needPax=!!r[2],this.needPax=tt(e,t,100,n)||this.needPax,this.needPax=ke(e,t+100,8,this.mode)||this.needPax,this.needPax=ke(e,t+108,8,this.uid)||this.needPax,this.needPax=ke(e,t+116,8,this.gid)||this.needPax,this.needPax=ke(e,t+124,12,this.size)||this.needPax,this.needPax=Ur(e,t+136,12,this.mtime)||this.needPax,e[t+156]=this.#e.charCodeAt(0),this.needPax=tt(e,t+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",t+257,8),this.needPax=tt(e,t+265,32,this.uname)||this.needPax,this.needPax=tt(e,t+297,32,this.gname)||this.needPax,this.needPax=ke(e,t+329,8,this.devmaj)||this.needPax,this.needPax=ke(e,t+337,8,this.devmin)||this.needPax,this.needPax=tt(e,t+345,s,o)||this.needPax,e[t+475]!==0?this.needPax=tt(e,t+345,155,o)||this.needPax:(this.needPax=tt(e,t+345,130,o)||this.needPax,this.needPax=Ur(e,t+476,12,this.atime)||this.needPax,this.needPax=Ur(e,t+488,12,this.ctime)||this.needPax);let a=8*32;for(let l=t;l<t+148;l++)a+=e[l];for(let l=t+156;l<t+512;l++)a+=e[l];return this.cksum=a,ke(e,t+148,8,this.cksum),this.cksumValid=!0,this.needPax}get type(){return this.#e==="Unsupported"?this.#e:Jt.name.get(this.#e)}get typeKey(){return this.#e}set type(e){let t=String(Jt.code.get(e));if(Jt.isCode(t)||t==="Unsupported")this.#e=t;else if(Jt.isCode(e))this.#e=e;else throw new TypeError("invalid entry type: "+e)}};Ee.Header=zr;var Ad=(i,e)=>{let s=i,r="",n,o=Ot.posix.parse(i).root||".";if(Buffer.byteLength(s)<100)n=[s,r,!1];else{r=Ot.posix.dirname(s),s=Ot.posix.basename(s);do Buffer.byteLength(s)<=100&&Buffer.byteLength(r)<=e?n=[s,r,!1]:Buffer.byteLength(s)>100&&Buffer.byteLength(r)<=e?n=[s.slice(0,99),r,!0]:(s=Ot.posix.join(Ot.posix.basename(r),s),r=Ot.posix.dirname(r));while(r!==o&&n===void 0);n||(n=[i.slice(0,99),"",!0])}return n},et=(i,e,t)=>i.subarray(e,e+t).toString("utf8").replace(/\0.*/,""),jr=(i,e,t)=>Ld(Fe(i,e,t)),Ld=i=>i===void 0?void 0:new Date(i*1e3),Fe=(i,e,t)=>Number(i[e])&128?Ka.parse(i.subarray(e,e+t)):Dd(i,e,t),Pd=i=>isNaN(i)?void 0:i,Dd=(i,e,t)=>Pd(parseInt(i.subarray(e,e+t).toString("utf8").replace(/\0.*$/,"").trim(),8)),Md={12:8589934591,8:2097151},ke=(i,e,t,s)=>s===void 0?!1:s>Md[t]||s<0?(Ka.encode(s,i.subarray(e,e+t)),!0):(Cd(i,e,t,s),!1),Cd=(i,e,t,s)=>i.write(Fd(s,t),e,t,"ascii"),Fd=(i,e)=>kd(Math.floor(i).toString(8),e),kd=(i,e)=>(i.length===e-1?i:new Array(e-i.length-1).join("0")+i+" ")+"\0",Ur=(i,e,t,s)=>s===void 0?!1:ke(i,e,t,s.getTime()/1e3),qd=new Array(156).join("\0"),tt=(i,e,t,s)=>s===void 0?!1:(i.write(s+qd,e,t,"utf8"),s.length!==Buffer.byteLength(s)||s.length>t)});var Wi=f(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});zi.Pax=void 0;var xd=require("node:path"),$d=bt(),Wr=class i{atime;mtime;ctime;charset;comment;gid;uid;gname;uname;linkpath;dev;ino;nlink;path;size;mode;global;constructor(e,t=!1){this.atime=e.atime,this.charset=e.charset,this.comment=e.comment,this.ctime=e.ctime,this.dev=e.dev,this.gid=e.gid,this.global=t,this.gname=e.gname,this.ino=e.ino,this.linkpath=e.linkpath,this.mtime=e.mtime,this.nlink=e.nlink,this.path=e.path,this.size=e.size,this.uid=e.uid,this.uname=e.uname}encode(){let e=this.encodeBody();if(e==="")return Buffer.allocUnsafe(0);let t=Buffer.byteLength(e),s=512*Math.ceil(1+t/512),r=Buffer.allocUnsafe(s);for(let n=0;n<512;n++)r[n]=0;new $d.Header({path:("PaxHeader/"+(0,xd.basename)(this.path??"")).slice(0,99),mode:this.mode||420,uid:this.uid,gid:this.gid,size:t,mtime:this.mtime,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime,ctime:this.ctime}).encode(r),r.write(e,512,t,"utf8");for(let n=t+512;n<r.length;n++)r[n]=0;return r}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===void 0)return"";let t=this[e],s=t instanceof Date?t.getTime()/1e3:t,r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+s+`
`,n=Buffer.byteLength(r),o=Math.floor(Math.log(n)/Math.log(10))+1;return n+o>=Math.pow(10,o)&&(o+=1),o+n+r}static parse(e,t,s=!1){return new i(Bd(jd(e),t),s)}};zi.Pax=Wr;var Bd=(i,e)=>e?Object.assign({},e,i):i,jd=i=>i.replace(/\n$/,"").split(`
`).reduce(Ud,Object.create(null)),Ud=(i,e)=>{let t=parseInt(e,10);if(t!==Buffer.byteLength(e)+1)return i;e=e.slice((t+" ").length);let s=e.split("="),r=s.shift();if(!r)return i;let n=r.replace(/^SCHILY\.(dev|ino|nlink)/,"$1"),o=s.join("=");return i[n]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(n)?new Date(Number(o)*1e3):/^[0-9]+$/.test(o)?+o:o,i}});var vt=f(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.normalizeWindowsPath=void 0;var zd=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;Gi.normalizeWindowsPath=zd!=="win32"?i=>i:i=>i&&i.replace(/\\/g,"/")});var Xi=f(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.ReadEntry=void 0;var Wd=ft(),Hi=vt(),Gr=class extends Wd.Minipass{extended;globalExtended;header;startBlockSize;blockRemain;remain;type;meta=!1;ignore=!1;path;mode;uid;gid;uname;gname;size=0;mtime;atime;ctime;linkpath;dev;ino;nlink;invalid=!1;absolute;unsupported=!1;constructor(e,t,s){switch(super({}),this.pause(),this.extended=t,this.globalExtended=s,this.header=e,this.remain=e.size??0,this.startBlockSize=512*Math.ceil(this.remain/512),this.blockRemain=this.startBlockSize,this.type=e.type,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}if(!e.path)throw new Error("no path provided for tar.ReadEntry");this.path=(0,Hi.normalizeWindowsPath)(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=this.remain,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=e.linkpath?(0,Hi.normalizeWindowsPath)(e.linkpath):void 0,this.uname=e.uname,this.gname=e.gname,t&&this.#e(t),s&&this.#e(s,!0)}write(e){let t=e.length;if(t>this.blockRemain)throw new Error("writing more to entry than is appropriate");let s=this.remain,r=this.blockRemain;return this.remain=Math.max(0,s-t),this.blockRemain=Math.max(0,r-t),this.ignore?!0:s>=t?super.write(e):super.write(e.subarray(0,s))}#e(e,t=!1){e.path&&(e.path=(0,Hi.normalizeWindowsPath)(e.path)),e.linkpath&&(e.linkpath=(0,Hi.normalizeWindowsPath)(e.linkpath)),Object.assign(this,Object.fromEntries(Object.entries(e).filter(([s,r])=>!(r==null||s==="path"&&t))))}};Vi.ReadEntry=Gr});var Zi=f(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.warnMethod=void 0;var Gd=(i,e,t,s={})=>{i.file&&(s.file=i.file),i.cwd&&(s.cwd=i.cwd),s.code=t instanceof Error&&t.code||e,s.tarCode=e,!i.strict&&s.recoverable!==!1?(t instanceof Error&&(s=Object.assign(t,s),t=t.message),i.emit("warn",e,t,s)):t instanceof Error?i.emit("error",Object.assign(t,s)):i.emit("error",Object.assign(new Error(`${e}: ${t}`),s))};Yi.warnMethod=Gd});var rs=f(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.Parser=void 0;var Hd=require("events"),Qa=qr(),Vd=$r(),Ja=bt(),el=Wi(),Xd=Xi(),Yd=Zi(),Zd=1024*1024,Hr=Buffer.from([31,139]),ee=Symbol("state"),it=Symbol("writeEntry"),Te=Symbol("readEntry"),Vr=Symbol("nextEntry"),tl=Symbol("processEntry"),we=Symbol("extendedHeader"),ei=Symbol("globalExtendedHeader"),qe=Symbol("meta"),il=Symbol("emitMeta"),O=Symbol("buffer"),Ie=Symbol("queue"),xe=Symbol("ended"),Xr=Symbol("emittedEnd"),st=Symbol("emit"),T=Symbol("unzip"),Ki=Symbol("consumeChunk"),Qi=Symbol("consumeChunkSub"),Yr=Symbol("consumeBody"),sl=Symbol("consumeMeta"),rl=Symbol("consumeHeader"),ti=Symbol("consuming"),Zr=Symbol("bufferConcat"),Ji=Symbol("maybeEnd"),Nt=Symbol("writing"),$e=Symbol("aborted"),es=Symbol("onDone"),rt=Symbol("sawValidEntry"),ts=Symbol("sawNullBlock"),is=Symbol("sawEOF"),nl=Symbol("closeStream"),Kd=()=>!0,Kr=class extends Hd.EventEmitter{file;strict;maxMetaEntrySize;filter;brotli;writable=!0;readable=!1;[Ie]=new Vd.Yallist;[O];[Te];[it];[ee]="begin";[qe]="";[we];[ei];[xe]=!1;[T];[$e]=!1;[rt];[ts]=!1;[is]=!1;[Nt]=!1;[ti]=!1;[Xr]=!1;constructor(e={}){super(),this.file=e.file||"",this.on(es,()=>{(this[ee]==="begin"||this[rt]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(es,e.ondone):this.on(es,()=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||Zd,this.filter=typeof e.filter=="function"?e.filter:Kd;let t=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:t?void 0:!1,this.on("end",()=>this[nl]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onReadEntry=="function"&&this.on("entry",e.onReadEntry)}warn(e,t,s={}){(0,Yd.warnMethod)(this,e,t,s)}[rl](e,t){this[rt]===void 0&&(this[rt]=!1);let s;try{s=new Ja.Header(e,t,this[we],this[ei])}catch(r){return this.warn("TAR_ENTRY_INVALID",r)}if(s.nullBlock)this[ts]?(this[is]=!0,this[ee]==="begin"&&(this[ee]="header"),this[st]("eof")):(this[ts]=!0,this[st]("nullBlock"));else if(this[ts]=!1,!s.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:s});else if(!s.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:s});else{let r=s.type;if(/^(Symbolic)?Link$/.test(r)&&!s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:s});else if(!/^(Symbolic)?Link$/.test(r)&&!/^(Global)?ExtendedHeader$/.test(r)&&s.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:s});else{let n=this[it]=new Xd.ReadEntry(s,this[we],this[ei]);if(!this[rt])if(n.remain){let o=()=>{n.invalid||(this[rt]=!0)};n.on("end",o)}else this[rt]=!0;n.meta?n.size>this.maxMetaEntrySize?(n.ignore=!0,this[st]("ignoredEntry",n),this[ee]="ignore",n.resume()):n.size>0&&(this[qe]="",n.on("data",o=>this[qe]+=o),this[ee]="meta"):(this[we]=void 0,n.ignore=n.ignore||!this.filter(n.path,n),n.ignore?(this[st]("ignoredEntry",n),this[ee]=n.remain?"ignore":"header",n.resume()):(n.remain?this[ee]="body":(this[ee]="header",n.end()),this[Te]?this[Ie].push(n):(this[Ie].push(n),this[Vr]())))}}}[nl](){queueMicrotask(()=>this.emit("close"))}[tl](e){let t=!0;if(!e)this[Te]=void 0,t=!1;else if(Array.isArray(e)){let[s,...r]=e;this.emit(s,...r)}else this[Te]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",()=>this[Vr]()),t=!1);return t}[Vr](){do;while(this[tl](this[Ie].shift()));if(!this[Ie].length){let e=this[Te];!e||e.flowing||e.size===e.remain?this[Nt]||this.emit("drain"):e.once("drain",()=>this.emit("drain"))}}[Yr](e,t){let s=this[it];if(!s)throw new Error("attempt to consume body without entry??");let r=s.blockRemain??0,n=r>=e.length&&t===0?e:e.subarray(t,t+r);return s.write(n),s.blockRemain||(this[ee]="header",this[it]=void 0,s.end()),n.length}[sl](e,t){let s=this[it],r=this[Yr](e,t);return!this[it]&&s&&this[il](s),r}[st](e,t,s){!this[Ie].length&&!this[Te]?this.emit(e,t,s):this[Ie].push([e,t,s])}[il](e){switch(this[st]("meta",this[qe]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[we]=el.Pax.parse(this[qe],this[we],!1);break;case"GlobalExtendedHeader":this[ei]=el.Pax.parse(this[qe],this[ei],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":{let t=this[we]??Object.create(null);this[we]=t,t.path=this[qe].replace(/\0.*/,"");break}case"NextFileHasLongLinkpath":{let t=this[we]||Object.create(null);this[we]=t,t.linkpath=this[qe].replace(/\0.*/,"");break}default:throw new Error("unknown meta: "+e.type)}}abort(e){this[$e]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e,t,s){if(typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8")),this[$e])return s?.(),!1;if((this[T]===void 0||this.brotli===void 0&&this[T]===!1)&&e){if(this[O]&&(e=Buffer.concat([this[O],e]),this[O]=void 0),e.length<Hr.length)return this[O]=e,s?.(),!0;for(let a=0;this[T]===void 0&&a<Hr.length;a++)e[a]!==Hr[a]&&(this[T]=!1);let o=this.brotli===void 0;if(this[T]===!1&&o)if(e.length<512)if(this[xe])this.brotli=!0;else return this[O]=e,s?.(),!0;else try{new Ja.Header(e.subarray(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[T]===void 0||this[T]===!1&&this.brotli){let a=this[xe];this[xe]=!1,this[T]=this[T]===void 0?new Qa.Unzip({}):new Qa.BrotliDecompress({}),this[T].on("data",h=>this[Ki](h)),this[T].on("error",h=>this.abort(h)),this[T].on("end",()=>{this[xe]=!0,this[Ki]()}),this[Nt]=!0;let l=!!this[T][a?"end":"write"](e);return this[Nt]=!1,s?.(),l}}this[Nt]=!0,this[T]?this[T].write(e):this[Ki](e),this[Nt]=!1;let n=this[Ie].length?!1:this[Te]?this[Te].flowing:!0;return!n&&!this[Ie].length&&this[Te]?.once("drain",()=>this.emit("drain")),s?.(),n}[Zr](e){e&&!this[$e]&&(this[O]=this[O]?Buffer.concat([this[O],e]):e)}[Ji](){if(this[xe]&&!this[Xr]&&!this[$e]&&!this[ti]){this[Xr]=!0;let e=this[it];if(e&&e.blockRemain){let t=this[O]?this[O].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e}),this[O]&&e.write(this[O]),e.end()}this[st](es)}}[Ki](e){if(this[ti]&&e)this[Zr](e);else if(!e&&!this[O])this[Ji]();else if(e){if(this[ti]=!0,this[O]){this[Zr](e);let t=this[O];this[O]=void 0,this[Qi](t)}else this[Qi](e);for(;this[O]&&this[O]?.length>=512&&!this[$e]&&!this[is];){let t=this[O];this[O]=void 0,this[Qi](t)}this[ti]=!1}(!this[O]||this[xe])&&this[Ji]()}[Qi](e){let t=0,s=e.length;for(;t+512<=s&&!this[$e]&&!this[is];)switch(this[ee]){case"begin":case"header":this[rl](e,t),t+=512;break;case"ignore":case"body":t+=this[Yr](e,t);break;case"meta":t+=this[sl](e,t);break;default:throw new Error("invalid state: "+this[ee])}t<s&&(this[O]?this[O]=Buffer.concat([e.subarray(t),this[O]]):this[O]=e.subarray(t))}end(e,t,s){return typeof e=="function"&&(s=e,t=void 0,e=void 0),typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,t)),s&&this.once("finish",s),this[$e]||(this[T]?(e&&this[T].write(e),this[T].end()):(this[xe]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),e&&this.write(e),this[Ji]())),this}};ss.Parser=Kr});var ii=f(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.stripTrailingSlashes=void 0;var Qd=i=>{let e=i.length-1,t=-1;for(;e>-1&&i.charAt(e)==="/";)t=e,e--;return t===-1?i:i.slice(0,t)};ns.stripTrailingSlashes=Qd});var It=f(U=>{"use strict";var Jd=U&&U.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),em=U&&U.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),tm=U&&U.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&Jd(e,i,t);return em(e,i),e},im=U&&U.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(U,"__esModule",{value:!0});U.list=U.filesFilter=void 0;var sm=tm(Et()),Tt=im(require("node:fs")),ol=require("path"),rm=wt(),os=rs(),Qr=ii(),nm=i=>{let e=i.onReadEntry;i.onReadEntry=e?t=>{e(t),t.resume()}:t=>t.resume()},om=(i,e)=>{let t=new Map(e.map(n=>[(0,Qr.stripTrailingSlashes)(n),!0])),s=i.filter,r=(n,o="")=>{let a=o||(0,ol.parse)(n).root||".",l;if(n===a)l=!1;else{let h=t.get(n);h!==void 0?l=h:l=r((0,ol.dirname)(n),a)}return t.set(n,l),l};i.filter=s?(n,o)=>s(n,o)&&r((0,Qr.stripTrailingSlashes)(n)):n=>r((0,Qr.stripTrailingSlashes)(n))};U.filesFilter=om;var am=i=>{let e=new os.Parser(i),t=i.file,s;try{let r=Tt.default.statSync(t),n=i.maxReadSize||16*1024*1024;if(r.size<n)e.end(Tt.default.readFileSync(t));else{let o=0,a=Buffer.allocUnsafe(n);for(s=Tt.default.openSync(t,"r");o<r.size;){let l=Tt.default.readSync(s,a,0,n,o);o+=l,e.write(a.subarray(0,l))}e.end()}}finally{if(typeof s=="number")try{Tt.default.closeSync(s)}catch{}}},lm=(i,e)=>{let t=new os.Parser(i),s=i.maxReadSize||16*1024*1024,r=i.file;return new Promise((o,a)=>{t.on("error",a),t.on("end",o),Tt.default.stat(r,(l,h)=>{if(l)a(l);else{let c=new sm.ReadStream(r,{readSize:s,size:h.size});c.on("error",a),c.pipe(t)}})})};U.list=(0,rm.makeCommand)(am,lm,i=>new os.Parser(i),i=>new os.Parser(i),(i,e)=>{e?.length&&(0,U.filesFilter)(i,e),i.noResume||nm(i)})});var al=f(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.modeFix=void 0;var hm=(i,e,t)=>(i&=4095,t&&(i=(i|384)&-19),e&&(i&256&&(i|=64),i&32&&(i|=8),i&4&&(i|=1)),i);as.modeFix=hm});var Jr=f(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.stripAbsolutePath=void 0;var cm=require("node:path"),{isAbsolute:um,parse:ll}=cm.win32,fm=i=>{let e="",t=ll(i);for(;um(i)||t.root;){let s=i.charAt(0)==="/"&&i.slice(0,4)!=="//?/"?"/":t.root;i=i.slice(s.length),e+=s,t=ll(i)}return[e,i]};ls.stripAbsolutePath=fm});var tn=f(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.decode=At.encode=void 0;var hs=["|","<",">","?",":"],en=hs.map(i=>String.fromCharCode(61440+i.charCodeAt(0))),dm=new Map(hs.map((i,e)=>[i,en[e]])),mm=new Map(en.map((i,e)=>[i,hs[e]])),pm=i=>hs.reduce((e,t)=>e.split(t).join(dm.get(t)),i);At.encode=pm;var _m=i=>en.reduce((e,t)=>e.split(t).join(mm.get(t)),i);At.decode=_m});var dn=f(F=>{"use strict";var Em=F&&F.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),wm=F&&F.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),ym=F&&F.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&Em(e,i,t);return wm(e,i),e},ml=F&&F.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(F,"__esModule",{value:!0});F.WriteEntryTar=F.WriteEntrySync=F.WriteEntry=void 0;var Se=ml(require("fs")),pl=ft(),hl=ml(require("path")),_l=bt(),El=al(),ye=vt(),wl=Bi(),yl=Wi(),Sl=Jr(),Sm=ii(),Rl=Zi(),Rm=ym(tn()),gl=(i,e)=>e?(i=(0,ye.normalizeWindowsPath)(i).replace(/^\.(\/|$)/,""),(0,Sm.stripTrailingSlashes)(e)+"/"+i):(0,ye.normalizeWindowsPath)(i),gm=16*1024*1024,cl=Symbol("process"),ul=Symbol("file"),fl=Symbol("directory"),rn=Symbol("symlink"),dl=Symbol("hardlink"),si=Symbol("header"),cs=Symbol("read"),nn=Symbol("lstat"),us=Symbol("onlstat"),on=Symbol("onread"),an=Symbol("onreadlink"),ln=Symbol("openfile"),hn=Symbol("onopenfile"),Be=Symbol("close"),fs=Symbol("mode"),cn=Symbol("awaitDrain"),sn=Symbol("ondrain"),Re=Symbol("prefix"),ds=class extends pl.Minipass{path;portable;myuid=process.getuid&&process.getuid()||0;myuser=process.env.USER||"";maxReadSize;linkCache;statCache;preservePaths;cwd;strict;mtime;noPax;noMtime;prefix;fd;blockLen=0;blockRemain=0;buf;pos=0;remain=0;length=0;offset=0;win32;absolute;header;type;linkpath;stat;onWriteEntry;#e=!1;constructor(e,t={}){let s=(0,wl.dealias)(t);super(),this.path=(0,ye.normalizeWindowsPath)(e),this.portable=!!s.portable,this.maxReadSize=s.maxReadSize||gm,this.linkCache=s.linkCache||new Map,this.statCache=s.statCache||new Map,this.preservePaths=!!s.preservePaths,this.cwd=(0,ye.normalizeWindowsPath)(s.cwd||process.cwd()),this.strict=!!s.strict,this.noPax=!!s.noPax,this.noMtime=!!s.noMtime,this.mtime=s.mtime,this.prefix=s.prefix?(0,ye.normalizeWindowsPath)(s.prefix):void 0,this.onWriteEntry=s.onWriteEntry,typeof s.onwarn=="function"&&this.on("warn",s.onwarn);let r=!1;if(!this.preservePaths){let[o,a]=(0,Sl.stripAbsolutePath)(this.path);o&&typeof a=="string"&&(this.path=a,r=o)}this.win32=!!s.win32||process.platform==="win32",this.win32&&(this.path=Rm.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=(0,ye.normalizeWindowsPath)(s.absolute||hl.default.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path});let n=this.statCache.get(this.absolute);n?this[us](n):this[nn]()}warn(e,t,s={}){return(0,Rl.warnMethod)(this,e,t,s)}emit(e,...t){return e==="error"&&(this.#e=!0),super.emit(e,...t)}[nn](){Se.default.lstat(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[us](t)})}[us](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Om(e),this.emit("stat",e),this[cl]()}[cl](){switch(this.type){case"File":return this[ul]();case"Directory":return this[fl]();case"SymbolicLink":return this[rn]();default:return this.end()}}[fs](e){return(0,El.modeFix)(e,this.type==="Directory",this.portable)}[Re](e){return gl(e,this.prefix)}[si](){if(!this.stat)throw new Error("cannot write header before stat");this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.onWriteEntry?.(this),this.header=new _l.Header({path:this[Re](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Re](this.linkpath):this.linkpath,mode:this[fs](this.stat.mode),uid:this.portable?void 0:this.stat.uid,gid:this.portable?void 0:this.stat.gid,size:this.stat.size,mtime:this.noMtime?void 0:this.mtime||this.stat.mtime,type:this.type==="Unsupported"?void 0:this.type,uname:this.portable?void 0:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?void 0:this.stat.atime,ctime:this.portable?void 0:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new yl.Pax({atime:this.portable?void 0:this.header.atime,ctime:this.portable?void 0:this.header.ctime,gid:this.portable?void 0:this.header.gid,mtime:this.noMtime?void 0:this.mtime||this.header.mtime,path:this[Re](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Re](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?void 0:this.header.uid,uname:this.portable?void 0:this.header.uname,dev:this.portable?void 0:this.stat.dev,ino:this.portable?void 0:this.stat.ino,nlink:this.portable?void 0:this.stat.nlink}).encode());let e=this.header?.block;if(!e)throw new Error("failed to encode header");super.write(e)}[fl](){if(!this.stat)throw new Error("cannot create directory entry without stat");this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[si](),this.end()}[rn](){Se.default.readlink(this.absolute,(e,t)=>{if(e)return this.emit("error",e);this[an](t)})}[an](e){this.linkpath=(0,ye.normalizeWindowsPath)(e),this[si](),this.end()}[dl](e){if(!this.stat)throw new Error("cannot create link entry without stat");this.type="Link",this.linkpath=(0,ye.normalizeWindowsPath)(hl.default.relative(this.cwd,e)),this.stat.size=0,this[si](),this.end()}[ul](){if(!this.stat)throw new Error("cannot create file entry without stat");if(this.stat.nlink>1){let e=`${this.stat.dev}:${this.stat.ino}`,t=this.linkCache.get(e);if(t?.indexOf(this.cwd)===0)return this[dl](t);this.linkCache.set(e,this.absolute)}if(this[si](),this.stat.size===0)return this.end();this[ln]()}[ln](){Se.default.open(this.absolute,"r",(e,t)=>{if(e)return this.emit("error",e);this[hn](t)})}[hn](e){if(this.fd=e,this.#e)return this[Be]();if(!this.stat)throw new Error("should stat before calling onopenfile");this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[cs]()}[cs](){let{fd:e,buf:t,offset:s,length:r,pos:n}=this;if(e===void 0||t===void 0)throw new Error("cannot read file without first opening");Se.default.read(e,t,s,r,n,(o,a)=>{if(o)return this[Be](()=>this.emit("error",o));this[on](a)})}[Be](e=()=>{}){this.fd!==void 0&&Se.default.close(this.fd,e)}[on](e){if(e<=0&&this.remain>0){let r=Object.assign(new Error("encountered unexpected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[Be](()=>this.emit("error",r))}if(e>this.remain){let r=Object.assign(new Error("did not encounter expected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[Be](()=>this.emit("error",r))}if(!this.buf)throw new Error("should have created buffer prior to reading");if(e===this.remain)for(let r=e;r<this.length&&e<this.blockRemain;r++)this.buf[r+this.offset]=0,e++,this.remain++;let t=this.offset===0&&e===this.buf.length?this.buf:this.buf.subarray(this.offset,this.offset+e);this.write(t)?this[sn]():this[cn](()=>this[sn]())}[cn](e){this.once("drain",e)}write(e,t,s){if(typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8")),this.blockRemain<e.length){let r=Object.assign(new Error("writing more data than expected"),{path:this.absolute});return this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e,null,s)}[sn](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Be](e=>e?this.emit("error",e):this.end());if(!this.buf)throw new Error("buffer lost somehow in ONDRAIN");this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[cs]()}};F.WriteEntry=ds;var un=class extends ds{sync=!0;[nn](){this[us](Se.default.lstatSync(this.absolute))}[rn](){this[an](Se.default.readlinkSync(this.absolute))}[ln](){this[hn](Se.default.openSync(this.absolute,"r"))}[cs](){let e=!0;try{let{fd:t,buf:s,offset:r,length:n,pos:o}=this;if(t===void 0||s===void 0)throw new Error("fd and buf must be set in READ method");let a=Se.default.readSync(t,s,r,n,o);this[on](a),e=!1}finally{if(e)try{this[Be](()=>{})}catch{}}}[cn](e){e()}[Be](e=()=>{}){this.fd!==void 0&&Se.default.closeSync(this.fd),e()}};F.WriteEntrySync=un;var fn=class extends pl.Minipass{blockLen=0;blockRemain=0;buf=0;pos=0;remain=0;length=0;preservePaths;portable;strict;noPax;noMtime;readEntry;type;prefix;path;mode;uid;gid;uname;gname;header;mtime;atime;ctime;linkpath;size;onWriteEntry;warn(e,t,s={}){return(0,Rl.warnMethod)(this,e,t,s)}constructor(e,t={}){let s=(0,wl.dealias)(t);super(),this.preservePaths=!!s.preservePaths,this.portable=!!s.portable,this.strict=!!s.strict,this.noPax=!!s.noPax,this.noMtime=!!s.noMtime,this.onWriteEntry=s.onWriteEntry,this.readEntry=e;let{type:r}=e;if(r==="Unsupported")throw new Error("writing entry that should be ignored");this.type=r,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=s.prefix,this.path=(0,ye.normalizeWindowsPath)(e.path),this.mode=e.mode!==void 0?this[fs](e.mode):void 0,this.uid=this.portable?void 0:e.uid,this.gid=this.portable?void 0:e.gid,this.uname=this.portable?void 0:e.uname,this.gname=this.portable?void 0:e.gname,this.size=e.size,this.mtime=this.noMtime?void 0:s.mtime||e.mtime,this.atime=this.portable?void 0:e.atime,this.ctime=this.portable?void 0:e.ctime,this.linkpath=e.linkpath!==void 0?(0,ye.normalizeWindowsPath)(e.linkpath):void 0,typeof s.onwarn=="function"&&this.on("warn",s.onwarn);let n=!1;if(!this.preservePaths){let[a,l]=(0,Sl.stripAbsolutePath)(this.path);a&&typeof l=="string"&&(this.path=l,n=a)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.onWriteEntry?.(this),this.header=new _l.Header({path:this[Re](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Re](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?void 0:this.uid,gid:this.portable?void 0:this.gid,size:this.size,mtime:this.noMtime?void 0:this.mtime,type:this.type,uname:this.portable?void 0:this.uname,atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new yl.Pax({atime:this.portable?void 0:this.atime,ctime:this.portable?void 0:this.ctime,gid:this.portable?void 0:this.gid,mtime:this.noMtime?void 0:this.mtime,path:this[Re](this.path),linkpath:this.type==="Link"&&this.linkpath!==void 0?this[Re](this.linkpath):this.linkpath,size:this.size,uid:this.portable?void 0:this.uid,uname:this.portable?void 0:this.uname,dev:this.portable?void 0:this.readEntry.dev,ino:this.portable?void 0:this.readEntry.ino,nlink:this.portable?void 0:this.readEntry.nlink}).encode());let o=this.header?.block;if(!o)throw new Error("failed to encode header");super.write(o),e.pipe(this)}[Re](e){return gl(e,this.prefix)}[fs](e){return(0,El.modeFix)(e,this.type==="Directory",this.portable)}write(e,t,s){typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,typeof t=="string"?t:"utf8"));let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e,s)}end(e,t,s){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),typeof e=="function"&&(s=e,t=void 0,e=void 0),typeof t=="function"&&(s=t,t=void 0),typeof e=="string"&&(e=Buffer.from(e,t??"utf8")),s&&this.once("finish",s),e?super.end(e,s):super.end(s),this}};F.WriteEntryTar=fn;var Om=i=>i.isFile()?"File":i.isDirectory()?"Directory":i.isSymbolicLink()?"SymbolicLink":"Unsupported"});var Rs=f(k=>{"use strict";var bm=k&&k.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),vm=k&&k.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Nm=k&&k.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&bm(e,i,t);return vm(e,i),e},Al=k&&k.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(k,"__esModule",{value:!0});k.PackSync=k.Pack=k.PackJob=void 0;var ys=Al(require("fs")),wn=dn(),oi=class{path;absolute;entry;stat;readdir;pending=!1;ignore=!1;piped=!1;constructor(e,t){this.path=e||"./",this.absolute=t}};k.PackJob=oi;var Tm=ft(),Ol=Nm(qr()),Im=$r(),Am=Xi(),Lm=Zi(),bl=Buffer.alloc(1024),ms=Symbol("onStat"),ri=Symbol("ended"),he=Symbol("queue"),Lt=Symbol("current"),nt=Symbol("process"),ni=Symbol("processing"),vl=Symbol("processJob"),ce=Symbol("jobs"),mn=Symbol("jobDone"),ps=Symbol("addFSEntry"),Nl=Symbol("addTarEntry"),yn=Symbol("stat"),Sn=Symbol("readdir"),_s=Symbol("onreaddir"),Es=Symbol("pipe"),Tl=Symbol("entry"),pn=Symbol("entryOpt"),ws=Symbol("writeEntryClass"),Ll=Symbol("write"),_n=Symbol("ondrain"),Il=Al(require("path")),En=vt(),Ss=class extends Tm.Minipass{opt;cwd;maxReadSize;preservePaths;strict;noPax;prefix;linkCache;statCache;file;portable;zip;readdirCache;noDirRecurse;follow;noMtime;mtime;filter;jobs;[ws];onWriteEntry;[he];[ce]=0;[ni]=!1;[ri]=!1;constructor(e={}){if(super(),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=(0,En.normalizeWindowsPath)(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this.onWriteEntry=e.onWriteEntry,this[ws]=wn.WriteEntry,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");if(e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new Ol.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new Ol.BrotliCompress(e.brotli)),!this.zip)throw new Error("impossible");let t=this.zip;t.on("data",s=>super.write(s)),t.on("end",()=>super.end()),t.on("drain",()=>this[_n]()),this.on("resume",()=>t.resume())}else this.on("drain",this[_n]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,e.mtime&&(this.mtime=e.mtime),this.filter=typeof e.filter=="function"?e.filter:()=>!0,this[he]=new Im.Yallist,this[ce]=0,this.jobs=Number(e.jobs)||4,this[ni]=!1,this[ri]=!1}[Ll](e){return super.write(e)}add(e){return this.write(e),this}end(e,t,s){return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e&&this.add(e),this[ri]=!0,this[nt](),s&&s(),this}write(e){if(this[ri])throw new Error("write after end");return e instanceof Am.ReadEntry?this[Nl](e):this[ps](e),this.flowing}[Nl](e){let t=(0,En.normalizeWindowsPath)(Il.default.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let s=new oi(e.path,t);s.entry=new wn.WriteEntryTar(e,this[pn](s)),s.entry.on("end",()=>this[mn](s)),this[ce]+=1,this[he].push(s)}this[nt]()}[ps](e){let t=(0,En.normalizeWindowsPath)(Il.default.resolve(this.cwd,e));this[he].push(new oi(e,t)),this[nt]()}[yn](e){e.pending=!0,this[ce]+=1;let t=this.follow?"stat":"lstat";ys.default[t](e.absolute,(s,r)=>{e.pending=!1,this[ce]-=1,s?this.emit("error",s):this[ms](e,r)})}[ms](e,t){this.statCache.set(e.absolute,t),e.stat=t,this.filter(e.path,t)||(e.ignore=!0),this[nt]()}[Sn](e){e.pending=!0,this[ce]+=1,ys.default.readdir(e.absolute,(t,s)=>{if(e.pending=!1,this[ce]-=1,t)return this.emit("error",t);this[_s](e,s)})}[_s](e,t){this.readdirCache.set(e.absolute,t),e.readdir=t,this[nt]()}[nt](){if(!this[ni]){this[ni]=!0;for(let e=this[he].head;e&&this[ce]<this.jobs;e=e.next)if(this[vl](e.value),e.value.ignore){let t=e.next;this[he].removeNode(e),e.next=t}this[ni]=!1,this[ri]&&!this[he].length&&this[ce]===0&&(this.zip?this.zip.end(bl):(super.write(bl),super.end()))}}get[Lt](){return this[he]&&this[he].head&&this[he].head.value}[mn](e){this[he].shift(),this[ce]-=1,this[nt]()}[vl](e){if(!e.pending){if(e.entry){e===this[Lt]&&!e.piped&&this[Es](e);return}if(!e.stat){let t=this.statCache.get(e.absolute);t?this[ms](e,t):this[yn](e)}if(e.stat&&!e.ignore){if(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir){let t=this.readdirCache.get(e.absolute);if(t?this[_s](e,t):this[Sn](e),!e.readdir)return}if(e.entry=this[Tl](e),!e.entry){e.ignore=!0;return}e===this[Lt]&&!e.piped&&this[Es](e)}}}[pn](e){return{onwarn:(t,s,r)=>this.warn(t,s,r),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix,onWriteEntry:this.onWriteEntry}}[Tl](e){this[ce]+=1;try{return new this[ws](e.path,this[pn](e)).on("end",()=>this[mn](e)).on("error",s=>this.emit("error",s))}catch(t){this.emit("error",t)}}[_n](){this[Lt]&&this[Lt].entry&&this[Lt].entry.resume()}[Es](e){e.piped=!0,e.readdir&&e.readdir.forEach(r=>{let n=e.path,o=n==="./"?"":n.replace(/\/*$/,"/");this[ps](o+r)});let t=e.entry,s=this.zip;if(!t)throw new Error("cannot pipe without source");s?t.on("data",r=>{s.write(r)||t.pause()}):t.on("data",r=>{super.write(r)||t.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}warn(e,t,s={}){(0,Lm.warnMethod)(this,e,t,s)}};k.Pack=Ss;var Rn=class extends Ss{sync=!0;constructor(e){super(e),this[ws]=wn.WriteEntrySync}pause(){}resume(){}[yn](e){let t=this.follow?"statSync":"lstatSync";this[ms](e,ys.default[t](e.absolute))}[Sn](e){this[_s](e,ys.default.readdirSync(e.absolute))}[Es](e){let t=e.entry,s=this.zip;if(e.readdir&&e.readdir.forEach(r=>{let n=e.path,o=n==="./"?"":n.replace(/\/*$/,"/");this[ps](o+r)}),!t)throw new Error("Cannot pipe without source");s?t.on("data",r=>{s.write(r)}):t.on("data",r=>{super[Ll](r)})}};k.PackSync=Rn});var gn=f(Pt=>{"use strict";var Pm=Pt&&Pt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.create=void 0;var Pl=Et(),Dl=Pm(require("node:path")),Ml=It(),Dm=wt(),gs=Rs(),Mm=(i,e)=>{let t=new gs.PackSync(i),s=new Pl.WriteStreamSync(i.file,{mode:i.mode||438});t.pipe(s),Cl(t,e)},Cm=(i,e)=>{let t=new gs.Pack(i),s=new Pl.WriteStream(i.file,{mode:i.mode||438});t.pipe(s);let r=new Promise((n,o)=>{s.on("error",o),s.on("close",n),t.on("error",o)});return Fl(t,e),r},Cl=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?(0,Ml.list)({file:Dl.default.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onReadEntry:s=>i.add(s)}):i.add(t)}),i.end()},Fl=async(i,e)=>{for(let t=0;t<e.length;t++){let s=String(e[t]);s.charAt(0)==="@"?await(0,Ml.list)({file:Dl.default.resolve(String(i.cwd),s.slice(1)),noResume:!0,onReadEntry:r=>{i.add(r)}}):i.add(s)}i.end()},Fm=(i,e)=>{let t=new gs.PackSync(i);return Cl(t,e),t},km=(i,e)=>{let t=new gs.Pack(i);return Fl(t,e),t};Pt.create=(0,Dm.makeCommand)(Mm,Cm,Fm,km,(i,e)=>{if(!e?.length)throw new TypeError("no paths specified to add to archive")})});var xl=f(Dt=>{"use strict";var qm=Dt&&Dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getWriteFlag=void 0;var kl=qm(require("fs")),xm=process.env.__FAKE_PLATFORM__||process.platform,$m=xm==="win32",{O_CREAT:Bm,O_TRUNC:jm,O_WRONLY:Um}=kl.default.constants,ql=Number(process.env.__FAKE_FS_O_FILENAME__)||kl.default.constants.UV_FS_O_FILEMAP||0,zm=$m&&!!ql,Wm=512*1024,Gm=ql|jm|Bm|Um;Dt.getWriteFlag=zm?i=>i<Wm?Gm:"w":()=>"w"});var Bl=f(ge=>{"use strict";var $l=ge&&ge.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ge,"__esModule",{value:!0});ge.chownrSync=ge.chownr=void 0;var bs=$l(require("node:fs")),ai=$l(require("node:path")),On=(i,e,t)=>{try{return bs.default.lchownSync(i,e,t)}catch(s){if(s?.code!=="ENOENT")throw s}},Os=(i,e,t,s)=>{bs.default.lchown(i,e,t,r=>{s(r&&r?.code!=="ENOENT"?r:null)})},Hm=(i,e,t,s,r)=>{if(e.isDirectory())(0,ge.chownr)(ai.default.resolve(i,e.name),t,s,n=>{if(n)return r(n);let o=ai.default.resolve(i,e.name);Os(o,t,s,r)});else{let n=ai.default.resolve(i,e.name);Os(n,t,s,r)}},Vm=(i,e,t,s)=>{bs.default.readdir(i,{withFileTypes:!0},(r,n)=>{if(r){if(r.code==="ENOENT")return s();if(r.code!=="ENOTDIR"&&r.code!=="ENOTSUP")return s(r)}if(r||!n.length)return Os(i,e,t,s);let o=n.length,a=null,l=h=>{if(!a){if(h)return s(a=h);if(--o===0)return Os(i,e,t,s)}};for(let h of n)Hm(i,h,e,t,l)})};ge.chownr=Vm;var Xm=(i,e,t,s)=>{e.isDirectory()&&(0,ge.chownrSync)(ai.default.resolve(i,e.name),t,s),On(ai.default.resolve(i,e.name),t,s)},Ym=(i,e,t)=>{let s;try{s=bs.default.readdirSync(i,{withFileTypes:!0})}catch(r){let n=r;if(n?.code==="ENOENT")return;if(n?.code==="ENOTDIR"||n?.code==="ENOTSUP")return On(i,e,t);throw n}for(let r of s)Xm(i,r,e,t);return On(i,e,t)};ge.chownrSync=Ym});var li=f(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.optsArg=void 0;var vs=require("fs"),Zm=i=>{if(!i)i={mode:511};else if(typeof i=="object")i={mode:511,...i};else if(typeof i=="number")i={mode:i};else if(typeof i=="string")i={mode:parseInt(i,8)};else throw new TypeError("invalid options argument");let e=i,t=i.fs||{};return i.mkdir=i.mkdir||t.mkdir||vs.mkdir,i.mkdirAsync=i.mkdirAsync?i.mkdirAsync:async(s,r)=>new Promise((n,o)=>e.mkdir(s,r,(a,l)=>a?o(a):n(l))),i.stat=i.stat||t.stat||vs.stat,i.statAsync=i.statAsync?i.statAsync:async s=>new Promise((r,n)=>e.stat(s,(o,a)=>o?n(o):r(a))),i.statSync=i.statSync||t.statSync||vs.statSync,i.mkdirSync=i.mkdirSync||t.mkdirSync||vs.mkdirSync,e};Ns.optsArg=Zm});var Ts=f(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.mkdirpManual=ue.mkdirpManualSync=void 0;var jl=require("path"),Ul=li(),Km=(i,e,t)=>{let s=(0,jl.dirname)(i),r={...(0,Ul.optsArg)(e),recursive:!1};if(s===i)try{return r.mkdirSync(i,r)}catch(n){let o=n;if(o&&o.code!=="EISDIR")throw n;return}try{return r.mkdirSync(i,r),t||i}catch(n){let o=n;if(o&&o.code==="ENOENT")return(0,ue.mkdirpManualSync)(i,r,(0,ue.mkdirpManualSync)(s,r,t));if(o&&o.code!=="EEXIST"&&o&&o.code!=="EROFS")throw n;try{if(!r.statSync(i).isDirectory())throw n}catch{throw n}}};ue.mkdirpManualSync=Km;ue.mkdirpManual=Object.assign(async(i,e,t)=>{let s=(0,Ul.optsArg)(e);s.recursive=!1;let r=(0,jl.dirname)(i);return r===i?s.mkdirAsync(i,s).catch(n=>{let o=n;if(o&&o.code!=="EISDIR")throw n}):s.mkdirAsync(i,s).then(()=>t||i,async n=>{let o=n;if(o&&o.code==="ENOENT")return(0,ue.mkdirpManual)(r,s).then(a=>(0,ue.mkdirpManual)(i,s,a));if(o&&o.code!=="EEXIST"&&o.code!=="EROFS")throw n;return s.statAsync(i).then(a=>{if(a.isDirectory())return t;throw n},()=>{throw n})})},{sync:ue.mkdirpManualSync})});var Wl=f(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.findMadeSync=je.findMade=void 0;var zl=require("path"),Qm=async(i,e,t)=>{if(t!==e)return i.statAsync(e).then(s=>s.isDirectory()?t:void 0,s=>{let r=s;return r&&r.code==="ENOENT"?(0,je.findMade)(i,(0,zl.dirname)(e),e):void 0})};je.findMade=Qm;var Jm=(i,e,t)=>{if(t!==e)try{return i.statSync(e).isDirectory()?t:void 0}catch(s){let r=s;return r&&r.code==="ENOENT"?(0,je.findMadeSync)(i,(0,zl.dirname)(e),e):void 0}};je.findMadeSync=Jm});var bn=f(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.mkdirpNative=ot.mkdirpNativeSync=void 0;var Gl=require("path"),Hl=Wl(),Vl=Ts(),Xl=li(),ep=(i,e)=>{let t=(0,Xl.optsArg)(e);if(t.recursive=!0,(0,Gl.dirname)(i)===i)return t.mkdirSync(i,t);let r=(0,Hl.findMadeSync)(t,i);try{return t.mkdirSync(i,t),r}catch(n){let o=n;if(o&&o.code==="ENOENT")return(0,Vl.mkdirpManualSync)(i,t);throw n}};ot.mkdirpNativeSync=ep;ot.mkdirpNative=Object.assign(async(i,e)=>{let t={...(0,Xl.optsArg)(e),recursive:!0};return(0,Gl.dirname)(i)===i?await t.mkdirAsync(i,t):(0,Hl.findMade)(t,i).then(r=>t.mkdirAsync(i,t).then(n=>r||n).catch(n=>{let o=n;if(o&&o.code==="ENOENT")return(0,Vl.mkdirpManual)(i,t);throw n}))},{sync:ot.mkdirpNativeSync})});var Zl=f(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.pathArg=void 0;var tp=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,Yl=require("path"),ip=i=>{if(/\0/.test(i))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:i,code:"ERR_INVALID_ARG_VALUE"});if(i=(0,Yl.resolve)(i),tp==="win32"){let e=/[*|"<>?:]/,{root:t}=(0,Yl.parse)(i);if(e.test(i.substring(t.length)))throw Object.assign(new Error("Illegal characters in path."),{path:i,code:"EINVAL"})}return i};Is.pathArg=ip});var Nn=f(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.useNative=at.useNativeSync=void 0;var Kl=require("fs"),Ql=li(),sp=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,vn=sp.replace(/^v/,"").split("."),Jl=+vn[0]>10||+vn[0]==10&&+vn[1]>=12;at.useNativeSync=Jl?i=>(0,Ql.optsArg)(i).mkdirSync===Kl.mkdirSync:()=>!1;at.useNative=Object.assign(Jl?i=>(0,Ql.optsArg)(i).mkdir===Kl.mkdir:()=>!1,{sync:at.useNativeSync})});var nh=f(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.mkdirp=S.nativeSync=S.native=S.manualSync=S.manual=S.sync=S.mkdirpSync=S.useNativeSync=S.useNative=S.mkdirpNativeSync=S.mkdirpNative=S.mkdirpManualSync=S.mkdirpManual=void 0;var Ue=Ts(),ze=bn(),eh=li(),th=Zl(),As=Nn(),ih=Ts();Object.defineProperty(S,"mkdirpManual",{enumerable:!0,get:function(){return ih.mkdirpManual}});Object.defineProperty(S,"mkdirpManualSync",{enumerable:!0,get:function(){return ih.mkdirpManualSync}});var sh=bn();Object.defineProperty(S,"mkdirpNative",{enumerable:!0,get:function(){return sh.mkdirpNative}});Object.defineProperty(S,"mkdirpNativeSync",{enumerable:!0,get:function(){return sh.mkdirpNativeSync}});var rh=Nn();Object.defineProperty(S,"useNative",{enumerable:!0,get:function(){return rh.useNative}});Object.defineProperty(S,"useNativeSync",{enumerable:!0,get:function(){return rh.useNativeSync}});var rp=(i,e)=>{i=(0,th.pathArg)(i);let t=(0,eh.optsArg)(e);return(0,As.useNativeSync)(t)?(0,ze.mkdirpNativeSync)(i,t):(0,Ue.mkdirpManualSync)(i,t)};S.mkdirpSync=rp;S.sync=S.mkdirpSync;S.manual=Ue.mkdirpManual;S.manualSync=Ue.mkdirpManualSync;S.native=ze.mkdirpNative;S.nativeSync=ze.mkdirpNativeSync;S.mkdirp=Object.assign(async(i,e)=>{i=(0,th.pathArg)(i);let t=(0,eh.optsArg)(e);return(0,As.useNative)(t)?(0,ze.mkdirpNative)(i,t):(0,Ue.mkdirpManual)(i,t)},{mkdirpSync:S.mkdirpSync,mkdirpNative:ze.mkdirpNative,mkdirpNativeSync:ze.mkdirpNativeSync,mkdirpManual:Ue.mkdirpManual,mkdirpManualSync:Ue.mkdirpManualSync,sync:S.mkdirpSync,native:ze.mkdirpNative,nativeSync:ze.mkdirpNativeSync,manual:Ue.mkdirpManual,manualSync:Ue.mkdirpManualSync,useNative:As.useNative,useNativeSync:As.useNativeSync})});var oh=f(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.CwdError=void 0;var Tn=class extends Error{path;code;syscall="chdir";constructor(e,t){super(`${t}: Cannot cd into '${e}'`),this.path=e,this.code=t}get name(){return"CwdError"}};Ls.CwdError=Tn});var ah=f(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.SymlinkError=void 0;var In=class extends Error{path;symlink;syscall="symlink";code="TAR_SYMLINK_ERROR";constructor(e,t){super("TAR_SYMLINK_ERROR: Cannot extract through symbolic link"),this.symlink=e,this.path=t}get name(){return"SymlinkError"}};Ps.SymlinkError=In});var mh=f(We=>{"use strict";var lh=We&&We.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(We,"__esModule",{value:!0});We.mkdirSync=We.mkdir=void 0;var hh=Bl(),te=lh(require("fs")),ch=nh(),Ds=lh(require("node:path")),uh=oh(),fe=vt(),fh=ah(),Ms=(i,e)=>i.get((0,fe.normalizeWindowsPath)(e)),hi=(i,e,t)=>i.set((0,fe.normalizeWindowsPath)(e),t),np=(i,e)=>{te.default.stat(i,(t,s)=>{(t||!s.isDirectory())&&(t=new uh.CwdError(i,t?.code||"ENOTDIR")),e(t)})},op=(i,e,t)=>{i=(0,fe.normalizeWindowsPath)(i);let s=e.umask??18,r=e.mode|448,n=(r&s)!==0,o=e.uid,a=e.gid,l=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),h=e.preserve,c=e.unlink,u=e.cache,_=(0,fe.normalizeWindowsPath)(e.cwd),p=(W,A)=>{W?t(W):(hi(u,i,!0),A&&l?(0,hh.chownr)(A,o,a,Gn=>p(Gn)):n?te.default.chmod(i,r,t):t())};if(u&&Ms(u,i)===!0)return p();if(i===_)return np(i,p);if(h)return(0,ch.mkdirp)(i,{mode:r}).then(W=>p(null,W??void 0),p);let I=(0,fe.normalizeWindowsPath)(Ds.default.relative(_,i)).split("/");Cs(_,I,r,u,c,_,void 0,p)};We.mkdir=op;var Cs=(i,e,t,s,r,n,o,a)=>{if(!e.length)return a(null,o);let l=e.shift(),h=(0,fe.normalizeWindowsPath)(Ds.default.resolve(i+"/"+l));if(Ms(s,h))return Cs(h,e,t,s,r,n,o,a);te.default.mkdir(h,t,dh(h,e,t,s,r,n,o,a))},dh=(i,e,t,s,r,n,o,a)=>l=>{l?te.default.lstat(i,(h,c)=>{if(h)h.path=h.path&&(0,fe.normalizeWindowsPath)(h.path),a(h);else if(c.isDirectory())Cs(i,e,t,s,r,n,o,a);else if(r)te.default.unlink(i,u=>{if(u)return a(u);te.default.mkdir(i,t,dh(i,e,t,s,r,n,o,a))});else{if(c.isSymbolicLink())return a(new fh.SymlinkError(i,i+"/"+e.join("/")));a(l)}}):(o=o||i,Cs(i,e,t,s,r,n,o,a))},ap=i=>{let e=!1,t;try{e=te.default.statSync(i).isDirectory()}catch(s){t=s?.code}finally{if(!e)throw new uh.CwdError(i,t??"ENOTDIR")}},lp=(i,e)=>{i=(0,fe.normalizeWindowsPath)(i);let t=e.umask??18,s=e.mode|448,r=(s&t)!==0,n=e.uid,o=e.gid,a=typeof n=="number"&&typeof o=="number"&&(n!==e.processUid||o!==e.processGid),l=e.preserve,h=e.unlink,c=e.cache,u=(0,fe.normalizeWindowsPath)(e.cwd),_=W=>{hi(c,i,!0),W&&a&&(0,hh.chownrSync)(W,n,o),r&&te.default.chmodSync(i,s)};if(c&&Ms(c,i)===!0)return _();if(i===u)return ap(u),_();if(l)return _((0,ch.mkdirpSync)(i,s)??void 0);let z=(0,fe.normalizeWindowsPath)(Ds.default.relative(u,i)).split("/"),I;for(let W=z.shift(),A=u;W&&(A+="/"+W);W=z.shift())if(A=(0,fe.normalizeWindowsPath)(Ds.default.resolve(A)),!Ms(c,A))try{te.default.mkdirSync(A,s),I=I||A,hi(c,A,!0)}catch{let Hn=te.default.lstatSync(A);if(Hn.isDirectory()){hi(c,A,!0);continue}else if(h){te.default.unlinkSync(A),te.default.mkdirSync(A,s),I=I||A,hi(c,A,!0);continue}else if(Hn.isSymbolicLink())return new fh.SymlinkError(A,A+"/"+z.join("/"))}return _(I)};We.mkdirSync=lp});var Ln=f(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.normalizeUnicode=void 0;var An=Object.create(null),{hasOwnProperty:hp}=Object.prototype,cp=i=>(hp.call(An,i)||(An[i]=i.normalize("NFD")),An[i]);Fs.normalizeUnicode=cp});var _h=f(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.PathReservations=void 0;var ph=require("node:path"),up=Ln(),fp=ii(),dp=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,mp=dp==="win32",pp=i=>i.split("/").slice(0,-1).reduce((t,s)=>{let r=t[t.length-1];return r!==void 0&&(s=(0,ph.join)(r,s)),t.push(s||"/"),t},[]),Pn=class{#e=new Map;#i=new Map;#s=new Set;reserve(e,t){e=mp?["win32 parallelization disabled"]:e.map(r=>(0,fp.stripTrailingSlashes)((0,ph.join)((0,up.normalizeUnicode)(r))).toLowerCase());let s=new Set(e.map(r=>pp(r)).reduce((r,n)=>r.concat(n)));this.#i.set(t,{dirs:s,paths:e});for(let r of e){let n=this.#e.get(r);n?n.push(t):this.#e.set(r,[t])}for(let r of s){let n=this.#e.get(r);if(!n)this.#e.set(r,[new Set([t])]);else{let o=n[n.length-1];o instanceof Set?o.add(t):n.push(new Set([t]))}}return this.#r(t)}#n(e){let t=this.#i.get(e);if(!t)throw new Error("function does not have any path reservations");return{paths:t.paths.map(s=>this.#e.get(s)),dirs:[...t.dirs].map(s=>this.#e.get(s))}}check(e){let{paths:t,dirs:s}=this.#n(e);return t.every(r=>r&&r[0]===e)&&s.every(r=>r&&r[0]instanceof Set&&r[0].has(e))}#r(e){return this.#s.has(e)||!this.check(e)?!1:(this.#s.add(e),e(()=>this.#t(e)),!0)}#t(e){if(!this.#s.has(e))return!1;let t=this.#i.get(e);if(!t)throw new Error("invalid reservation");let{paths:s,dirs:r}=t,n=new Set;for(let o of s){let a=this.#e.get(o);if(!a||a?.[0]!==e)continue;let l=a[1];if(!l){this.#e.delete(o);continue}if(a.shift(),typeof l=="function")n.add(l);else for(let h of l)n.add(h)}for(let o of r){let a=this.#e.get(o),l=a?.[0];if(!(!a||!(l instanceof Set)))if(l.size===1&&a.length===1){this.#e.delete(o);continue}else if(l.size===1){a.shift();let h=a[0];typeof h=="function"&&n.add(h)}else l.delete(e)}return this.#s.delete(e),n.forEach(o=>this.#r(o)),!0}};ks.PathReservations=Pn});var jn=f(V=>{"use strict";var _p=V&&V.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Ep=V&&V.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Th=V&&V.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&_p(e,i,t);return Ep(e,i),e},Bn=V&&V.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(V,"__esModule",{value:!0});V.UnpackSync=V.Unpack=void 0;var wp=Th(Et()),yp=Bn(require("node:assert")),Ih=require("node:crypto"),y=Bn(require("node:fs")),Ae=Bn(require("node:path")),Ah=xl(),Lh=mh(),Sp=Ln(),ie=vt(),Rp=rs(),gp=Jr(),Op=ii(),Eh=Th(tn()),bp=_h(),wh=Symbol("onEntry"),Cn=Symbol("checkFs"),yh=Symbol("checkFs2"),$s=Symbol("pruneCache"),Fn=Symbol("isReusable"),se=Symbol("makeFs"),kn=Symbol("file"),qn=Symbol("directory"),Bs=Symbol("link"),Sh=Symbol("symlink"),Rh=Symbol("hardlink"),gh=Symbol("unsupported"),Oh=Symbol("checkPath"),Ge=Symbol("mkdir"),q=Symbol("onError"),qs=Symbol("pending"),bh=Symbol("pend"),Mt=Symbol("unpend"),Dn=Symbol("ended"),Mn=Symbol("maybeClose"),xn=Symbol("skip"),ci=Symbol("doChown"),ui=Symbol("uid"),fi=Symbol("gid"),di=Symbol("checkedCwd"),vp=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,mi=vp==="win32",Np=1024,Tp=(i,e)=>{if(!mi)return y.default.unlink(i,e);let t=i+".DELETE."+(0,Ih.randomBytes)(16).toString("hex");y.default.rename(i,t,s=>{if(s)return e(s);y.default.unlink(t,e)})},Ip=i=>{if(!mi)return y.default.unlinkSync(i);let e=i+".DELETE."+(0,Ih.randomBytes)(16).toString("hex");y.default.renameSync(i,e),y.default.unlinkSync(e)},vh=(i,e,t)=>i!==void 0&&i===i>>>0?i:e!==void 0&&e===e>>>0?e:t,Nh=i=>(0,Op.stripTrailingSlashes)((0,ie.normalizeWindowsPath)((0,Sp.normalizeUnicode)(i))).toLowerCase(),Ap=(i,e)=>{e=Nh(e);for(let t of i.keys()){let s=Nh(t);(s===e||s.indexOf(e+"/")===0)&&i.delete(t)}},Lp=i=>{for(let e of i.keys())i.delete(e)},js=class extends Rp.Parser{[Dn]=!1;[di]=!1;[qs]=0;reservations=new bp.PathReservations;transform;writable=!0;readable=!1;dirCache;uid;gid;setOwner;preserveOwner;processGid;processUid;maxDepth;forceChown;win32;newer;keep;noMtime;preservePaths;unlink;cwd;strip;processUmask;umask;dmode;fmode;chmod;constructor(e={}){if(e.ondone=()=>{this[Dn]=!0,this[Mn]()},super(e),this.transform=e.transform,this.dirCache=e.dirCache||new Map,this.chmod=!!e.chmod,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=void 0,this.gid=void 0,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=!!(process.getuid&&process.getuid()===0):this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():void 0,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():void 0,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:Np,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||mi,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=(0,ie.normalizeWindowsPath)(Ae.default.resolve(e.cwd||process.cwd())),this.strip=Number(e.strip)||0,this.processUmask=this.chmod?typeof e.processUmask=="number"?e.processUmask:process.umask():0,this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",t=>this[wh](t))}warn(e,t,s={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(s.recoverable=!1),super.warn(e,t,s)}[Mn](){this[Dn]&&this[qs]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[Oh](e){let t=(0,ie.normalizeWindowsPath)(e.path),s=t.split("/");if(this.strip){if(s.length<this.strip)return!1;if(e.type==="Link"){let r=(0,ie.normalizeWindowsPath)(String(e.linkpath)).split("/");if(r.length>=this.strip)e.linkpath=r.slice(this.strip).join("/");else return!1}s.splice(0,this.strip),e.path=s.join("/")}if(isFinite(this.maxDepth)&&s.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:t,depth:s.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(s.includes("..")||mi&&/^[a-z]:\.\.$/i.test(s[0]??""))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:t}),!1;let[r,n]=(0,gp.stripAbsolutePath)(t);r&&(e.path=String(n),this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:e,path:t}))}if(Ae.default.isAbsolute(e.path)?e.absolute=(0,ie.normalizeWindowsPath)(Ae.default.resolve(e.path)):e.absolute=(0,ie.normalizeWindowsPath)(Ae.default.resolve(this.cwd,e.path)),!this.preservePaths&&typeof e.absolute=="string"&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:(0,ie.normalizeWindowsPath)(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=Ae.default.win32.parse(String(e.absolute));e.absolute=r+Eh.encode(String(e.absolute).slice(r.length));let{root:n}=Ae.default.win32.parse(e.path);e.path=n+Eh.encode(e.path.slice(n.length))}return!0}[wh](e){if(!this[Oh](e))return e.resume();switch(yp.default.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[Cn](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[gh](e)}}[q](e,t){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:t}),this[Mt](),t.resume())}[Ge](e,t,s){(0,Lh.mkdir)((0,ie.normalizeWindowsPath)(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t},s)}[ci](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[ui](e){return vh(this.uid,e.uid,this.processUid)}[fi](e){return vh(this.gid,e.gid,this.processGid)}[kn](e,t){let s=typeof e.mode=="number"?e.mode&4095:this.fmode,r=new wp.WriteStream(String(e.absolute),{flags:(0,Ah.getWriteFlag)(e.size),mode:s,autoClose:!1});r.on("error",l=>{r.fd&&y.default.close(r.fd,()=>{}),r.write=()=>!0,this[q](l,e),t()});let n=1,o=l=>{if(l){r.fd&&y.default.close(r.fd,()=>{}),this[q](l,e),t();return}--n===0&&r.fd!==void 0&&y.default.close(r.fd,h=>{h?this[q](h,e):this[Mt](),t()})};r.on("finish",()=>{let l=String(e.absolute),h=r.fd;if(typeof h=="number"&&e.mtime&&!this.noMtime){n++;let c=e.atime||new Date,u=e.mtime;y.default.futimes(h,c,u,_=>_?y.default.utimes(l,c,u,p=>o(p&&_)):o())}if(typeof h=="number"&&this[ci](e)){n++;let c=this[ui](e),u=this[fi](e);typeof c=="number"&&typeof u=="number"&&y.default.fchown(h,c,u,_=>_?y.default.chown(l,c,u,p=>o(p&&_)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",l=>{this[q](l,e),t()}),e.pipe(a)),a.pipe(r)}[qn](e,t){let s=typeof e.mode=="number"?e.mode&4095:this.dmode;this[Ge](String(e.absolute),s,r=>{if(r){this[q](r,e),t();return}let n=1,o=()=>{--n===0&&(t(),this[Mt](),e.resume())};e.mtime&&!this.noMtime&&(n++,y.default.utimes(String(e.absolute),e.atime||new Date,e.mtime,o)),this[ci](e)&&(n++,y.default.chown(String(e.absolute),Number(this[ui](e)),Number(this[fi](e)),o)),o()})}[gh](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Sh](e,t){this[Bs](e,String(e.linkpath),"symlink",t)}[Rh](e,t){let s=(0,ie.normalizeWindowsPath)(Ae.default.resolve(this.cwd,String(e.linkpath)));this[Bs](e,s,"link",t)}[bh](){this[qs]++}[Mt](){this[qs]--,this[Mn]()}[xn](e){this[Mt](),e.resume()}[Fn](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!mi}[Cn](e){this[bh]();let t=[e.path];e.linkpath&&t.push(e.linkpath),this.reservations.reserve(t,s=>this[yh](e,s))}[$s](e){e.type==="SymbolicLink"?Lp(this.dirCache):e.type!=="Directory"&&Ap(this.dirCache,String(e.absolute))}[yh](e,t){this[$s](e);let s=a=>{this[$s](e),t(a)},r=()=>{this[Ge](this.cwd,this.dmode,a=>{if(a){this[q](a,e),s();return}this[di]=!0,n()})},n=()=>{if(e.absolute!==this.cwd){let a=(0,ie.normalizeWindowsPath)(Ae.default.dirname(String(e.absolute)));if(a!==this.cwd)return this[Ge](a,this.dmode,l=>{if(l){this[q](l,e),s();return}o()})}o()},o=()=>{y.default.lstat(String(e.absolute),(a,l)=>{if(l&&(this.keep||this.newer&&l.mtime>(e.mtime??l.mtime))){this[xn](e),s();return}if(a||this[Fn](e,l))return this[se](null,e,s);if(l.isDirectory()){if(e.type==="Directory"){let h=this.chmod&&e.mode&&(l.mode&4095)!==e.mode,c=u=>this[se](u??null,e,s);return h?y.default.chmod(String(e.absolute),Number(e.mode),c):c()}if(e.absolute!==this.cwd)return y.default.rmdir(String(e.absolute),h=>this[se](h??null,e,s))}if(e.absolute===this.cwd)return this[se](null,e,s);Tp(String(e.absolute),h=>this[se](h??null,e,s))})};this[di]?n():r()}[se](e,t,s){if(e){this[q](e,t),s();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[kn](t,s);case"Link":return this[Rh](t,s);case"SymbolicLink":return this[Sh](t,s);case"Directory":case"GNUDumpDir":return this[qn](t,s)}}[Bs](e,t,s,r){y.default[s](t,String(e.absolute),n=>{n?this[q](n,e):(this[Mt](),e.resume()),r()})}};V.Unpack=js;var xs=i=>{try{return[null,i()]}catch(e){return[e,null]}},$n=class extends js{sync=!0;[se](e,t){return super[se](e,t,()=>{})}[Cn](e){if(this[$s](e),!this[di]){let n=this[Ge](this.cwd,this.dmode);if(n)return this[q](n,e);this[di]=!0}if(e.absolute!==this.cwd){let n=(0,ie.normalizeWindowsPath)(Ae.default.dirname(String(e.absolute)));if(n!==this.cwd){let o=this[Ge](n,this.dmode);if(o)return this[q](o,e)}}let[t,s]=xs(()=>y.default.lstatSync(String(e.absolute)));if(s&&(this.keep||this.newer&&s.mtime>(e.mtime??s.mtime)))return this[xn](e);if(t||this[Fn](e,s))return this[se](null,e);if(s.isDirectory()){if(e.type==="Directory"){let o=this.chmod&&e.mode&&(s.mode&4095)!==e.mode,[a]=o?xs(()=>{y.default.chmodSync(String(e.absolute),Number(e.mode))}):[];return this[se](a,e)}let[n]=xs(()=>y.default.rmdirSync(String(e.absolute)));this[se](n,e)}let[r]=e.absolute===this.cwd?[]:xs(()=>Ip(String(e.absolute)));this[se](r,e)}[kn](e,t){let s=typeof e.mode=="number"?e.mode&4095:this.fmode,r=a=>{let l;try{y.default.closeSync(n)}catch(h){l=h}(a||l)&&this[q](a||l,e),t()},n;try{n=y.default.openSync(String(e.absolute),(0,Ah.getWriteFlag)(e.size),s)}catch(a){return r(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[q](a,e)),e.pipe(o)),o.on("data",a=>{try{y.default.writeSync(n,a,0,a.length)}catch(l){r(l)}}),o.on("end",()=>{let a=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,h=e.mtime;try{y.default.futimesSync(n,l,h)}catch(c){try{y.default.utimesSync(String(e.absolute),l,h)}catch{a=c}}}if(this[ci](e)){let l=this[ui](e),h=this[fi](e);try{y.default.fchownSync(n,Number(l),Number(h))}catch(c){try{y.default.chownSync(String(e.absolute),Number(l),Number(h))}catch{a=a||c}}}r(a)})}[qn](e,t){let s=typeof e.mode=="number"?e.mode&4095:this.dmode,r=this[Ge](String(e.absolute),s);if(r){this[q](r,e),t();return}if(e.mtime&&!this.noMtime)try{y.default.utimesSync(String(e.absolute),e.atime||new Date,e.mtime)}catch{}if(this[ci](e))try{y.default.chownSync(String(e.absolute),Number(this[ui](e)),Number(this[fi](e)))}catch{}t(),e.resume()}[Ge](e,t){try{return(0,Lh.mkdirSync)((0,ie.normalizeWindowsPath)(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(s){return s}}[Bs](e,t,s,r){let n=`${s}Sync`;try{y.default[n](t,String(e.absolute)),r(),e.resume()}catch(o){return this[q](o,e)}}};V.UnpackSync=$n});var Un=f(re=>{"use strict";var Pp=re&&re.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Dp=re&&re.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),Mp=re&&re.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&Pp(e,i,t);return Dp(e,i),e},Cp=re&&re.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(re,"__esModule",{value:!0});re.extract=void 0;var Ph=Mp(Et()),Dh=Cp(require("node:fs")),Fp=It(),kp=wt(),Us=jn(),qp=i=>{let e=new Us.UnpackSync(i),t=i.file,s=Dh.default.statSync(t),r=i.maxReadSize||16*1024*1024;new Ph.ReadStreamSync(t,{readSize:r,size:s.size}).pipe(e)},xp=(i,e)=>{let t=new Us.Unpack(i),s=i.maxReadSize||16*1024*1024,r=i.file;return new Promise((o,a)=>{t.on("error",a),t.on("close",o),Dh.default.stat(r,(l,h)=>{if(l)a(l);else{let c=new Ph.ReadStream(r,{readSize:s,size:h.size});c.on("error",a),c.pipe(t)}})})};re.extract=(0,kp.makeCommand)(qp,xp,i=>new Us.UnpackSync(i),i=>new Us.Unpack(i),(i,e)=>{e?.length&&(0,Fp.filesFilter)(i,e)})});var zs=f(Ct=>{"use strict";var Mh=Ct&&Ct.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.replace=void 0;var Ch=Et(),Z=Mh(require("node:fs")),Fh=Mh(require("node:path")),kh=bt(),qh=It(),$p=wt(),Bp=Bi(),xh=Rs(),jp=(i,e)=>{let t=new xh.PackSync(i),s=!0,r,n;try{try{r=Z.default.openSync(i.file,"r+")}catch(l){if(l?.code==="ENOENT")r=Z.default.openSync(i.file,"w+");else throw l}let o=Z.default.fstatSync(r),a=Buffer.alloc(512);e:for(n=0;n<o.size;n+=512){for(let c=0,u=0;c<512;c+=u){if(u=Z.default.readSync(r,a,c,a.length-c,n+c),n===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!u)break e}let l=new kh.Header(a);if(!l.cksumValid)break;let h=512*Math.ceil((l.size||0)/512);if(n+h+512>o.size)break;n+=h,i.mtimeCache&&l.mtime&&i.mtimeCache.set(String(l.path),l.mtime)}s=!1,Up(i,t,n,r,e)}finally{if(s)try{Z.default.closeSync(r)}catch{}}},Up=(i,e,t,s,r)=>{let n=new Ch.WriteStreamSync(i.file,{fd:s,start:t});e.pipe(n),Wp(e,r)},zp=(i,e)=>{e=Array.from(e);let t=new xh.Pack(i),s=(n,o,a)=>{let l=(p,z)=>{p?Z.default.close(n,I=>a(p)):a(null,z)},h=0;if(o===0)return l(null,0);let c=0,u=Buffer.alloc(512),_=(p,z)=>{if(p||typeof z>"u")return l(p);if(c+=z,c<512&&z)return Z.default.read(n,u,c,u.length-c,h+c,_);if(h===0&&u[0]===31&&u[1]===139)return l(new Error("cannot append to compressed archives"));if(c<512)return l(null,h);let I=new kh.Header(u);if(!I.cksumValid)return l(null,h);let W=512*Math.ceil((I.size??0)/512);if(h+W+512>o||(h+=W+512,h>=o))return l(null,h);i.mtimeCache&&I.mtime&&i.mtimeCache.set(String(I.path),I.mtime),c=0,Z.default.read(n,u,0,512,h,_)};Z.default.read(n,u,0,512,h,_)};return new Promise((n,o)=>{t.on("error",o);let a="r+",l=(h,c)=>{if(h&&h.code==="ENOENT"&&a==="r+")return a="w+",Z.default.open(i.file,a,l);if(h||!c)return o(h);Z.default.fstat(c,(u,_)=>{if(u)return Z.default.close(c,()=>o(u));s(c,_.size,(p,z)=>{if(p)return o(p);let I=new Ch.WriteStream(i.file,{fd:c,start:z});t.pipe(I),I.on("error",o),I.on("close",n),Gp(t,e)})})};Z.default.open(i.file,a,l)})},Wp=(i,e)=>{e.forEach(t=>{t.charAt(0)==="@"?(0,qh.list)({file:Fh.default.resolve(i.cwd,t.slice(1)),sync:!0,noResume:!0,onReadEntry:s=>i.add(s)}):i.add(t)}),i.end()},Gp=async(i,e)=>{for(let t=0;t<e.length;t++){let s=String(e[t]);s.charAt(0)==="@"?await(0,qh.list)({file:Fh.default.resolve(String(i.cwd),s.slice(1)),noResume:!0,onReadEntry:r=>i.add(r)}):i.add(s)}i.end()};Ct.replace=(0,$p.makeCommand)(jp,zp,()=>{throw new TypeError("file is required")},()=>{throw new TypeError("file is required")},(i,e)=>{if(!(0,Bp.isFile)(i))throw new TypeError("file is required");if(i.gzip||i.brotli||i.file.endsWith(".br")||i.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e?.length)throw new TypeError("no paths specified to add/replace")})});var zn=f(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.update=void 0;var Hp=wt(),pi=zs();Ws.update=(0,Hp.makeCommand)(pi.replace.syncFile,pi.replace.asyncFile,pi.replace.syncNoFile,pi.replace.asyncNoFile,(i,e=[])=>{pi.replace.validate?.(i,e),Vp(i)});var Vp=i=>{let e=i.filter;i.mtimeCache||(i.mtimeCache=new Map),i.filter=e?(t,s)=>e(t,s)&&!((i.mtimeCache?.get(t)??s.mtime??0)>(s.mtime??0)):(t,s)=>!((i.mtimeCache?.get(t)??s.mtime??0)>(s.mtime??0))}});var Bh=f(w=>{"use strict";var $h=w&&w.__createBinding||(Object.create?function(i,e,t,s){s===void 0&&(s=t);var r=Object.getOwnPropertyDescriptor(e,t);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,r)}:function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]}),Xp=w&&w.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),ne=w&&w.__exportStar||function(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&$h(e,i,t)},Yp=w&&w.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&$h(e,i,t);return Xp(e,i),e};Object.defineProperty(w,"__esModule",{value:!0});w.u=w.types=w.r=w.t=w.x=w.c=void 0;ne(gn(),w);var Zp=gn();Object.defineProperty(w,"c",{enumerable:!0,get:function(){return Zp.create}});ne(Un(),w);var Kp=Un();Object.defineProperty(w,"x",{enumerable:!0,get:function(){return Kp.extract}});ne(bt(),w);ne(It(),w);var Qp=It();Object.defineProperty(w,"t",{enumerable:!0,get:function(){return Qp.list}});ne(Rs(),w);ne(rs(),w);ne(Wi(),w);ne(Xi(),w);ne(zs(),w);var Jp=zs();Object.defineProperty(w,"r",{enumerable:!0,get:function(){return Jp.replace}});w.types=Yp(Br());ne(jn(),w);ne(zn(),w);var e_=zn();Object.defineProperty(w,"u",{enumerable:!0,get:function(){return e_.update}});ne(dn(),w)});var{execSync:jh}=require("child_process"),t_=xa(),i_=require("https"),kt=require("path"),s_=Bh(),He=require("fs"),_i=require("os"),Ft=(()=>{try{return He.accessSync("/usr/local/bin",He.constants.W_OK),"/usr/local/bin"}catch{return kt.join(process.env.INPUT_PKGX_DIR||kt.join(_i.homedir(),".pkgx"),"bin")}})();He.writeFileSync(process.env.GITHUB_PATH,`${Ft}
`);function Wn(){let i=_i.platform();i=="win32"&&(i="windows");let e=_i.arch();return e=="x64"&&(e="x86-64"),e=="arm64"&&(e="aarch64"),`${i}/${e}`}function r_(i,e,t){return new Promise((s,r)=>{i_.get(i,n=>{if(n.statusCode!==200){r(new Error(`Failed to get '${i}' (${n.statusCode})`));return}console.log("extracting tarball\u2026");let o=s_.x({cwd:e,strip:t});n.pipe(o).on("finish",s).on("error",r),o.on("error",r)}).on("error",r)})}function n_(i){let e=s=>s.startsWith('"')||s.startsWith("'")?s.slice(1,-1):s,t=s=>s.replaceAll(/\$\{([a-zA-Z0-9_]+):\+:\$[a-zA-Z0-9_]+\}/g,(n,o)=>(a=>a?`:${a}`:"")(process.env[o])).replaceAll(/\$\{([a-zA-Z0-9_]+)\}/g,(n,o)=>process.env[o]??"").replaceAll(/\$([a-zA-Z0-9_]+)/g,(n,o)=>process.env[o]??"");for(let s of i.split(`
`)){let r=s.match(/^([^=]+)=(.*)$/);if(r){let[n,o,a]=r,l=e(a);if(o==="PATH")l.replaceAll("${PATH:+:$PATH}","").replaceAll("$PATH","").replaceAll("${PATH}","").split(":").forEach(h=>{He.appendFileSync(process.env.GITHUB_PATH,`${h}
`)});else{let h=t(l);He.appendFileSync(process.env.GITHUB_ENV,`${o}=${h}
`)}}}}async function o_(){let i=3;async function e(){if(Wn().startsWith("windows"))return i=0,"https://pkgx.sh/Windows/x86_64.tgz";let s=`https://dist.pkgx.dev/pkgx.sh/${Wn()}/versions.txt`;console.log(`fetching ${s}`);let o=(await(await fetch(s)).text()).split(`
`),a=process.env.INPUT_VERSION?t_.maxSatisfying(o,process.env.INPUT_VERSION):o.slice(-1)[0];if(!a)throw new Error(`no version found for ${process.env.INPUT_VERSION}`);return console.log(`selected pkgx v${a}`),`https://dist.pkgx.dev/pkgx.sh/${Wn()}/v${a}.tar.gz`}console.log(`::group::installing ${kt.join(Ft,"pkgx")}`);let t=await e();console.log(`fetching ${t}`),He.existsSync(Ft)||He.mkdirSync(Ft,{recursive:!0}),await r_(t,Ft,i),console.log("::endgroup::")}(async()=>{if(await o_(),process.env.INPUT_PKGX_DIR&&He.appendFileSync(process.env.GITHUB_ENV,`PKGX_DIR=${process.env.INPUT_PKGX_DIR}
`),_i.platform()=="linux"){console.log("::group::installing pre-requisites");let i=kt.join(kt.dirname(__filename),"installer.sh");jh(i,{env:{PKGX_INSTALL_PREREQS:"1",...process.env}}),console.log("::endgroup::")}if(process.env["INPUT_+"]){console.log("::group::installing pkgx input packages");let i=process.env["INPUT_+"].split(" ");_i.platform()=="win32"&&(i=i.map(r=>r.replace("^","^^")));let e=`${kt.join(Ft,"pkgx")} ${i.map(r=>`+${r}`).join(" ")}`;console.log(`running: \`${e}\``);let t;process.env.INPUT_PKGX_DIR&&(t=process.env,t.PKGX_DIR=process.env.INPUT_PKGX_DIR);let s=jh(e,{env:t});n_(s.toString()),console.log("::endgroup::")}})().catch(i=>{console.error(`::error::${i.message}`),process.exit(1)});
